window.__require=function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+r+"'")}}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return a(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({CharEffect:[function(e,t,n){"use strict";cc._RF.push(t,"18120kGpEZDeY36CUCmq64w","CharEffect"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./CharView"),a=e("../_G"),i=e("../generate/db"),r=e("../common/Const"),s=e("../utils/UiHelper"),l=e("../manager/mgrPanel"),c=function(){function e(){this.action1=null,this.action2=null,this.charView1=null,this.charView2=null,this.index=null}return e.prototype.play=function(e,t,n){var s=this;this.index=e,this.action1||(this.action1=cc.sequence(cc.moveBy(.2,-70,0).easing(cc.easeOut(1.5)),cc.moveBy(.1,70,0).easing(cc.easeOut(1.5)))),this.action2||(this.action2=cc.sequence(cc.moveBy(.2,70,0).easing(cc.easeOut(1.5)),cc.moveBy(.1,-70,0).easing(cc.easeOut(1.5)),cc.callFunc(this.onActionFinish,this)));var c=i.default.get_up_db(r.UpId.girl,t);if(!this.charView1){var u=a.default.poolManager.get(o.default,c.view);u.setCreateCallback(function(){u.setPosition(n),u.setParent(l.default.getLayerNode(l.PANEL_LAYER.UI)),u.runAction(s.action1)}),this.charView1=u,this.charView1.create()}if(!this.charView2){var d=a.default.poolManager.get(o.default,c.view);d.setCreateCallback(function(){d.setPosition(n),d.setParent(l.default.getLayerNode(l.PANEL_LAYER.UI)),d.runAction(s.action2)}),this.charView2=d,this.charView2.create()}},e.prototype.onActionFinish=function(){null!=this.index&&a.default.sendMsg(r.MSG.GIRL_LVUP_EFFECT_FINISH,this.index),a.default.poolManager.put(this)},e.prototype.reuse=function(){},e.prototype.unuse=function(){this.index=null,this.action1&&(s.default.finishAction(this.action1),s.default.finishAction(this.action2)),this.charView1&&(this.charView1.stopAllActions(),this.charView1.setPosition(0,0),a.default.poolManager.put(this.charView1),this.charView1=null),this.charView2&&(this.charView2.stopAllActions(),this.charView2.setPosition(0,0),a.default.poolManager.put(this.charView2),this.charView2=null)},e.prototype.cleanup=function(){throw new Error("Method not implemented.")},e}();n.default=c,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../generate/db":"db","../manager/mgrPanel":"mgrPanel","../utils/UiHelper":"UiHelper","./CharView":"CharView"}],CharView:[function(e,t,n){"use strict";cc._RF.push(t,"7f4d0IlFbZEq4gv/X9nVzlp","CharView"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,null)||this;return n.prefabName=null,n.viewNode=null,n.spine=null,n.prefabName=t,n}return __extends(t,e),t.prototype.onCreateComplete=function(){this.viewNode=this.getChild("View"),this.spine=this.viewNode.getComponent(sp.Skeleton)},t.prototype.play=function(e,t){void 0===t&&(t=!0),this.spine&&this.spine.setAnimation(0,e,t)},t.prototype.setTimeScale=function(e){this.spine&&(this.spine.timeScale=e)},t.prototype.pause=function(){this.isLoaded&&this.spine&&(this.spine.paused=!0)},t.prototype.reuse=function(){this.show()},t.prototype.unuse=function(){this.isLoaded&&this.spine&&(this.spine.paused=!0,this.spine.timeScale=1),this.setScale(1),this.setCreateCallback(null),this.removeFromParent(),this.hide()},t.prototype.cleanup=function(){this.dispose()},t}(e("../ui/ViewBase").default);n.default=o,cc._RF.pop()},{"../ui/ViewBase":"ViewBase"}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"36046BTxg1KIKMbgL5PKgk2","Config"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.GameFrameRate=50,e.game_channel="v1",e.game_init_items=[[1001,15e4],[1006,1]],e.G_DUMMY_RANK=[[{fromScore:201,toScore:400,fromRank:50,toRank:1},{fromScore:101,toScore:200,fromRank:150,toRank:51},{fromScore:51,toScore:100,fromRank:300,toRank:151},{fromScore:21,toScore:50,fromRank:500,toRank:301},{fromScore:6,toScore:20,fromRank:800,toRank:501},{fromScore:1,toScore:5,fromRank:999,toRank:801}],[{fromScore:201,toScore:400,fromRank:50,toRank:1},{fromScore:101,toScore:200,fromRank:150,toRank:51},{fromScore:51,toScore:100,fromRank:300,toRank:151},{fromScore:21,toScore:50,fromRank:500,toRank:301},{fromScore:6,toScore:20,fromRank:800,toRank:501},{fromScore:1,toScore:5,fromRank:999,toRank:801}]],e.share_content=["\u8d85\u7f8e\u7684\u82b1\u82b1\u59d1\u5a18\u6700\u65b0\u6e38\u620f\uff0c\u5feb\u6765\u770b\u770b~","\u53d1\u751f\u4e86\u4ec0\u4e48\u4e0d\u5f97\u4e86\u7684\u4e8b\u60c5\uff0c\u6843\u82b1+\u6843\u82b1=\u6a31\u82b1\uff1f","\u606d\u559c\u53d1\u8d22-\u5927\u5409\u5927\u5229","\u8fd8\u5dee\u4e00\u6b65\u5c31\u80fd\u5408\u6210\u6700\u7ec8\u6781\u7684\u82b1\u82b1\u59d1\u5a18\u4e86\uff0c\u5feb\u6765\u5e2e\u6211\u4e00\u4e0b\uff01","\u7ed9\u4f60\u4e00\u4e2a\u4e0d\u4e00\u6837\u7684\u79d8\u5bc6\u82b1\u56ed\u3002","\u7adf\u7136\u6709\u8fd9\u4e48\u591a\u6f02\u4eae\u7684\u82b1\u82b1\u59d1\u5a18\uff01"],e.share_image_url=["https://gamesres.ultralisk.cn/notice/sharegames/game54v2/weixin.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game54v2/weixin_1.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game54v2/weixin_2.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game54v2/weixin_3.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game54v2/weixin_4.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game54v2/weixin_5.jpg"],e.share_reward_item=[{itemId:1001,count:6e4},{itemId:1001,count:6e4},{itemId:1001,count:6e4},{itemId:1001,count:6e4},{itemId:1001,count:6e4},{itemId:1001,count:6e4}],e.new_reward_item=[{itemId:1004,count:30},{itemId:1001,count:1e5}],e.auto_generate_girl_delta_time=10,e.auto_generate_girl_level_max=4,e.girl_grid_item_count=12,e.girl_gains_delta_time=3,e.girl_buy_delta_level=5,e.soil_count=12,e.flower_gains_delta_time=3,e.flower_get_btn_show_delta=60,e.buy_inscrease_rate=1.23,e.garden_unlock_level=5,e.coin_drop_delta_time=.3,e.coin_drop_duration=20,e.water_count_add_required_time=1800,e.girl_box_refresh_delta_time=7200,e.double_output_time=3601,e.fly_box_refresh_delta_time=300,e.fly_box_reward_coin_rate=180,e.offline_gains_time=21600,e.game_time_scale=1,e}();n.default=o,cc._RF.pop()},{}],Const:[function(e,t,n){"use strict";cc._RF.push(t,"e29f1Urqa1Gw7pjt2dlor5d","Const"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.VIEW_RESIZE="SYS_VIEW_RESIZE",e.GAME_PAUSE="GAME_PAUSE",e.SHOW_TIP="SHOW_TIP",e.RES_LOAD_START="RES_LOAD_START",e.RES_LOAD_PROGRESS="RES_LOAD_PROGRESS",e.RES_LOAD_END="RES_LOAD_END",e.LOADING_COMPLETED="LOADING_COMPLETED",e.ITEM_CHANGE="ITEM_CHANGE",e.SHARE_SUC="SHARE_SUC",e.ADV_SHOW_SUC="ADV_SHOW_SUC",e.ADV_CLICK_SUC="ADV_CLICK_SUC",e.COP_CHANGED="COP_CHANGED",e.RECEIVE_RANK_DATA="RECEIVE_RANK_DATA",e.UP_UNLOCK_SUC="UP_UNLOCK_SUC",e.UP_LVUP_SCU="UP_LVUP_SCU",e.QUEST_COMPLETE="QUEST_COMPLETE",e.QUEST_COMMIT_FINISH="QUEST_COMMIT_FINISH",e.ACH_STATE_CHANGE="ACH_STATE_CHANGE",e.SWITCH_DAILY_ACTIVE="SWITCH_DAILY_ACTIVE",e.PAY_SUCCESS="PAY_SUCCESS",e.GUD_COMPLETE_KEY="GUD_COMPLETE_KEY",e.GIRL_ADD="GIRL_ADD",e.GIRL_CHANGE="GIRL_CHANGE",e.GIRL_GAINS_COIN="GIRL_GAINS_COIN",e.GIRL_PRICE_UPDATE="GIRL_PRICE_UPDATE",e.GIRL_LVUP_EFFECT_FINISH="GIRL_LVUP_EFFECT_FINISH",e.FLOWER_CHANGE="FLOWER_CHANGE",e.FLOWER_GAINS_COIN="FLOWER_GAINS_COIN",e.START_WATER_TIME="START_WATER_TIME",e.END_WATER_TIME="END_WATER_TIME",e.PLAY_ENGERY_ACTION="PLAY_ENGERY_ACTION",e.PLAY_COIN_ACTION="PLAY_COIN_ACTION",e.PLAY_GIRL_FLY="PLAY_GIRL_FLY",e.RECHECK_ADV="RECHECK_ADV"}(n.MSG||(n.MSG={})),function(e){e[e.DIAMOND=1e3]="DIAMOND",e[e.COIN=1001]="COIN",e[e.VIT=1002]="VIT",e[e.RMB=1003]="RMB",e[e.ENERGY=1004]="ENERGY",e[e.GIRL_LEVEL=1005]="GIRL_LEVEL",e[e.WATER=1006]="WATER",e[e.GIRL=1010]="GIRL"}(n.ITEM_ID||(n.ITEM_ID={})),function(e){e.GET_ITEM="GET_ITEM",e.USE_ITEM="USE_ITEM",e.GIRL_LEVEL="GIRL_LEVEL",e.GIRL_MERGE="GIRL_MERGE",e.HAPPY_TIME="HAPPY_TIME",e.LOTTERY="LOTTERY",e.GIRL_BUY="GIRL_BUY",e.OPEN_BOX="OPEN_BOX",e.FLOWER_GET="FLOWER_GET",e.SHARE="SHARE"}(n.ACTION_ID||(n.ACTION_ID={})),function(e){e.DAILY="1",e.WEEKLY="2"}(n.SWITCH_ID||(n.SWITCH_ID={})),function(e){e.SIGN="1"}(n.DROP_ID||(n.DROP_ID={})),function(e){e[e.girl=1]="girl",e[e.flower=2]="flower"}(n.UpItemType||(n.UpItemType={})),function(e){e.girl="1",e.flower="2",e.soil="3"}(n.UpId||(n.UpId={})),cc._RF.pop()},{}],DebugKeyDown:[function(e,t,n){"use strict";cc._RF.push(t,"70376pMhA5EWahZWf48Tb8J","DebugKeyDown"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/mgrPanel"),a=e("../ui/PanelDialog"),i=e("../manager/mgrRecord"),r=e("../_G"),s=e("../common/Const"),l=e("../manager/mgrSdk"),c=e("../manager/mgrAdv"),u=e("../ui/PanelTestHead"),d=1,f=function(){function e(){}return e.onKeyDown=function(e){if(e===cc.macro.KEY.c){var t={desc:"\u662f\u5426\u6e05\u9664\u5b58\u6863?\n(\u4e0b\u6b21\u542f\u52a8\u6709\u6548)",confirm:function(){i.default.deletAndDisabled()},cancel:function(){}};o.default.openPanel(a.default,t)}else e==cc.macro.KEY.q?r.default.sendMsg(s.MSG.SHOW_TIP,"haha msg"+d++):e==cc.macro.KEY.d?(this.debugGameInfo(),l.default.debugMode=!0,c.default.debugMode=!0,l.default.shareEnabled=!0):e==cc.macro.KEY.i&&o.default.openPanel(u.default)},e.debugGameInfo=function(){console.log("_G.canvasSize:"+r.default.canvasWidth+", "+r.default.canvasHeight);var e=cc.view.getFrameSize();console.log("frameSize:"+e.width+", "+e.height);var t=cc.view.getCanvasSize();console.log("canvasSize:"+t.width+", "+t.height);var n=o.default.getCanvas().designResolution;console.log("canvasDesign:"+n.width+", "+n.height);var a=o.default.getCanvas().node.getContentSize();console.log("canvasContentSize:"+a.width+", "+a.height);var i=cc.view.getDesignResolutionSize();console.log("designSize:"+i.width+", "+i.height),o.default.debugPanels(),r.default.poolManager.debugInfo()},e.testFun=function(){},e}();n.default=f,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../manager/mgrAdv":"mgrAdv","../manager/mgrPanel":"mgrPanel","../manager/mgrRecord":"mgrRecord","../manager/mgrSdk":"mgrSdk","../ui/PanelDialog":"PanelDialog","../ui/PanelTestHead":"PanelTestHead"}],DialogOpenAnim:[function(e,t,n){"use strict";cc._RF.push(t,"36a80IPQ+ZNGJ+FI1pY42VG","DialogOpenAnim"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/mgrRes"),a=cc._decorator,i=a.ccclass,r=a.property,s=a.requireComponent,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openAnim=null,t.closeAnim=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;if(null==this.openAnim){var t=o.default.tryLoadRes("animation/defaultDialogOpen",cc.AnimationClip);this.openAnim=t}if(null!=this.openAnim){var n=this.getComponent(cc.Animation);n.addClip(this.openAnim);n.play("defaultDialogOpen");n.on("finished",function(){e._onOpenDialogCompleted(),n.targetOff(e)},this)}},t.prototype._onOpenDialogCompleted=function(){},__decorate([r(cc.AnimationClip)],t.prototype,"openAnim",void 0),__decorate([r(cc.AnimationClip)],t.prototype,"closeAnim",void 0),t=__decorate([i,s(cc.Animation)],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../manager/mgrRes":"mgrRes"}],Effect:[function(e,t,n){"use strict";cc._RF.push(t,"3dfe9lVFuVLWrve6KujD8Sf","Effect"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("../ui/ViewBase"),i=e("../tweener/UITweener"),r=e("../_G"),s=e("../manager/mgrPanel"),l=e("../extensions/SpriteSheet");(function(e){e[e.unkown=0]="unkown",e[e.spine=1]="spine",e[e.animation=2]="animation",e[e.tween=3]="tween",e[e.partical=4]="partical",e[e.spriteSheet=5]="spriteSheet"})(o||(o={}));var c=function(e){function t(t){var n=e.call(this,null)||this;return n.eType=o.unkown,n.effectComponent=null,n.playTime=0,n.leftPlayTime=0,n.prefabName=t,n}return __extends(t,e),t.prototype.onCreateComplete=function(){return this.setParent(s.default.getLayerNode(s.PANEL_LAYER.TIP)),this.effectComponent=this.resNode.getComponentInChildren(l.default),this.effectComponent?(this.eType=o.spriteSheet,void(this.effectComponent.OnFinished=this.onEffectFinish.bind(this))):(this.effectComponent=this.resNode.getComponentInChildren(sp.Skeleton),this.effectComponent?(this.eType=o.spine,void this.effectComponent.setCompleteListener(this.onEffectFinish.bind(this))):(this.effectComponent=this.resNode.getComponentInChildren(cc.Animation),this.effectComponent?(this.eType=o.animation,void this.effectComponent.on("finished",this.onEffectFinish,this)):(this.effectComponent=this.resNode.getComponentInChildren(i.default),this.effectComponent?(this.eType=o.tween,void(this.effectComponent.OnFinished=this.onEffectFinish.bind(this))):(this.effectComponent=this.resNode.getComponentInChildren(cc.ParticleSystem),this.effectComponent?(this.eType=o.partical,void cc.error("warn ParticleSystem has not callback ")):(cc.error("\u6682\u4e0d\u652f\u6301\u7684\u7279\u6548\u7c7b\u578b"),void cc.error("unkown effect type"))))))},t.prototype.onEffectFinish=function(){this.recycleSelf()},t.prototype.recycleSelf=function(){r.default.poolManager.put(this)},t.prototype.update=function(e){this.playTime>0&&this.leftPlayTime<=0&&this.stop()},t.prototype.setTime=function(e){this.playTime=e},t.prototype.play=function(e){switch(this.eType){case o.spriteSheet:this.effectComponent.play();break;case o.spine:this.effectComponent.setAnimation(0,e,!1);break;case o.animation:this.effectComponent.play(e);break;case o.tween:this.effectComponent.ResetToBeginning(),this.effectComponent.PlayForward();break;case o.partical:this.effectComponent.resetSystem()}this.leftPlayTime=this.playTime},t.prototype.stop=function(){switch(this.eType){case o.spriteSheet:this.effectComponent.stop();break;case o.spine:this.effectComponent.paused=!0;break;case o.animation:this.effectComponent.stop();break;case o.tween:this.effectComponent.Stop();break;case o.partical:this.effectComponent.stopSystem()}this.recycleSelf()},t.prototype.reuse=function(){this.setParent(s.default.getLayerNode(s.PANEL_LAYER.TIP)),this.show()},t.prototype.unuse=function(){this.removeFromParent(),this.hide()},t.prototype.cleanup=function(){this.dispose()},t}(a.default);n.default=c,cc._RF.pop()},{"../_G":"_G","../extensions/SpriteSheet":"SpriteSheet","../manager/mgrPanel":"mgrPanel","../tweener/UITweener":"UITweener","../ui/ViewBase":"ViewBase"}],FlowerItem:[function(e,t,n){"use strict";cc._RF.push(t,"6389cI9qh5ApZfOA4ttb1Kj","FlowerItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/UiHelper"),a=e("../generate/db"),i=e("../common/Const"),r=e("./mgrGame"),s=e("../_G"),l=e("../utils/Mathf"),c=e("../Config"),u=e("../extensions/SpriteSwitcher"),d=e("../utils/Tools"),f=e("./JumpCoin"),p=e("../manager/mgrPanel"),h=e("../ui/PanelGarden"),g=e("../manager/mgrAudio"),m=e("./CharView"),_=e("../manager/mgrItem"),v=e("./NumberEffect"),y=e("../tweener/TweenScale"),b=function(){function e(e,t){this.node=null,this.index=-1,this.lockNode=null,this.priceLabel=null,this.iconSwitcher=null,this.viewNode=null,this.levelNode=null,this.levelLabel=null,this.btnLvupNode=null,this.btnLvupIconSwitcher=null,this.btnGetnode=null,this.capacityBar=null,this.flowerView=null,this.nextShowGetBtnTime=0,this.nextDropCoinTime=0,this.bDropTime=!1,this.rect=null,this.curJumpCoin=null,this.level=0,this.curOutput=0,this.capacity=0,this.numberPos=null,this.node=e,this.index=t,this.lockNode=e.getChildByName("Lock"),this.priceLabel=o.default.getChildComponent(e,"Price",cc.Label),this.iconSwitcher=o.default.getChildComponent(e,"Icon",u.default),this.viewNode=e.getChildByName("View"),this.levelNode=e.getChildByName("LevelNode"),this.levelLabel=o.default.getChildComponent(this.levelNode,"Level",cc.Label),this.btnLvupNode=e.getChildByName("BtnLvup"),this.btnLvupIconSwitcher=this.btnLvupNode.getComponentInChildren(u.default),this.btnGetnode=e.getChildByName("BtnGet"),this.capacityBar=o.default.getChildComponent(this.btnGetnode,"Bar",cc.Sprite),this.btnLvupNode.on("click",this.onLvupClick,this),this.btnGetnode.getChildByName("btn").on("click",this.onGetClick,this);var n=cc.sequence(cc.moveBy(1,0,10),cc.moveBy(1,0,-10)).repeatForever();this.btnGetnode.runAction(n)}return e.prototype.dispose=function(){this.removeFlower(),this.curJumpCoin&&(s.default.poolManager.put(this.curJumpCoin),this.curJumpCoin=null)},e.prototype.onLvupClick=function(){r.default.lvupFlower(this.index)&&this.btnLvupNode.getChildByName("icon").runAction(cc.sequence(cc.scaleTo(.1,1.3),cc.scaleTo(.1,1)))},e.prototype.onGetClick=function(){var e=this,t=r.default.reapFlower(this.index);this.btnGetnode.active=!1,this.nextShowGetBtnTime=c.default.flower_get_btn_show_delta,null==this.numberPos&&(this.numberPos=p.default.getLayerNode(p.PANEL_LAYER.TIP).convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)));var n=s.default.poolManager.get(v.default);n.setCreateCallback(function(){n.play(t,e.numberPos)}),n.create(),s.default.sendMsg(i.MSG.PLAY_COIN_ACTION),this.refreshBtnState()},e.prototype.lockState=function(){this.level=-1,this.iconSwitcher.switchSprite(-1),this.levelNode.active=!1,this.switchBtnToNone();var e=a.default.get_up_db(i.UpId.soil,this.index+1);this.priceLabel.string="",this.lockNode.getChildByName("Price").getComponent(cc.Label).string=e.reqCnt+"\u7ea7\u89e3\u9501"},e.prototype.emptyState=function(){var e=this;this.lockNode.active=!1;var t=a.default.get_up_db(i.UpId.flower,0);this.iconSwitcher.switchSprite(t.reqId==i.ITEM_ID.COIN?0:1);var n=a.default.get_up_db(i.UpId.soil,this.index+1);this.priceLabel.string="  "+r.default.formatBigNumber(n.flowerUnlockCoin),this.levelNode.active=!1,this.switchBtnToLvup(!0);var o=s.default.poolManager.get(m.default,t.view);o.setCreateCallback(function(){o.setParent(e.viewNode),o.play("l1")}),this.flowerView=o,o.create()},e.prototype.flowerState=function(){this.lockNode.active=!1,this.setFlower()},e.prototype.hasFlower=function(){return!!this.flowerView&&this.flowerView.isLoaded},e.prototype.setFlower=function(){var e=this;this.flowerView&&this.removeFlower(),this.levelNode.active=!0,this.btnGetnode.active=!0;var t=r.default.getFlowerLevel(this.index);this.level=t;var n=a.default.get_up_db(i.UpId.flower,t);this.capacity=n.capacity;var o=s.default.poolManager.get(m.default,n.view);o.setCreateCallback(function(){o.setParent(e.viewNode),o.play("l1");var t=cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1));o.runAction(t),e.refreshBar()}),this.flowerView=o,o.create(),this.levelLabel.string=t.toString(),this.curOutput=n.output,this.refreshBtnState()},e.prototype.removeFlower=function(){this.flowerView&&(s.default.poolManager.put(this.flowerView),this.flowerView=null)},e.prototype.init=function(){r.default.isSoilUnlock(this.index)?0==r.default.getFlowerLevel(this.index)?this.emptyState():this.flowerState():this.lockState()},e.prototype.switchBtnToLvup=function(e){this.iconSwitcher.switchSprite(0==this.level?0:1),this.btnLvupIconSwitcher.switchSprite(e?0:1),this.btnLvupNode.active=!0,this.btnGetnode.active=!1},e.prototype.switchBtnToGet=function(){if(!this.btnGetnode.active){var e=this.btnGetnode.getComponent(y.default);e.ResetToBeginning(),e.PlayForward()}this.btnLvupNode.active=!1,this.btnGetnode.active=!0,this.iconSwitcher.switchSprite(-1),this.priceLabel.string=""},e.prototype.switchBtnToNone=function(){this.btnLvupNode.active=!1,this.btnGetnode.active=!1,this.iconSwitcher.switchSprite(-1),this.priceLabel.string=""},e.prototype.refreshBtnState=function(){if(!this.bDropTime)if(this.hasFlower())if(this.level>0)if(this.level>=r.default.getCurMaxGirlLevel())this.nextShowGetBtnTime<=0?this.switchBtnToGet():this.switchBtnToNone();else if(this.nextShowGetBtnTime<=0)this.switchBtnToGet();else{var e=a.default.get_up_db(i.UpId.flower,this.level);this.priceLabel.string="  "+r.default.formatBigNumber(e.reqCnt),this.switchBtnToLvup(e.reqCnt<=_.default.getItemCount(e.reqId))}else this.switchBtnToLvup(!0);else this.switchBtnToNone()},e.prototype.refreshBar=function(){this.hasFlower()&&this.capacity>0&&(this.capacityBar.fillRange=l.default.Clamp01(r.default.getFlowerIncome(this.index)/this.capacity))},e.prototype.refreshFlower=function(){this.removeFlower(),this.setFlower()},e.prototype.setWaterTime=function(e){this.bDropTime=e,this.hasFlower()&&(e?(this.nextShowGetBtnTime+=c.default.coin_drop_duration+3,this.flowerView.setTimeScale(2),this.switchBtnToNone()):(this.curJumpCoin&&(s.default.poolManager.put(this.curJumpCoin),this.curJumpCoin=null),this.flowerView.setTimeScale(1),this.refreshBtnState()))},e.prototype.tryDropCoin=function(){if(this.level>0&&this.hasFlower()){if(this.curJumpCoin)return!1;var e=s.default.poolManager.get(f.default);this.curJumpCoin=e;var t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);return e.setCreateCallback(function(){var n=p.default.getLayerNode(p.PANEL_LAYER.UI);e.setParent(n),e.jump(n.convertToNodeSpaceAR(t))}),e.create(),g.default.playSound("coin"),!0}return!1},e.prototype.tryPickup=function(e){this.hasFlower()&&this.hitTest(e)&&this.curJumpCoin&&(this.curJumpCoin.fly(h.default.coinDestPosition,this.curOutput*c.default.coin_drop_delta_time)?this.curJumpCoin=null:cc.log("can't fly!!!"))},e.prototype.hitTest=function(e){return this.rect||(this.rect=d.default.calcNodeBoundingBoxToWorld(this.node)),this.rect.contains(e)},e.prototype.update=function(e){this.nextShowGetBtnTime>0&&!this.bDropTime&&(this.nextShowGetBtnTime-=e),this.updateFall(e)},e.prototype.updateFall=function(e){this.bDropTime&&(this.nextDropCoinTime-=e,this.nextDropCoinTime<=0&&this.tryDropCoin()&&(this.nextDropCoinTime=c.default.coin_drop_delta_time))},e}();n.default=b,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../extensions/SpriteSwitcher":"SpriteSwitcher","../generate/db":"db","../manager/mgrAudio":"mgrAudio","../manager/mgrItem":"mgrItem","../manager/mgrPanel":"mgrPanel","../tweener/TweenScale":"TweenScale","../ui/PanelGarden":"PanelGarden","../utils/Mathf":"Mathf","../utils/Tools":"Tools","../utils/UiHelper":"UiHelper","./CharView":"CharView","./JumpCoin":"JumpCoin","./NumberEffect":"NumberEffect","./mgrGame":"mgrGame"}],FlyBox:[function(e,t,n){"use strict";cc._RF.push(t,"f3148GLYrNBjKv3GSD1DTYs","FlyBox"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ui/ViewBase"),a=e("../_G"),i=e("../manager/mgrPanel"),r=e("../utils/UiHelper"),s=e("../manager/mgrOperations"),l=e("../utils/Timer"),c=e("../common/Const"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/game/FlyBox",t.flyCount=0,t}return __extends(t,e),t.prototype.onCreateComplete=function(){var e,t=i.default.getLayerNode(i.PANEL_LAYER.UI);this.setParent(t),r.default.addClick(this.resNode,this.onClickBox,this),this.startAction(),this.registerMsg(((e={})[c.MSG.START_WATER_TIME]=this.dispose.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg(),this.stopAllActions(),e.prototype.dispose.call(this)},t.prototype.onClickBox=function(){this.dispose(),s.default.makeFlyBoxReward()},t.prototype.startAction=function(){var e=new cc.Vec2((a.default.canvasWidth/2+100)*(this.flyCount%2==0?1:-1),310-0*this.flyCount);this.setPosition(e),e.x*=-1;var t=cc.sequence(cc.moveTo(10,e),cc.callFunc(this.onActionFinish,this));this.resNode.runAction(t)},t.prototype.onActionFinish=function(){var e=this;this.flyCount++,this.flyCount>=2?this.dispose():l.default.callLater(.1,function(){e.startAction()})},t}(o.default);n.default=u,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../manager/mgrOperations":"mgrOperations","../manager/mgrPanel":"mgrPanel","../ui/ViewBase":"ViewBase","../utils/Timer":"Timer","../utils/UiHelper":"UiHelper"}],FlyGirl:[function(e,t,n){"use strict";cc._RF.push(t,"d7b4cJvGY1EN5REZgc3bqXB","FlyGirl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./CharView"),a=e("../_G"),i=function(){return function(e,t){this.girlView=null,this.girlView=a.default.poolManager.get(o.default,e),this.index=t}}();n.default=i,cc._RF.pop()},{"../_G":"_G","./CharView":"CharView"}],FlyIcon:[function(e,t,n){"use strict";cc._RF.push(t,"1b4c5O6dylBUoZdFkv0MSCZ","FlyIcon"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ui/ViewBase"),a=e("../extensions/SpriteSwitcher"),i=e("../common/Const"),r=e("../utils/Mathf"),s=e("../_G"),l=cc._decorator.ccclass,c=1,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/game/FlyIcon",t.iconSwitcher=null,t}return __extends(t,e),t.prototype.onCreateComplete=function(){this.iconSwitcher=this.getChildComponent("View",a.default)},t.prototype.setCoin=function(){this.iconSwitcher.switchSprite(0)},t.prototype.setEnergy=function(){this.iconSwitcher.switchSprite(1)},t.prototype.fly=function(e,t){this.setPosition(e);var n=r.default.Random(100,260)*c;c=1-c;var o=[e,new cc.Vec2(e.x+n,e.y+(t.y-e.y)*r.default.Random(2,5)*.1),t],a=cc.sequence(cc.bezierTo(1,o),cc.fadeOut(.1),cc.callFunc(this.onMoveTweenFinish,this));this.runAction(a)},t.prototype.onMoveTweenFinish=function(){s.default.poolManager.put(this),s.default.sendMsg(i.MSG.PLAY_ENGERY_ACTION)},t.prototype.reuse=function(){this.show()},t.prototype.unuse=function(){this.resNode.opacity=255,this.stopAllActions(),this.removeFromParent(),this.hide()},t.prototype.cleanup=function(){throw new Error("Method not implemented.")},t=__decorate([l],t)}(o.default);n.default=u,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../extensions/SpriteSwitcher":"SpriteSwitcher","../ui/ViewBase":"ViewBase","../utils/Mathf":"Mathf"}],GamePool:[function(e,t,n){"use strict";cc._RF.push(t,"b7f41kHMRFFlZIkS4vBQoKZ","GamePool"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.effectPrefab=null,t}var n;return __extends(t,e),n=t,t.prototype.onLoad=function(){n.m_Instance=this},t.m_Instance=null,__decorate([i(cc.Prefab)],t.prototype,"effectPrefab",void 0),t=n=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Girl:[function(e,t,n){"use strict";cc._RF.push(t,"a52de7w19NOa4HWB4fVg3dZ","Girl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ui/ViewBase"),a=e("../generate/db"),i=e("../common/Const"),r=e("./mgrGame"),s=e("../Config"),l=e("./CharView"),c=e("../_G"),u=e("../utils/UiHelper"),d=e("../utils/Mathf"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/game/Girl",t.level=0,t.levelNode=null,t.levelLabel=null,t.gainsCoinLabel=null,t.charView=null,t.gainsCoinAction=null,t}return __extends(t,e),t.prototype.onCreateComplete=function(){this.levelNode=this.getChild("lvbg"),this.levelLabel=this.getChildComponent("lvbg/Lv",cc.Label),this.gainsCoinLabel=this.getChildComponent("Gains/Count",cc.Label),this.levelNode.active=!1},t.prototype.dispose=function(){this.clearView(),e.prototype.dispose.call(this)},t.prototype.viewVisible=function(){return this.charView&&this.charView.isLoaded},t.prototype.clearView=function(){this.charView&&(c.default.poolManager.put(this.charView),this.charView=null),this.levelNode.active=!1},t.prototype.setLevel=function(e){var t=this;this.clearView(),this.levelNode.active=!0,this.level=e,this.levelLabel.string=e.toString();var n=a.default.get_up_db(i.UpId.girl,e),o=c.default.poolManager.get(l.default,n.view);this.charView=o,o.setCreateCallback(function(){t.isDisposed||(o.setParent(t.getChild("View")),o.play("l2"))}),o.create()},t.prototype.setFocus=function(e){this.charView&&(e?(this.resNode.setSiblingIndex(-1),this.charView.play("l3"),this.charView.setScale(1.2)):(this.charView.play("l2"),this.charView.setScale(1)))},t.prototype.gainsCoin=function(){if(this.gainsCoinAction){if(!this.gainsCoinAction.isDone())return}else this.gainsCoinAction=cc.sequence(cc.spawn(cc.moveBy(.2,0,50),cc.fadeTo(.2,255)),cc.delayTime(.2),cc.fadeTo(.2,0));var e=r.default.formatBigNumber(Math.floor(a.default.get_up_db(i.UpId.girl,this.level).output*s.default.girl_gains_delta_time));this.gainsCoinLabel.string="+"+e,this.gainsCoinLabel.node.setPosition(0,-20),this.gainsCoinLabel.node.runAction(this.gainsCoinAction)},t.prototype.fly=function(e,t,n,o){void 0===n&&(n=0),this.setScale(n),e=this.resNode.parent.convertToNodeSpaceAR(e),this.setPosition(e);var a,i=e.sub(t).mag();o=null==o?Math.max(.6,i/400*.3):o,a=e.x>200?-d.default.Random(250,360):d.default.Random(150,360)*(2*d.default.Random(0,1)-1);var r=[e,new cc.Vec2(e.x+a,e.y+Math.abs(.3*e.y)),t],s=cc.spawn(cc.bezierTo(o,r),cc.scaleTo(o,1));this.runAction(s)},t.prototype.reset=function(){this.charView&&(this.charView.pause(),this.charView.setScale(1)),this.stopAllActions(),this.setScale(1),this.removeFromParent(),this.hide(),this.gainsCoinAction&&(this.gainsCoinLabel.node.stopAllActions(),u.default.finishAction(this.gainsCoinAction)),this.gainsCoinLabel.node.opacity=0},t}(o.default);n.default=f,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../generate/db":"db","../ui/ViewBase":"ViewBase","../utils/Mathf":"Mathf","../utils/UiHelper":"UiHelper","./CharView":"CharView","./mgrGame":"mgrGame"}],GridItem:[function(e,t,n){"use strict";cc._RF.push(t,"acc0eC2YDhEMKGoUKJ74FCh","GridItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/Tools"),a=e("./Girl"),i=e("../_G"),r=e("./Effect"),s=e("../manager/mgrPanel"),l=e("./CharEffect"),c=e("./FlyIcon"),u=e("../ui/PanelMain"),d=function(){function e(e,t){this.node=null,this.index=null,this.girl=null,this.lvupBox=null,this.rect=null,this.position=null,this.startPoint=null,this.effectPos=null,this.effectPos1=null,this.node=e,this.index=t}return e.prototype.init=function(){this.position=this.node.position;var e=new a.default;e.create(),e.setParent(this.node.parent),this.girl=e},e.prototype.setGirlLevel=function(e,t){this.girl.setLevel(e),null!=t?this.girl.fly(t,this.position):this.girl.setPosition(this.position)},e.prototype.hasGirl=function(){return!!this.girl&&this.girl.viewVisible()},e.prototype.clearGirl=function(){this.girl&&this.girl.clearView()},e.prototype.lvup=function(){var e=this,t=this.girl.level;this.clearGirl(),this.setGirlLevel(t+1,null),this.effectPos||(this.effectPos=s.default.getLayerNode(s.PANEL_LAYER.TIP).convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)));var n=i.default.poolManager.get(r.default,"prefab/game/EffectColorStar");n.setCreateCallback(function(){n.setPosition(e.effectPos),n.play()}),n.create(),this.playFlyIconEffect(u.default.coinIconPos,u.default.energyIconPos)},e.prototype.getGirlViewCanvasPos=function(){return this.effectPos1||(this.effectPos1=s.default.getLayerNode(s.PANEL_LAYER.TIP).convertToNodeSpaceAR(this.girl.getChild("View").convertToWorldSpaceAR(cc.Vec2.ZERO))),this.effectPos1},e.prototype.playLvupEffect=function(){var e=this.girl.level;i.default.poolManager.get(l.default).play(this.index,e,this.getGirlViewCanvasPos())},e.prototype.playFlyIconEffect=function(e,t){var n;this.effectPos||(this.effectPos=s.default.getLayerNode(s.PANEL_LAYER.TIP).convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)));var o=s.default.getLayerNode(s.PANEL_LAYER.TIP);t&&((n=i.default.poolManager.get(c.default)).create(),n.setParent(o),n.setEnergy(),n.fly(this.effectPos,t))},e.prototype.playGirlFly=function(e){this.girl.fly(e,this.position,1.5,1)},e.prototype.swap=function(e){var t=this.girl;this.girl=e.girl,e.girl=t,this.resetGirl(),e.resetGirl()},e.prototype.gainsCoin=function(){this.hasGirl()&&this.girl.gainsCoin()},e.prototype.resetGirl=function(){this.hasGirl()&&this.girl.setPosition(this.position)},e.prototype.touchBegin=function(e){this.startPoint=e,this.girl.setFocus(!0)},e.prototype.touchMove=function(e){var t=this.position.x+e.x-this.startPoint.x,n=this.position.y+e.y-this.startPoint.y;this.girl.setPosition(t,n)},e.prototype.touchEnd=function(e){this.girl.setPosition(this.node.position),this.girl.setFocus(!1)},e.prototype.hitTest=function(e){return this.rect||(this.rect=o.default.calcNodeBoundingBoxToWorld(this.node)),this.rect.contains(e)},e}();n.default=d,cc._RF.pop()},{"../_G":"_G","../manager/mgrPanel":"mgrPanel","../ui/PanelMain":"PanelMain","../utils/Tools":"Tools","./CharEffect":"CharEffect","./Effect":"Effect","./FlyIcon":"FlyIcon","./Girl":"Girl"}],GuideScript:[function(e,t,n){"use strict";cc._RF.push(t,"4cdedSOpp5DqLWAlwt27Yns","GuideScript"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ui/PanelGuide"),a=e("./mgrGame");n.GuideScript={},n.initGuide=function(){n.GuideScript.enter_main=[o.GUD.showMsg("\u5408\u6210\uff0c\u9047\u89c1\u65b0\u7684\u82b1\u82b1\u59d1\u5a18\u5427",0,252),o.GUD.moveFingerBetween("PanelMain","gud_key_girl_merge_suc",cc.v2(-100),0,10,340,220),o.GUD.closeAndSave()],n.GuideScript.gud_close_girl_2=[o.GUD.setMaskVisible(!1),o.GUD.callFunc(function(){a.default.forceClearGenerateTime()}),o.GUD.setBlockEnabled(!0),o.GUD.wait(1),o.GUD.setBlockEnabled(!1),o.GUD.setMaskVisible(!0),o.GUD.showMsg("\u89e6\u6478\u6c34\u6676\uff0c\u627e\u5230\u66f4\u591a\u7684\u82b1\u82b1\u59d1\u5a18"),o.GUD.showFingerTo("PanelMain/AnchorBottomRight2/cc_btnGenerate","gud_key_girl_auto_generate"),o.GUD.showMsg("\u6216\u8005\u76f4\u63a5\u53ec\u5524\u82b1\u82b1\u59d1\u5a18"),o.GUD.click("PanelMain/AnchorBottom/Btns/cc_btnBuy"),o.GUD.closeAndSave()],n.GuideScript.gud_close_girl_5=[o.GUD.showMsg("\u5546\u5e97\u89e3\u9501\u4e86\uff0c\u5feb\u53bb\u770b\u770b\u5427"),o.GUD.click("PanelMain/AnchorBottom/Btns/cc_btnHuaLing"),o.GUD.closeAndSave()],n.GuideScript.gud_close_hualing=[o.GUD.showMsg("\u54c7\uff0c\u4f60\u53d1\u73b0\u4e86\u82b1\u82b1\u59d1\u5a18\u7684\u79d8\u5bc6\u82b1\u56ed\uff01"),o.GUD.click("PanelMain/AnchorBottom/Btns/cc_btnGarden"),o.GUD.hideMsg(),o.GUD.setMaskVisible(!1),o.GUD.setBlockEnabled(!0),o.GUD.wait(.5),o.GUD.setBlockEnabled(!1),o.GUD.showMsg("\u5f00\u59cb\u79cd\u690d\u82b1\u6735\u5427",0,-100),o.GUD.setMaskVisible(!0),o.GUD.click("PanelGarden/cc_gridNode/cc_l1/BtnLvup"),o.GUD.showMsg("\u6bcf\u6735\u82b1\u90fd\u6709\u5b83\u7684\u8d21\u732e",0,-100),o.GUD.click("PanelGarden/cc_gridNode/cc_l1/BtnGet/btn"),o.GUD.showMsg("\u7ee7\u7eed\u627e\u5230\u66f4\u9ad8\u7ea7\u7684\u82b1\u82b1\u59d1\u5a18\u5427",0,-100),o.GUD.click("PanelGarden/cc_anchorBottom/Btns/cc_btnGirl"),o.GUD.closeAndSave()]},cc._RF.pop()},{"../ui/PanelGuide":"PanelGuide","./mgrGame":"mgrGame"}],JsBridge:[function(e,t,n){"use strict";cc._RF.push(t,"f5e62IkI81HbaHuAJXbtFtu","JsBridge");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=null,i={},r=!1,s=function(){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t)}return o(t,[{key:"init",value:function(){if(!r){r=!0;try{a=e("../ulsdk/ulsdkmiddleware/ulsdkmiddleware")}catch(e){console.log(e)}a?(a.initSdk(),a.setGameCallback(this.receiveFromSdk),console.log("JsBridge has inited.")):cc.warn("can't find ULSdk")}}},{key:"registerCmd",value:function(e,t){this.init(),i.hasOwnProperty(e)&&cc.warn("the cmd has registed"),i[e]=t}},{key:"receiveFromSdk",value:function(e){console.log("receive from sdk:"+e);var t=JSON.parse(e);if(t){var n=t.cmd,o=t.data;i[n]?i[n](o):console.log("JsBridge:can't find callback with cmd["+n+"].")}else cc.error("JsBridge:can't decode json["+e+"].")}},{key:"sendToSdk",value:function(e,t){var n={cmd:e,data:t},o=JSON.stringify(n);console.log("send to sdk:"+o),r&&a&&a.request(o)}}]),t}();t.exports=new s,cc._RF.pop()},{"../ulsdk/ulsdkmiddleware/ulsdkmiddleware":"ulsdkmiddleware"}],JumpCoin:[function(e,t,n){"use strict";cc._RF.push(t,"590bcP3/ZNMk6gX7rGURZNo","JumpCoin"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("../ui/ViewBase"),i=e("../utils/UiHelper"),r=e("../utils/Mathf"),s=e("../_G"),l=e("../manager/mgrItem"),c=e("../common/Const"),u=e("./mgrGame");(function(e){e[e.LOADING=0]="LOADING",e[e.IDLE=1]="IDLE",e[e.JUMP=2]="JUMP",e[e.STAY=3]="STAY",e[e.FLY=4]="FLY"})(o||(o={}));var d=function(e){function t(){var t=e.call(this,null)||this;return t.prefabName="prefab/game/JumpCoin",t.jumpAction=null,t.state=o.LOADING,t.coinCount=0,t}return __extends(t,e),t.prototype.onCreateComplete=function(){this.state==o.LOADING&&(this.state=o.IDLE,this.context&&this.context())},t.prototype.getActionFromCache=function(e){if("jump"==e){var n=null,o=t.jumpActionCache.length;if(o>0&&(n=t.jumpActionCache.splice(r.default.Random(o)-1,1)[0]),!n){for(var a=0;a<5;a++){var i=30*r.default.Random(-3,3),s=r.default.Random(10,80);n=cc.sequence(cc.spawn(cc.jumpBy(.6,i,-60,s,2),cc.scaleTo(.1,1,1)),cc.callFunc(this.onJumpTweenFinish,this),cc.sequence(cc.delayTime(.5),cc.jumpBy(.5,0,0,20,2)).repeat(1e7)),t.jumpActionCache.push(n)}return this.getActionFromCache(e)}return n}},t.prototype.putActionToCache=function(e,n){"jump"==e&&(i.default.finishAction(n),t.jumpActionCache.push(n))},t.prototype.jump=function(e){return this.state==o.IDLE&&(this.jumpAction&&this.recycleAction(),this.resNode.opacity=255,this.setPosition(e),this.jumpAction=this.getActionFromCache("jump"),this.resNode.runAction(this.jumpAction),this.state=o.JUMP,!0)},t.prototype.onJumpTweenFinish=function(){this.state=o.STAY},t.prototype.recycleAction=function(){this.jumpAction&&(this.resNode.stopAllActions(),this.putActionToCache("jump",this.jumpAction),this.jumpAction=null)},t.prototype.fly=function(e,t){if(this.state==o.JUMP||this.state==o.STAY){this.recycleAction(),this.state==o.JUMP&&(this.resNode.scale=1);var n=this.resNode.position,a=r.default.Random(150,260)*(2*r.default.Random(0,1)-1),i=[n,new cc.Vec2(n.x+a,n.y+(e.y-n.y)*r.default.Random(3,6)*.1),e],s=cc.sequence(cc.bezierTo(.6,i),cc.fadeOut(.1),cc.callFunc(this.onMoveTweenFinish,this));return this.resNode.runAction(s),this.state=o.FLY,this.coinCount=t,!0}return!1},t.prototype.onMoveTweenFinish=function(){this.state=o.IDLE,s.default.poolManager.put(this);var e=u.default.getDoubleOutputLeftTime()>0?2:1;l.default.addItem(c.ITEM_ID.COIN,this.coinCount*e),s.default.sendMsg(c.MSG.PLAY_COIN_ACTION)},t.prototype.reuse=function(){this.show(),this.isLoaded&&(this.resNode.scale=0,this.resNode.opacity=255)},t.prototype.unuse=function(){this.isLoaded&&(this.resNode.stopAllActions(),this.recycleAction()),this.context=null,this.removeFromParent(),this.hide(),this.coinCount=0,this.state=o.IDLE},t.prototype.cleanup=function(){this.dispose()},t.jumpActionCache=[],t}(a.default);n.default=d,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../manager/mgrItem":"mgrItem","../ui/ViewBase":"ViewBase","../utils/Mathf":"Mathf","../utils/UiHelper":"UiHelper","./mgrGame":"mgrGame"}],Main:[function(e,t,n){"use strict";cc._RF.push(t,"2f2ceGVnYlCX5er4GosfEQ4","Main"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./manager/mgrLoader"),a=e("./debug/DebugKeyDown"),i=e("./_G"),r=e("./manager/mgrScene"),s=e("./ui/SceneMain"),l=cc._decorator,c=l.ccclass,u=l.requireComponent,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){cc.log("------------------------ main onLoad ------------------------"),cc.log(""),cc.game.addPersistRootNode(this.node),this.initKeyEvent()},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN)},t.prototype.initKeyEvent=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){a.default.onKeyDown(e.keyCode)})},t.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return console.log("canvasSize: ",i.default.canvasWidth,i.default.canvasHeight),[4,o.default.onload()];case 1:return e.sent(),console.log("------------------------ main start ------------------------"),r.default.runScene(s.default,!0),console.log("--- sys ---"),console.log("CC_BUILD:",!0),console.log("CC_DEBUG:",!1),console.log("CC_DEV:",!1),console.log("CC_EDITOR:",!1),console.log("CC_JSB:",!1),console.log("CC_PREVIEW:",!1),console.log("CC_TEST:",!1),console.log("CC_QQPLAY:",!1),console.log("CC_WECHATGAME:",!1),console.log("cc.sys.os:",cc.sys.os),console.log("isBrowser:",cc.sys.isBrowser),console.log("isMobile:",cc.sys.isMobile),console.log("isNative:",cc.sys.isNative),console.log("--- sys ---"),[2]}})})},t=__decorate([c,u(cc.Canvas)],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./_G":"_G","./debug/DebugKeyDown":"DebugKeyDown","./manager/mgrLoader":"mgrLoader","./manager/mgrScene":"mgrScene","./ui/SceneMain":"SceneMain"}],Mathf:[function(e,t,n){"use strict";cc._RF.push(t,"7eded0OfZdNpaKCLzW4RKyH","Mathf"),Object.defineProperty(n,"__esModule",{value:!0});var o=Math.log(10),a=function(){function e(){}return e.Log=function(e,t){return null==t?Math.log(e)/o:Math.log(e)/Math.log(t)},e.Random=function(e,t){return null==e&&null==t?Math.random():null==t?Math.floor(Math.random()*e+1):Math.floor(Math.random()*(t-e+1)+e)},e.Clamp01=function(e){return e<0?0:e>1?1:e},e.Clamp=function(e,t,n){return e<t?t:e>n?n:e},e.Sign=function(e){return e>=0?1:-1},e.Equals=function(e,t){return Math.abs(e-t)<this.EPSILON},e.Lerp=function(e,t,n){return e+(t-e)*this.Clamp01(n)},e.InverseLerp=function(e,t,n){return e!=t?this.Clamp01((n-e)/(t-e)):0},e.LerpFromInverseLerp=function(e,t,n,o,a){return this.Lerp(e,t,this.InverseLerp(n,o,a))},e.Round=function(e,t){t=t||0;var n=this.roundPower10Double[t];return e*=n,Math.round(e)/n},e.Loop=function(e,t,n){return null==n&&(n=t,t=0),e<t?t:t+(e-t)%(n-t)},e.PingPong=function(e,t,n){if(null==n&&(n=t,t=0),e<t)return t;var o=n-t,a=e-t,i=a%o;return Math.floor(a/o)%2==0?i+t:n-i},e.nextGaussian=function(e,t){return e+this.uniform2NormalDistribution()*t},e.uniform2NormalDistribution=function(){for(var e=0,t=0;t<12;t++)e+=Math.random();return e-6},e.makeCircleRandom=function(t){for(var n=0,o=0;o<t.length;o++)n+=t[o];if(n<=0)return-1;var a=e.Random(n);for(o=0;o<t.length;o++){if(a<=t[o])return o;a-=t[o]}return-1},e.roundPower10Double=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15],e.PI=3.14159274,e.Deg2Rad=.0174532924,e.Rad2Deg=57.29578,e.EPSILON=1e-6,e}();n.default=a,cc._RF.pop()},{}],MsgHandler:[function(e,t,n){"use strict";cc._RF.push(t,"cd995GGHtVAgZWFH2w0/mZ4","MsgHandler"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){this.eventTarget=e||cc.game,this.registeredListeners={},this.startedListeners={},this.bStarted=!1}return e.prototype.registerListeners=function(e){var t=function(t){var o=e[t];null!=n.registeredListeners[t]&&cc.log("[\u8b66\u544a] MsgHandler.registerListeners msg\u91cd\u590d\u6ce8\u518c\uff01 msgName="+t);n.registeredListeners[t]=function(e){try{o(e)}catch(e){cc.error("MsgHandler.listener has error!",e)}}},n=this;for(var o in e)t(o);this.bStarted&&this.startProcMsg()},e.prototype.startProcMsg=function(){for(var e in this.bStarted=!0,this.registeredListeners)if(!this.startedListeners[e]){var t=this.registeredListeners[e];this.eventTarget.on(e,t,this),this.startedListeners[e]=t}},e.prototype.stopProcMsg=function(){for(var e in this.startedListeners){var t=this.startedListeners[e];this.eventTarget.off(e,t,this)}this.bStarted=!1,this.startedListeners={}},e.prototype.sendMsg=function(e,t){try{this.eventTarget.emit(e,t)}catch(e){cc.error("MsgHandler.sendMsg has exception",e)}},e}();n.default=o,cc._RF.pop()},{}],NumberEffect:[function(e,t,n){"use strict";cc._RF.push(t,"58282h4ANRJc7muBc7jX+8P","NumberEffect"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ui/ViewBase"),a=e("./mgrGame"),i=e("../utils/UiHelper"),r=e("../_G"),s=e("../manager/mgrPanel"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/game/EffectNumber",t.label=null,t.action=null,t}return __extends(t,e),t.prototype.onCreateComplete=function(){this.label=this.getChildComponent("View",cc.Label),this.action=cc.sequence(cc.spawn(cc.moveBy(2,0,88).easing(cc.easeOut(1.5)),cc.fadeTo(.2,255)),cc.delayTime(.2),cc.fadeTo(.2,0),cc.callFunc(this.onActionFinish,this)),this.setParent(s.default.getLayerNode(s.PANEL_LAYER.TIP))},t.prototype.onActionFinish=function(){r.default.poolManager.put(this)},t.prototype.play=function(e,t){this.setPosition(t),this.label.string="+"+a.default.formatBigNumber(e),this.resNode.runAction(this.action)},t.prototype.reuse=function(){},t.prototype.unuse=function(){i.default.finishAction(this.action)},t.prototype.cleanup=function(){},t}(o.default);n.default=l,cc._RF.pop()},{"../_G":"_G","../manager/mgrPanel":"mgrPanel","../ui/ViewBase":"ViewBase","../utils/UiHelper":"UiHelper","./mgrGame":"mgrGame"}],PanelAch:[function(e,t,n){"use strict";cc._RF.push(t,"48005Hlo41LYIHO2IgJyFT4","PanelAch"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../manager/mgrQuest"),i=e("../extensions/SpriteSwitcher"),r=e("../utils/UiHelper"),s=e("../manager/mgrGoal"),l=e("../utils/Mathf"),c=e("../game/mgrGame"),u=e("../manager/mgrAlert"),d=e("../manager/mgrPanel"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelStyle=d.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelAch",t.achItem=null,t.btnClose=null,t._exportNodeInfo=[{fieldName:"achItem",filedType:"cc.Sprite",fieldPath:"ScrollBg/ScrollView/view/content/cc_achItem"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"ScrollBg/cc_btnClose"}],t.questGroups=[],t.questDbs=null,t}return __extends(t,e),t.prototype.buildUi=function(){this.questDbs=a.default.getSortGroupAndOrder(a.QUEST_TYPE.ACHIEVEMENT),this.questDbs.sort(function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(a.default.isCurCommitable(o.id))return-1}return 0}),this.initItem(this.achItem.node);for(var e=1;e<this.questDbs.length;e++){var t=cc.instantiate(this.achItem.node);t.setParent(this.achItem.node.parent),this.initItem(t)}},t.prototype.initItem=function(e){var t=this,n={level:r.default.getChildComponent(e,"level",i.default),name:r.default.getChildComponent(e,"name",cc.Label),desc:r.default.getChildComponent(e,"desc",cc.Label),bar:r.default.getChildComponent(e,"barBg/bar",cc.Sprite),barLabel:r.default.getChildComponent(e,"barBg/barLabel",cc.Label),tip:e.getChildByName("tip"),reward:r.default.getChildComponent(e,"btn/Label",cc.Label),btn:e.getChildByName("btn")};n.barLabel.string="";var o=this.questGroups.length;r.default.addClick(n.btn,function(){t.onClickItem(o)}),this.questGroups.push(n),this.refreshItem(o)},t.prototype.refreshItem=function(e){for(var t=this.questDbs[e],n=null,o=0;o<t.length&&(n=t[o],a.default.isPassed(n.id));o++);var i=this.questGroups[e];if(i.questId=n.id,i.level.switchSprite(n.order),i.name.string=n.name,i.desc.string=n.desc,i.reward.string=c.default.formatBigNumber(n.firstReward[1]),a.default.isPassed(n.id))i.bar.fillRange=1,i.btn.active=!1,i.tip.active=!1;else if(a.default.isCurCommitable(n.id))i.bar.fillRange=1,i.btn.getComponent(cc.Button).interactable=!0;else{var r=a.default.getValue(n.id),u=s.default.getDbValue(n.goals[0]),d=l.default.Clamp01(r/u);i.bar.fillRange=d,i.btn.getComponent(cc.Button).interactable=!1}},t.prototype.onClickItem=function(e){var t=this.questGroups[e],n=a.default.commit(t.questId);n?(u.default.alertAchReward(t.questId,n),this.refreshItem(e)):u.default.alertText("\u7ee7\u7eed\u52aa\u529b\u5427")},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=f,cc._RF.pop()},{"../extensions/SpriteSwitcher":"SpriteSwitcher","../game/mgrGame":"mgrGame","../manager/mgrAlert":"mgrAlert","../manager/mgrGoal":"mgrGoal","../manager/mgrPanel":"mgrPanel","../manager/mgrQuest":"mgrQuest","../utils/Mathf":"Mathf","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelBase:[function(e,t,n){"use strict";cc._RF.push(t,"00d0cgAAMFLcLNcs045aOdN","PanelBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ViewBase"),a=e("../manager/mgrPanel"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelLayer=a.PANEL_LAYER.DIALOG,t.panelStyle=a.PANEL_STYLE.DIALOG,t}return __extends(t,e),t.prototype.onCreateComplete=function(){this.resNode.getComponent(cc.BlockInputEvents)||this.resNode.addComponent(cc.BlockInputEvents),a.default.addPanel(this),this.buildUi()},t.prototype.onFocus=function(e){},t.prototype.close=function(){this.isLoaded?a.default.closePanel(this):this.dispose()},t}(o.default);n.default=i,cc._RF.pop()},{"../manager/mgrPanel":"mgrPanel","./ViewBase":"ViewBase"}],PanelCoinNotEnough:[function(e,t,n){"use strict";cc._RF.push(t,"b435fQ2Rr5MNrsMCujIyk1V","PanelCoinNotEnough"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/mgrGame"),i=e("../common/Const"),r=e("../manager/mgrAdv"),s=e("../manager/mgrAlert"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelCoinNotEnough",t.descLabel=null,t.titleLabel=null,t.btnClose=null,t.btnAdv=null,t.btnLabel=null,t.btnIcon=null,t._exportNodeInfo=[{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/cc_descLabel"},{fieldName:"titleLabel",filedType:"cc.Label",fieldPath:"Bg/cc_titleLabel"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"},{fieldName:"btnAdv",filedType:"cc.Button",fieldPath:"Bg/cc_btnAdv"},{fieldName:"btnLabel",filedType:"cc.Label",fieldPath:"Bg/cc_btnAdv/cc_btnLabel"},{fieldName:"btnIcon",filedType:"cc.Sprite",fieldPath:"Bg/cc_btnAdv/cc_btnIcon"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.descLabel.string="+"+a.default.formatBigNumber(this.context.count)+"\u91d1\u5e01",this.registerMsg(((e={})[i.MSG.ADV_SHOW_SUC]=this.onMsgAdvShowSuc.bind(this),e)),this.startProcMsg(),r.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this),r.default.closeAdv("dialog_banner")},t.prototype.onMsgAdvShowSuc=function(e){"coin_get"==e.advName&&this.onGetReward()},t.prototype.onGetReward=function(){this.close(),s.default.alertAndGetItem({itemId:i.ITEM_ID.COIN,count:this.context.count})},t.prototype.on_click_btnAdv=function(){r.default.dispatchAdv("coin_get",!0)},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=l,cc._RF.pop()},{"../common/Const":"Const","../game/mgrGame":"mgrGame","../manager/mgrAdv":"mgrAdv","../manager/mgrAlert":"mgrAlert","./PanelBase":"PanelBase"}],PanelDebug:[function(e,t,n){"use strict";cc._RF.push(t,"fda6dNhQXVI7IP1VObqG19b","PanelDebug"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../manager/mgrAlert"),i=e("../manager/mgrPanel"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelLayer=i.PANEL_LAYER.TIP,t.prefabName="prefab/ui/PanelDebug",t.textLabel=null,t.btnClose=null,t.btn1=null,t.btn2=null,t._exportNodeInfo=[{fieldName:"textLabel",filedType:"cc.Label",fieldPath:"pnl/cc_textLabel"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"cc_btnClose"},{fieldName:"btn1",filedType:"cc.Button",fieldPath:"btnGrid/cc_btn1"},{fieldName:"btn2",filedType:"cc.Button",fieldPath:"btnGrid/cc_btn2"}],t}return __extends(t,e),t.prototype.buildUi=function(){},t.prototype.on_click_btnClose=function(){this.close()},t.prototype.on_click_btn1=function(){a.default.alertInput("\u8f93\u5165\u65f6\u95f4\u500d\u7387",function(e){var t=parseInt(e);isNaN(t)&&a.default.alertText("\u975e\u6cd5\u6570\u636e")})},t}(o.default);n.default=r,cc._RF.pop()},{"../manager/mgrAlert":"mgrAlert","../manager/mgrPanel":"mgrPanel","./PanelBase":"PanelBase"}],PanelDialog:[function(e,t,n){"use strict";cc._RF.push(t,"04043H/KxZLp5w1PTjX8A6a","PanelDialog"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../manager/mgrPanel"),i=e("../manager/mgrAdv"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelLayer=a.PANEL_LAYER.TOP,t.prefabName="prefab/ui/PanelDialog",t.titleLabel=null,t.descLabel=null,t.btnNo=null,t.btnYes=null,t._exportNodeInfo=[{fieldName:"titleLabel",filedType:"cc.Label",fieldPath:"Bg/cc_titleLabel"},{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/cc_descLabel"},{fieldName:"btnNo",filedType:"cc.Button",fieldPath:"Bg/cc_btnNo"},{fieldName:"btnYes",filedType:"cc.Button",fieldPath:"Bg/cc_btnYes"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e=this.context,t=e.title||"\u63d0\u793a",n=e.desc||"None";this.titleLabel.string=t,this.descLabel.string=n,e.cancel||(this.btnNo.node.active=!1),i.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){e.prototype.dispose.call(this),i.default.closeAdv("dialog_banner")},t.prototype.on_click_btnYes=function(){this.context.confirm&&this.context.confirm(),this.close()},t.prototype.on_click_btnNo=function(e){this.context.cancel&&this.context.cancel(),this.close()},t}(o.default);n.default=r,cc._RF.pop()},{"../manager/mgrAdv":"mgrAdv","../manager/mgrPanel":"mgrPanel","./PanelBase":"PanelBase"}],PanelFaDian:[function(e,t,n){"use strict";cc._RF.push(t,"92cd1Om7PpIMq45eyoIB905","PanelFaDian"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/mgrGame"),i=e("../utils/UiHelper"),r=e("../generate/db"),s=e("../common/Const"),l=e("../_G"),c=e("../game/CharView"),u=e("../manager/mgrPanel"),d=e("../manager/mgrSdk"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelStyle=u.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelFaDian",t.roleItem=null,t.headSwitcher=null,t.btnShare=null,t.nameLabel=null,t.nameText=null,t.desc1Label=null,t.desc2Label=null,t.btnBack=null,t._exportNodeInfo=[{fieldName:"roleItem",filedType:"cc.Button",fieldPath:"ScrollBg/New ScrollView/view/content/cc_roleItem"},{fieldName:"headSwitcher",filedType:"SpriteSwitcher",fieldPath:"cc_headSwitcher"},{fieldName:"btnShare",filedType:"cc.Button",fieldPath:"cc_btnShare"},{fieldName:"nameLabel",filedType:"cc.Label",fieldPath:"infoBg/cc_nameLabel"},{fieldName:"nameText",filedType:"cc.RichText",fieldPath:"infoBg/cc_nameText"},{fieldName:"desc1Label",filedType:"cc.Label",fieldPath:"infoBg/cc_desc1Label"},{fieldName:"desc2Label",filedType:"cc.Label",fieldPath:"infoBg/cc_desc2Label"},{fieldName:"btnBack",filedType:"cc.Button",fieldPath:"cc_btnBack"}],t.views=[],t}return __extends(t,e),t.prototype.buildUi=function(){for(var e=this.roleItem.node,t=[e],n=1;n<a.default.girl_level_max;n++){(o=cc.instantiate(e)).setParent(e.parent),t.push(o)}for(n=0;n<t.length;n++){var o=t[n];this.initItem(o,n+1)}d.default.shareEnabled||(this.btnShare.node.active=!1),this.refreshDesc(1)},t.prototype.dispose=function(){for(var t=0;t<this.views.length;t++){var n=this.views[t];n.isLoaded&&(n.viewNode.color=cc.Color.WHITE,n.viewNode.opacity=255),l.default.poolManager.put(n)}this.views=null,e.prototype.dispose.call(this)},t.prototype.initItem=function(e,t){var n=this;i.default.addClick(e,function(){n.onRoleClick(t)});var o=r.default.get_up_db(s.UpId.girl,t),u=l.default.poolManager.get(c.default,o.view);u.setCreateCallback(function(){n.isDisposed||(u.setParent(e.getChildByName("view")),t>a.default.getCurMaxGirlLevel()?(u.viewNode.color=cc.Color.BLACK.fromHEX("#141414"),u.viewNode.opacity=212,u.play("l1")):u.play("l2"))}),u.create(),this.views.push(u)},t.prototype.refreshDesc=function(e){if(e>a.default.getCurMaxGirlLevel())this.headSwitcher.switchSprite(-1),this.nameText.string="",this.desc1Label.string="",this.desc2Label.string="";else{var t=r.default.get_up_db(s.UpId.girl,e);this.headSwitcher.switchSprite(parseInt(t.headIndex)),this.nameText.string="<color=#FF4DED><b><outline color=white width=1>"+t.name+"</outline></b></c>",this.desc1Label.string=t.desc1,this.desc2Label.string=t.desc}},t.prototype.onRoleClick=function(e){this.refreshDesc(e)},t.prototype.on_click_btnBack=function(){this.close()},t.prototype.on_click_btnShare=function(){d.default.share()},t}(o.default);n.default=f,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../game/CharView":"CharView","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrPanel":"mgrPanel","../manager/mgrSdk":"mgrSdk","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelGarden:[function(e,t,n){"use strict";cc._RF.push(t,"d9d16oOatVAy56xfRKu1XcP","PanelGarden"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/FlowerItem"),i=e("../Config"),r=e("../manager/mgrItem"),s=e("../game/mgrGame"),l=e("../common/Const"),c=e("../generate/db"),u=e("../manager/mgrPanel"),d=e("./PanelTuJian"),f=e("../manager/mgrGoal"),p=e("./PanelAch"),h=e("./PanelRank"),g=e("./PanelSign"),m=e("../manager/mgrAudio"),_=e("./PanelWater"),v=e("../manager/mgrOperations"),y=e("./PanelShare"),b=e("./PanelLottery"),S=e("../utils/Timer"),C=e("../_G"),T=e("./PanelOutputX2"),I=e("../utils/Tools"),w=e("../extensions/RedPoint"),k=e("../manager/mgrQuest"),P=e("../manager/mgrSdk"),L=e("../manager/mgrAdv"),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelLayer=u.PANEL_LAYER.UI,t.panelStyle=u.PANEL_STYLE.FULL,t.prefabName="prefab/ui/PanelGarden",t.touchNode=null,t.gridNode=null,t.l1=null,t.iconMoveToNode=null,t.coinCountLabel=null,t.coinOutputLabel=null,t.topHideNode=null,t.energyCountLabel=null,t.maxLevelLabel=null,t.btnSign=null,t.btnRank=null,t.btnFriends=null,t.btnLottery=null,t.anchorBottom=null,t.btnGirl=null,t.btnTuJian=null,t.btnWater=null,t.waterLeftCountLabel=null,t.waterPnlNode=null,t.btnAch=null,t.btnDouble=null,t.doubleTimeLabel=null,t.moveEffectNode=null,t.waterEffect=null,t._exportNodeInfo=[{fieldName:"touchNode",filedType:"cc.Node",fieldPath:"cc_touchNode"},{fieldName:"gridNode",filedType:"cc.Node",fieldPath:"cc_gridNode"},{fieldName:"l1",filedType:"cc.Node",fieldPath:"cc_gridNode/cc_l1"},{fieldName:"iconMoveToNode",filedType:"cc.Node",fieldPath:"anchorTop/Coin/cc_iconMoveToNode"},{fieldName:"coinCountLabel",filedType:"cc.Label",fieldPath:"anchorTop/Coin/cc_coinCountLabel"},{fieldName:"coinOutputLabel",filedType:"cc.Label",fieldPath:"anchorTop/Coin/cc_coinOutputLabel"},{fieldName:"topHideNode",filedType:"cc.Node",fieldPath:"anchorTop/cc_topHideNode"},{fieldName:"energyCountLabel",filedType:"cc.Label",fieldPath:"anchorTop/cc_topHideNode/Energy/cc_energyCountLabel"},{fieldName:"maxLevelLabel",filedType:"cc.Label",fieldPath:"anchorTop/cc_topHideNode/Level/cc_maxLevelLabel"},{fieldName:"btnSign",filedType:"cc.Button",fieldPath:"anchorTop/cc_topHideNode/BtnGrid/cc_btnSign"},{fieldName:"btnRank",filedType:"cc.Button",fieldPath:"anchorTop/cc_topHideNode/BtnGrid/cc_btnRank"},{fieldName:"btnFriends",filedType:"cc.Button",fieldPath:"anchorTop/cc_topHideNode/BtnGrid/cc_btnFriends"},{fieldName:"btnLottery",filedType:"cc.Button",fieldPath:"anchorTop/cc_topHideNode/BtnGrid/cc_btnLottery"},{fieldName:"anchorBottom",filedType:"cc.Node",fieldPath:"cc_anchorBottom"},{fieldName:"btnGirl",filedType:"cc.Button",fieldPath:"cc_anchorBottom/Btns/cc_btnGirl"},{fieldName:"btnTuJian",filedType:"cc.Button",fieldPath:"cc_anchorBottom/Btns/cc_btnTuJian"},{fieldName:"btnWater",filedType:"cc.Button",fieldPath:"cc_anchorBottom/Btns/cc_btnWater"},{fieldName:"waterLeftCountLabel",filedType:"cc.Label",fieldPath:"cc_anchorBottom/Btns/cc_btnWater/cc_waterLeftCountLabel"},{fieldName:"waterPnlNode",filedType:"cc.Sprite",fieldPath:"cc_anchorBottom/Btns/cc_btnWater/cc_waterPnlNode"},{fieldName:"btnAch",filedType:"cc.Button",fieldPath:"cc_anchorBottom/Btns/cc_btnAch"},{fieldName:"btnDouble",filedType:"cc.Button",fieldPath:"cc_anchorBottom/Btns/cc_btnDouble"},{fieldName:"doubleTimeLabel",filedType:"cc.Label",fieldPath:"cc_anchorBottom/Btns/cc_btnDouble/cc_doubleTimeLabel"},{fieldName:"moveEffectNode",filedType:"cc.Node",fieldPath:"cc_moveEffectNode"},{fieldName:"waterEffect",filedType:"cc.Node",fieldPath:"cc_waterEffect"}],t.flowerItems=[],t.leftWaterTime=0,t.waterTipLabel=null,t.coinAction=null,t.redPoints=[],t.lastLeftDoubleTime=0,t}return __extends(t,e),t.prototype.buildUi=function(){for(var e,n=this,o=[this.l1],r=1;r<i.default.soil_count;r++){var s=cc.instantiate(this.l1);s.name="l"+(r+1),s.setParent(this.l1.parent),o.push(s)}for(r=0;r<o.length;r++){var c=o[r],u=new a.default(c,r);this.flowerItems.push(u)}var d=this.gridNode.getComponent(cc.Layout);d.updateLayout(),d.enabled=!1,this.waterTipLabel=this.waterEffect.getChildByName("tip").getComponent(cc.Label),S.default.callLater(.5,function(){t.coinDestPosition=n.resNode.convertToNodeSpaceAR(n.iconMoveToNode.convertToWorldSpaceAR(cc.Vec2.ZERO))}),this.touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.registerMsg(((e={})[l.MSG.ITEM_CHANGE]=this.onMsgItemChange.bind(this),e[l.MSG.FLOWER_CHANGE]=this.onMsgFlowerChange.bind(this),e[l.MSG.FLOWER_GAINS_COIN]=this.onMsgFlowerGainsCoin.bind(this),e[l.MSG.START_WATER_TIME]=this.onMsgStartWaterTime.bind(this),e[l.MSG.PLAY_COIN_ACTION]=this.onMsgPlayCoinAction.bind(this),e[l.MSG.RECHECK_ADV]=this.onMsgRecheckAdv.bind(this),e)),this.startProcMsg(),this.refreshGameInfo()},t.prototype.dispose=function(){this.stopProcMsg(),C.default.sendMsg(l.MSG.END_WATER_TIME);for(var t=0;t<this.flowerItems.length;t++)this.flowerItems[t].dispose();for(t=0;t<this.redPoints.length;t++)this.redPoints[t].dispose();e.prototype.dispose.call(this)},t.prototype.onTouchStart=function(e){e.stopPropagation();var t=e.getLocation();this.tryPickup(t),this.moveEffectNode.position=this.resNode.convertToNodeSpaceAR(t),this.moveEffectNode.active=!0},t.prototype.onTouchMove=function(e){e.stopPropagation();var t=e.getLocation();this.moveEffectNode.position=this.resNode.convertToNodeSpaceAR(t),this.tryPickup(t)},t.prototype.onTouchEnd=function(e){e.stopPropagation(),this.moveEffectNode.active=!1},t.prototype.onTouchCancel=function(e){e.stopPropagation(),this.moveEffectNode.active=!1},t.prototype.update=function(e){for(var t=0;t<this.flowerItems.length;t++)this.flowerItems[t].update(e);this.leftWaterTime>0&&(this.leftWaterTime-=e,this.waterTipLabel.string="\u6ed1\u52a8\u5feb\u901f\u6536\u53d62\u500d\u91d1\u5e01\n"+Math.floor(this.leftWaterTime<0?0:this.leftWaterTime)+"\u79d2",this.leftWaterTime<=0&&this.setWaterTime(!1)),this.refreshDoubleOutputTime()},t.prototype.onMsgItemChange=function(e){e.itemId==l.ITEM_ID.COIN?(this.coinCountLabel.string=s.default.formatBigNumber(e.curCount),this.refreshLvupBtnState()):e.itemId==l.ITEM_ID.ENERGY?(this.energyCountLabel.string=s.default.formatBigNumber(e.curCount),this.refreshLvupBtnState()):e.itemId==l.ITEM_ID.WATER&&this.refreshWaterState()},t.prototype.onMsgFlowerChange=function(e){this.flowerItems[e].refreshFlower(),this.refreshOutputInfo()},t.prototype.onMsgFlowerGainsCoin=function(e){this.flowerItems[e].refreshBar()},t.prototype.onMsgStartWaterTime=function(){m.default.playMusic("water"),this.setWaterTime(!0)},t.prototype.onMsgPlayCoinAction=function(){null==this.coinAction&&(this.coinAction=cc.sequence(cc.scaleTo(.1,1.2).easing(cc.easeOut(1.5)),cc.scaleTo(.1,1).easing(cc.easeOut(1.5))),this.coinCountLabel.node.runAction(this.coinAction)),this.coinAction.isDone()&&this.coinCountLabel.node.runAction(this.coinAction)},t.prototype.onMsgRecheckAdv=function(){!L.default.checkActive("lottery")&&v.default.getCircleLotteryFreeCount()<=0?this.btnLottery.node.active=!1:this.btnLottery.node.active=!0,L.default.checkActive("output_x2")?this.btnDouble.node.active=!0:this.btnDouble.node.active=!1},t.prototype.refreshGameInfo=function(){this.coinCountLabel.string=s.default.formatBigNumber(r.default.getItemCount(l.ITEM_ID.COIN)),this.energyCountLabel.string=s.default.formatBigNumber(r.default.getItemCount(l.ITEM_ID.ENERGY)),this.refreshOutputInfo(),this.refreshMaxLevel(),this.refreshWaterState(),this.refreshDoubleOutputTime(),this.onMsgRecheckAdv(),this.doubleTimeLabel.string="";for(var e=s.default.getFlowers(),t=0;t<e.length;t++)this.flowerItems[t].init();this.redPoints.push(new w.default(this.btnAch.node.getChildByName("redPoint"),function(){return k.default.hasCommitaleQuest(k.QUEST_TYPE.ACHIEVEMENT)},l.MSG.ACH_STATE_CHANGE)),this.redPoints.push(new w.default(this.btnGirl.node.getChildByName("redPoint"),function(){return s.default.hasMergeGirl()})),P.default.shareEnabled||(this.btnFriends.node.active=!1),this.btnRank.node.active=P.default.channelRankEnabled},t.prototype.refreshOutputInfo=function(){var e=1;s.default.getDoubleOutputLeftTime()>0&&(e=2),this.coinOutputLabel.string=s.default.formatBigNumber(s.default.getAllFlowerOutput()*e)},t.prototype.refreshMaxLevel=function(){var e=s.default.getCurMaxGirlLevel(),t=c.default.get_up_db(l.UpId.girl,e);this.maxLevelLabel.string="Lv."+e+" "+t.name},t.prototype.refreshWaterState=function(){var e=v.default.getWaterCount();e>0?(this.waterLeftCountLabel.string=e.toString(),this.waterPnlNode.node.active=!1):(this.waterLeftCountLabel.string="",this.waterPnlNode.node.active=L.default.checkActive("water"))},t.prototype.refreshLvupBtnState=function(){for(var e=0;e<this.flowerItems.length;e++){this.flowerItems[e].refreshBtnState()}},t.prototype.refreshDoubleOutputTime=function(){var e=s.default.getDoubleOutputLeftTime();this.lastLeftDoubleTime>0?e<=0?(this.refreshOutputInfo(),this.doubleTimeLabel.string=""):this.doubleTimeLabel.string=I.default.formatTime(e):e>0&&this.refreshOutputInfo(),this.lastLeftDoubleTime=e},t.prototype.isWaterTime=function(){return this.leftWaterTime>0},t.prototype.tryPickup=function(e){for(var t=0;t<this.flowerItems.length;t++){this.flowerItems[t].tryPickup(e)}},t.prototype.setWaterTime=function(e){for(var t=0;t<this.flowerItems.length;t++){this.flowerItems[t].setWaterTime(e)}e?(v.default.consumeWater()?(this.leftWaterTime=i.default.coin_drop_duration,f.default.commit(l.ACTION_ID.HAPPY_TIME)):cc.warn(" ----------\x3e \u6d47\u6c34\u5931\u8d25"),this.topHideNode.active=!1,this.anchorBottom.active=!1,this.waterEffect.active=!0):(C.default.sendMsg(l.MSG.END_WATER_TIME),m.default.playMusic("bgm"),this.topHideNode.active=!0,this.anchorBottom.active=!0,this.waterEffect.active=!1)},t.prototype.on_click_btnGirl=function(){this.close()},t.prototype.on_click_btnTuJian=function(){u.default.openPanel(d.default)},t.prototype.on_click_btnWater=function(){this.isWaterTime()||u.default.openPanel(_.default)},t.prototype.on_click_btnAch=function(){u.default.openPanel(p.default)},t.prototype.on_click_btnRank=function(){u.default.openPanel(h.default)},t.prototype.on_click_btnSign=function(){u.default.openPanel(g.default)},t.prototype.on_click_btnFriends=function(){u.default.openPanel(y.default)},t.prototype.on_click_btnLottery=function(){u.default.openPanel(b.default)},t.prototype.on_click_btnDouble=function(){u.default.openPanel(T.default)},t.coinDestPosition=null,t}(o.default);n.default=N,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../extensions/RedPoint":"RedPoint","../game/FlowerItem":"FlowerItem","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrAdv":"mgrAdv","../manager/mgrAudio":"mgrAudio","../manager/mgrGoal":"mgrGoal","../manager/mgrItem":"mgrItem","../manager/mgrOperations":"mgrOperations","../manager/mgrPanel":"mgrPanel","../manager/mgrQuest":"mgrQuest","../manager/mgrSdk":"mgrSdk","../utils/Timer":"Timer","../utils/Tools":"Tools","./PanelAch":"PanelAch","./PanelBase":"PanelBase","./PanelLottery":"PanelLottery","./PanelOutputX2":"PanelOutputX2","./PanelRank":"PanelRank","./PanelShare":"PanelShare","./PanelSign":"PanelSign","./PanelTuJian":"PanelTuJian","./PanelWater":"PanelWater"}],PanelGirlGift:[function(e,t,n){"use strict";cc._RF.push(t,"29bfe3HgW5ExbGfDslCGKVl","PanelGirlGift"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../generate/db"),i=e("../common/Const"),r=e("../_G"),s=e("../game/CharView"),l=e("../game/mgrGame"),c=e("../manager/mgrAdv"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelGirlGift",t.scrollNode=null,t.scrollSprite=null,t.scrollScprite2=null,t.viewNode=null,t.titleLabel=null,t.nameLabel=null,t.btnClose=null,t.bottomNode=null,t.btnLvup=null,t._exportNodeInfo=[{fieldName:"scrollNode",filedType:"cc.Node",fieldPath:"Bg/mask/cc_scrollNode"},{fieldName:"scrollSprite",filedType:"cc.Sprite",fieldPath:"Bg/mask/cc_scrollNode/cc_scrollSprite"},{fieldName:"scrollScprite2",filedType:"cc.Sprite",fieldPath:"Bg/mask/cc_scrollNode/cc_scrollSprite/cc_scrollScprite2"},{fieldName:"viewNode",filedType:"cc.Node",fieldPath:"Bg/mask/cc_scrollNode/cc_scrollSprite/cc_viewNode"},{fieldName:"titleLabel",filedType:"cc.Label",fieldPath:"Bg/cc_titleLabel"},{fieldName:"nameLabel",filedType:"cc.Label",fieldPath:"Bg/cc_nameLabel"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"},{fieldName:"bottomNode",filedType:"cc.Node",fieldPath:"Bg/cc_bottomNode"},{fieldName:"btnLvup",filedType:"cc.Button",fieldPath:"Bg/cc_bottomNode/cc_btnLvup"}],t.girlLevel=0,t.charView=null,t}return __extends(t,e),t.prototype.buildUi=function(){var e,t=this;if(this.girlLevel=l.default.getGirlLevel(this.context.pos),this.context.anim){this.btnClose.interactable=!1,this.bottomNode.active=!1;var n=cc.sequence(cc.moveBy(.2,0,-285).repeat(10),cc.spawn(cc.place(0,0),cc.moveBy(.2,0,-285).easing(cc.easeIn(1.5)),cc.callFunc(this.onViewShow,this)),cc.callFunc(this.onActionFinish,this));this.scrollNode.runAction(n),this.viewNode.active=!1}else this.viewNode.y=-119,this.scrollSprite.enabled=!1,this.onActionFinish();var o=a.default.get_up_db(i.UpId.girl,this.girlLevel),u=r.default.poolManager.get(s.default,o.view);this.charView=u,u.setCreateCallback(function(){u.setParent(t.viewNode)}),u.create(),c.default.checkActive("girl_lvup")||(this.bottomNode.active=!1),this.registerMsg(((e={})[i.MSG.ADV_SHOW_SUC]=this.onMsgAdvShowSuc.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg(),this.charView&&(r.default.poolManager.put(this.charView),this.charView=null),e.prototype.dispose.call(this)},t.prototype.onViewShow=function(){this.viewNode.active=!0,this.scrollScprite2.enabled=!1},t.prototype.onActionFinish=function(){this.btnClose.interactable=!0,this.bottomNode.active=c.default.checkActive("girl_lvup");var e=a.default.get_up_db(i.UpId.girl,this.girlLevel);this.nameLabel.string=e.name},t.prototype.onLvupSuc=function(){var e=this;this.btnClose.interactable=!0,this.scrollSprite.enabled=!1;var t=a.default.get_up_db(i.UpId.girl,this.girlLevel+1);r.default.poolManager.put(this.charView);var n=r.default.poolManager.get(s.default,t.view);this.charView=n,n.setCreateCallback(function(){n.setParent(e.viewNode),n.play("l1")}),n.create(),this.nameLabel.string=t.name},t.prototype.onMsgAdvShowSuc=function(e){"girl_lvup"==e.advName&&(l.default.lvupGirl(this.context.pos),this.onLvupSuc())},t.prototype.on_click_btnClose=function(){this.close(),r.default.sendMsg(i.MSG.PLAY_GIRL_FLY,{index:this.context.pos,from:this.viewNode.convertToWorldSpaceAR(cc.Vec2.ZERO)})},t.prototype.on_click_btnLvup=function(){this.bottomNode.active=!1,c.default.dispatchAdv("girl_lvup",!0)},t}(o.default);n.default=u,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../game/CharView":"CharView","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrAdv":"mgrAdv","./PanelBase":"PanelBase"}],PanelGirlReward:[function(e,t,n){"use strict";cc._RF.push(t,"df32fGXGlxKsbfhWFoeXIsl","PanelGirlReward"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../generate/db"),i=e("../common/Const"),r=e("../manager/mgrGuide"),s=e("../game/mgrGame"),l=e("../manager/mgrRes"),c=e("../manager/mgrSdk"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelGirlReward",t.headSwitcher=null,t.btnShare=null,t.nameText=null,t.desc1Label=null,t.desc2Label=null,t.btnClose=null,t._exportNodeInfo=[{fieldName:"headSwitcher",filedType:"SpriteSwitcher",fieldPath:"Bg/cc_headSwitcher"},{fieldName:"btnShare",filedType:"cc.Button",fieldPath:"Bg/cc_btnShare"},{fieldName:"nameText",filedType:"cc.RichText",fieldPath:"Bg/infoBg/cc_nameText"},{fieldName:"desc1Label",filedType:"cc.Label",fieldPath:"Bg/infoBg/cc_desc1Label"},{fieldName:"desc2Label",filedType:"cc.Label",fieldPath:"Bg/infoBg/cc_desc2Label"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e,t=a.default.get_up_db(i.UpId.girl,this.context);this.headSwitcher.switchSprite(this.context-1),this.nameText.string="<color=#FF4DED><b><outline color=white width=1>"+t.name+"</outline></b></c>",this.desc1Label.string=t.desc1,this.desc2Label.string=t.desc,c.default.shareEnabled||(this.btnShare.node.active=!1),this.registerMsg(((e={})[i.MSG.SHARE_SUC]=this.onMsgShareSuc.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg();var t=s.default.getCurMaxGirlLevel();r.default.dispatchGuide("gud_close_girl_"+t);var n=Math.min(t+1,s.default.girl_level_max);if(n>t){var o=[],c=a.default.get_up_db(i.UpId.girl,n);o.push(c.view),c=a.default.get_up_db(i.UpId.flower,n),o.push(c.view),l.default.preloadArr(o)}e.prototype.dispose.call(this)},t.prototype.onMsgShareSuc=function(e){this.close()},t.prototype.on_click_btnClose=function(){this.close()},t.prototype.on_click_btnShare=function(){c.default.share()},t}(o.default);n.default=u,cc._RF.pop()},{"../common/Const":"Const","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrGuide":"mgrGuide","../manager/mgrRes":"mgrRes","../manager/mgrSdk":"mgrSdk","./PanelBase":"PanelBase"}],PanelGuide:[function(e,t,n){"use strict";cc._RF.push(t,"508cbsoqjBExqNw+NKijnQr","PanelGuide"),Object.defineProperty(n,"__esModule",{value:!0});var o,a,i=e("./PanelBase"),r=e("../manager/mgrPanel"),s=e("../_G"),l=e("../utils/Mathf"),c=e("../utils/UiHelper"),u=e("../game/GuideScript"),d=e("../manager/mgrGuide"),f=e("../common/Const");(function(e){e.empty="empty",e.update="update",e.wait_time="wait_time",e.wait_click="wait_click",e.wait_complete="wait_complete"})(o||(o={})),function(e){e.all="all",e.exceptCenter="center",e.none="none"}(a||(a={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelLayer=r.PANEL_LAYER.TOP,t.panelStyle=r.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelGuide",t.maskNode=null,t.leftNode=null,t.rightNode=null,t.topNode=null,t.bottomNode=null,t.centerNode=null,t.fingerAnimNode=null,t.msgNode=null,t.msgLabel=null,t.blockNode=null,t._exportNodeInfo=[{fieldName:"maskNode",filedType:"cc.Node",fieldPath:"cc_maskNode"},{fieldName:"leftNode",filedType:"cc.Sprite",fieldPath:"cc_maskNode/cc_leftNode"},{fieldName:"rightNode",filedType:"cc.Sprite",fieldPath:"cc_maskNode/cc_rightNode"},{fieldName:"topNode",filedType:"cc.Sprite",fieldPath:"cc_maskNode/cc_topNode"},{fieldName:"bottomNode",filedType:"cc.Sprite",fieldPath:"cc_maskNode/cc_bottomNode"},{fieldName:"centerNode",filedType:"cc.Button",fieldPath:"cc_maskNode/cc_centerNode"},{fieldName:"fingerAnimNode",filedType:"TweenRotation",fieldPath:"cc_maskNode/cc_centerNode/cc_fingerAnimNode"},{fieldName:"msgNode",filedType:"TweenScale",fieldPath:"cc_maskNode/cc_msgNode"},{fieldName:"msgLabel",filedType:"cc.Label",fieldPath:"cc_maskNode/cc_msgNode/pnl/cc_msgLabel"},{fieldName:"blockNode",filedType:"cc.Node",fieldPath:"cc_blockNode"}],t.curStepIndex=0,t.curSteps=null,t.curState=o.empty,t.clickHandler=null,t.completeKey=null,t.curWaitTime=0,t.fingerAnimOffset=null,t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.curSteps=u.GuideScript[this.context],this.curStepIndex=0,c.default.addClick(this.centerNode.node,this.onCenterClick,this),this.fingerAnimOffset=this.fingerAnimNode.node.position,this.registerMsg(((e={})[f.MSG.GUD_COMPLETE_KEY]=this.onMsgCompleteKey.bind(this),e)),this.startProcMsg(),this.hideMsg(),this.curState=o.update,this.nextStep()},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this)},t.prototype.onMsgCompleteKey=function(e){this.curState==o.wait_complete&&e&&e==this.completeKey&&(this.completeKey=null,this.curState=o.update)},t.prototype.nextStep=function(){var e=this.curStepIndex++;(0,this.curSteps[e])(this),this.curStepIndex>=this.curSteps.length&&(this.isDisposed||(cc.error("guide index out of range"),this.close()))},t.prototype.update=function(e){switch(this.curState){case o.empty:break;case o.update:this.nextStep();break;case o.wait_time:this.curWaitTime-=e,this.curWaitTime<=0&&(this.curState=o.update);break;case o.wait_click:case o.wait_complete:}},t.prototype.onCenterClick=function(){if(this.curState==o.wait_click){if(this.clickHandler)try{this.clickHandler()}catch(e){cc.error("guide on click error:",e),this.clickHandler=null}this.curState=o.update}},t.prototype.closeGuide=function(e){d.default.finish(e),this.close()},t.prototype.moveTo=function(e,t,n){void 0===t&&(t=128),void 0===n&&(n=128);var o=this.resNode.convertToNodeSpaceAR(e),a=s.default.canvasWidth,i=s.default.canvasHeight;o.x=Math.floor(l.default.Clamp(o.x,.5*(t-a),.5*(a-t))),o.y=Math.floor(l.default.Clamp(o.y,.5*(n-i),.5*(i-n))),this.centerNode.node.setContentSize(t,n),this.centerNode.node.setPosition(o);var r=.5*a+o.x-.5*t;this.leftNode.node.setContentSize(r,i),this.leftNode.node.setPosition(o.x-.5*(r+t),0),r=a-r-t,this.rightNode.node.setContentSize(r,i),this.rightNode.node.setPosition(o.x+.5*(r+t),0);var c=.5*i-o.y-.5*n;this.topNode.node.setContentSize(t,c),this.topNode.node.setPosition(o.x,o.y+.5*(c+n)),c=i-c-n,this.bottomNode.node.setContentSize(t,c),this.bottomNode.node.setPosition(o.x,o.y-.5*(c+n))},t.prototype.showFingerClickAnim=function(){this.fingerAnimNode.node.setPosition(this.fingerAnimOffset),this.fingerAnimNode.node.stopAllActions(),this.fingerAnimNode.enabled=!0},t.prototype.showFingerMoveAnim=function(e){var t=cc.v2(-e.x,-e.y);e.addSelf(this.fingerAnimOffset),t.addSelf(this.fingerAnimOffset),this.fingerAnimNode.enabled=!1,this.fingerAnimNode.node.runAction(cc.sequence(cc.place(e),cc.fadeIn(.2),cc.moveTo(1,t),cc.fadeOut(.2)).repeat(1e3))},t.prototype.setMaskStyle=function(e){switch(e){case a.all:this.centerNode.enabled=!0,this.centerNode.getComponent(cc.Sprite).enabled=!0,this.leftNode.getComponent(cc.BlockInputEvents).enabled=!0,this.leftNode.enabled=!0,this.rightNode.getComponent(cc.BlockInputEvents).enabled=!0,this.rightNode.enabled=!0,this.topNode.getComponent(cc.BlockInputEvents).enabled=!0,this.topNode.enabled=!0,this.bottomNode.getComponent(cc.BlockInputEvents).enabled=!0,this.bottomNode.enabled=!0;break;case a.exceptCenter:this.centerNode.enabled=!1,this.centerNode.getComponent(cc.Sprite).enabled=!0,this.leftNode.getComponent(cc.BlockInputEvents).enabled=!0,this.leftNode.enabled=!0,this.rightNode.getComponent(cc.BlockInputEvents).enabled=!0,this.rightNode.enabled=!0,this.topNode.getComponent(cc.BlockInputEvents).enabled=!0,this.topNode.enabled=!0,this.bottomNode.getComponent(cc.BlockInputEvents).enabled=!0,this.bottomNode.enabled=!0;break;case a.none:this.centerNode.enabled=!1,this.centerNode.getComponent(cc.Sprite).enabled=!1,this.leftNode.getComponent(cc.BlockInputEvents).enabled=!1,this.leftNode.enabled=!1,this.rightNode.getComponent(cc.BlockInputEvents).enabled=!1,this.rightNode.enabled=!1,this.topNode.getComponent(cc.BlockInputEvents).enabled=!1,this.topNode.enabled=!1,this.bottomNode.getComponent(cc.BlockInputEvents).enabled=!1,this.bottomNode.enabled=!1}},t.prototype.setMaskVisible=function(e){this.maskNode.active=e},t.prototype.setBlockEnabled=function(e){this.blockNode.active=e},t.prototype.showMsg=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.msgNode.node.setPosition(t,n),this.msgNode.ResetToBeginning(),this.msgLabel.string=e,this.msgNode.node.active=!0,this.msgNode.PlayForward()},t.prototype.hideMsg=function(){this.msgNode.node.active=!1},t.prototype.wait=function(e){this.curWaitTime=e,this.curState=o.wait_time},t}(i.default);function h(e){var t=e.split("/");if(t&&t.length>0){var n=r.default.findViewByName(t[0]);if(n){var o=cc.find(e,r.default.getLayerNode(n.panelLayer));if(o)return o;cc.warn("showFingerTo \u627e\u4e0d\u5230ui:"+e)}else cc.warn("showFingerTo \u627e\u4e0d\u5230 panel:"+e)}else cc.warn("showFingerTo uiName\u9519\u8bef:"+e);return null}n.default=p,n.GUD={close:function(){return function(e){e.closeGuide(!1)}},closeAndSave:function(){return function(e){e.closeGuide(!0)}},click:function(e,t,n){return function(i){var r=h(e);if(r){i.setMaskStyle(a.all),i.showFingerClickAnim();var s=r.convertToWorldSpaceAR(cc.Vec2.ZERO);i.moveTo(s,t,n),i.clickHandler=function(){r.emit("click")},i.curState=o.wait_click}}},showFingerTo:function(e,t,n,i,r,s){return void 0===n&&(n=0),void 0===i&&(i=0),t||cc.error("showFingerTo error, completeKey empty."),function(l){var c=h(e);if(c){l.setMaskStyle(a.exceptCenter),l.showFingerClickAnim();var u=c.convertToWorldSpaceAR(cc.v2(n,i));l.moveTo(u,r,s),l.completeKey=t,l.curState=o.wait_complete}}},moveFingerBetween:function(e,t,n,i,r,s,l){return void 0===i&&(i=0),void 0===r&&(r=0),t||cc.error("showFingerTo error, completeKey empty."),function(c){var u=h(e);if(u){c.setMaskStyle(a.exceptCenter),c.showFingerMoveAnim(n);var d=u.convertToWorldSpaceAR(cc.v2(i,r));c.moveTo(d,s,l),c.completeKey=t,c.curState=o.wait_complete}}},showMsg:function(e,t,n){return function(o){o.showMsg(e,t,n)}},hideMsg:function(){return function(e){e.hideMsg()}},setMaskVisible:function(e){return function(t){t.setMaskVisible(e)}},wait:function(e){return function(t){t.wait(e)}},callFunc:function(e){return function(t){e&&e(t)}},setBlockEnabled:function(e){return function(t){t.setBlockEnabled(e)}}},cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../game/GuideScript":"GuideScript","../manager/mgrGuide":"mgrGuide","../manager/mgrPanel":"mgrPanel","../utils/Mathf":"Mathf","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelHuaLing:[function(e,t,n){"use strict";cc._RF.push(t,"5d8742JBLlOnYFgIE6mivtJ","PanelHuaLing"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/mgrGame"),i=e("../utils/UiHelper"),r=e("../generate/db"),s=e("../common/Const"),l=e("../manager/mgrPanel"),c=e("../game/CharView"),u=e("../_G"),d=e("../Config"),f=e("../manager/mgrOperations"),p=e("../utils/Tools"),h=e("../manager/mgrAlert"),g=e("../manager/mgrGuide"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelStyle=l.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelHuaLing",t.roleItem=null,t.btnClose=null,t.btnGet=null,t.btnGetLabel=null,t._exportNodeInfo=[{fieldName:"roleItem",filedType:"cc.Sprite",fieldPath:"ScrollBg/ScrollView/view/content/cc_roleItem"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"ScrollBg/cc_btnClose"},{fieldName:"btnGet",filedType:"cc.Button",fieldPath:"ScrollBg/cc_btnGet"},{fieldName:"btnGetLabel",filedType:"cc.Label",fieldPath:"ScrollBg/cc_btnGet/cc_btnGetLabel"}],t.itemPrices=[],t.views=[],t}return __extends(t,e),t.prototype.buildUi=function(){for(var e,t=this.roleItem.node,n=[t],o=1;o<a.default.girl_level_max-d.default.girl_buy_delta_level;o++){var i=cc.instantiate(t);i.setParent(t.parent),n.push(i)}for(o=0;o<n.length;o++){var r=n[o];this.initItem(r,o+1)}this.refreshTime(),this.registerMsg(((e={})[s.MSG.PLAY_GIRL_FLY]=this.onMsgPlayGirlFly.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg();for(var t=0;t<this.views.length;t++){var n=this.views[t];n.isLoaded&&(n.viewNode.color=cc.Color.WHITE,n.viewNode.opacity=255),u.default.poolManager.put(n)}this.views=null,e.prototype.dispose.call(this),g.default.dispatchGuide("gud_close_hualing")},t.prototype.onMsgPlayGirlFly=function(){this.close()},t.prototype.update=function(e){this.refreshTime()},t.prototype.initItem=function(e,t){var n=this,o=r.default.get_up_db(s.UpId.girl,t);i.default.getChildComponent(e,"name",cc.Label).string=o.name,i.default.getChildComponent(e,"level",cc.Label).string=t.toString();var l=i.default.getChildComponent(e,"btnBuy/Label",cc.Label);this.itemPrices.push(l);var d=t<=a.default.getCurMaxBuyGirlLevel();d?(l.string=a.default.formatBigNumber(a.default.getGirlPrice(t)),i.default.addChildClick(e,"btnBuy",function(){n.onClickItemBuy(t)})):(l.string="\u672a\u89e3\u9501",l.node.position=cc.Vec2.ZERO,cc.find("btnBuy/icon",e).active=!1,i.default.getChildComponent(e,"btnBuy",cc.Button).interactable=!1);var f=u.default.poolManager.get(c.default,o.view);f.setCreateCallback(function(){n.isDisposed||(f.setParent(cc.find("view/Anim",e)),f.play("l1"),d||(f.viewNode.color=cc.Color.BLACK.fromHEX("#141414"),f.viewNode.opacity=212))}),this.views.push(f),f.create()},t.prototype.onClickItemBuy=function(e){a.default.buyGirl(e)&&(this.itemPrices[e-1].string=a.default.formatBigNumber(a.default.getGirlPrice(e)))},t.prototype.refreshTime=function(){var e=f.default.getBoxLotteryNextTime()-p.default.getTime();this.btnGetLabel.string=e<0?"\u83b7\u53d6":p.default.formatTime(e)},t.prototype.on_click_btnClose=function(){this.close()},t.prototype.on_click_btnGet=function(){if(f.default.getBoxLotteryNextTime()-p.default.getTime()>0)h.default.alertDialog("\u65f6\u95f4\u8fd8\u6ca1\u5230\u54e6~");else{var e=f.default.tryMakeBoxLottery();h.default.alertAndGetItem({itemId:s.ITEM_ID.GIRL,count:e},null,!0)&&f.default.markBoxLotteryGeted()}},t}(o.default);n.default=m,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../game/CharView":"CharView","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrAlert":"mgrAlert","../manager/mgrGuide":"mgrGuide","../manager/mgrOperations":"mgrOperations","../manager/mgrPanel":"mgrPanel","../utils/Tools":"Tools","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelInput:[function(e,t,n){"use strict";cc._RF.push(t,"8cac11rBnJN8Z9HzU1rRhm7","PanelInput"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelInput",t.btnNo=null,t.btnYes=null,t.editBox=null,t._exportNodeInfo=[{fieldName:"btnNo",filedType:"cc.Button",fieldPath:"Bg/cc_btnNo"},{fieldName:"btnYes",filedType:"cc.Button",fieldPath:"Bg/cc_btnYes"},{fieldName:"editBox",filedType:"cc.EditBox",fieldPath:"Bg/cc_editBox"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e=this.context;e&&e.tip&&(this.editBox.placeholder=e.tip)},t.prototype.on_click_btnYes=function(){if(cc.log(" close"),this.context&&this.context.confirm){var e=this.editBox.string;cc.log("inputText ",e),this.context.confirm(e)}this.close()},t.prototype.on_click_btnNo=function(){this.context&&this.context.cancel&&this.context.cancel(),this.close()},t}(e("./PanelBase").default);n.default=o,cc._RF.pop()},{"./PanelBase":"PanelBase"}],PanelLoading:[function(e,t,n){"use strict";cc._RF.push(t,"8e9c8qkUGFEL4YpJwA6bM79","PanelLoading"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./PanelBase"),i=e("../common/Const"),r=e("../utils/Mathf"),s=e("../_G"),l=e("../manager/mgrPanel"),c=e("../manager/mgrScene");(function(e){e[e.progress=0]="progress",e[e.end=1]="end",e[e.close=2]="close"})(o||(o={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelLayer=l.PANEL_LAYER.TOP,t.panelStyle=l.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelLoading",t.barSprite=null,t.barLabel=null,t._exportNodeInfo=[{fieldName:"barSprite",filedType:"cc.Sprite",fieldPath:"BarBg/cc_barSprite"},{fieldName:"barLabel",filedType:"cc.Label",fieldPath:"BarBg/cc_barLabel"}],t.curProgress=null,t.maxProgress=null,t.state=o.progress,t.delta=.02,t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.delta=this.context||.01,this.state=o.progress,this.curProgress=0,c.default.isBusy?this.maxProgress=0:this.maxProgress=1,this.registerMsg(((e={})[i.MSG.RES_LOAD_PROGRESS]=this.onMsgLoadProgress.bind(this),e[i.MSG.RES_LOAD_END]=this.onMsgLoadEnd.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this)},t.prototype.update=function(e){this.state==o.progress?(this.curProgress=r.default.Clamp(this.curProgress+this.delta,0,this.maxProgress),this.barSprite.fillRange=this.curProgress,this.barLabel.string=Math.round(100*this.curProgress)+"%",this.curProgress>=1&&(this.state=o.end)):(this.state=o.close,this.close(),s.default.sendMsg(i.MSG.LOADING_COMPLETED))},t.prototype.onMsgLoadProgress=function(e){this.maxProgress=r.default.Clamp01(e)},t.prototype.onMsgLoadEnd=function(){this.maxProgress=1},t}(a.default);n.default=u,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../manager/mgrPanel":"mgrPanel","../manager/mgrScene":"mgrScene","../utils/Mathf":"Mathf","./PanelBase":"PanelBase"}],PanelLottery:[function(e,t,n){"use strict";cc._RF.push(t,"93920AdVxRErI3G5VaofF/2","PanelLottery"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../manager/mgrOperations"),i=e("../common/Const"),r=e("../utils/UiHelper"),s=e("../extensions/SpriteSwitcher"),l=e("../_G"),c=e("../game/CharView"),u=e("../generate/db"),d=e("../game/mgrGame"),f=e("../manager/mgrAlert"),p=e("../manager/mgrPanel"),h=e("../utils/Timer"),g=e("../manager/mgrAdv"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelStyle=p.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelLottery",t.circle=null,t.item=null,t.btnGet=null,t.btnLabel=null,t.btnIcon=null,t.lotteryCountLabel=null,t.btnClose=null,t._exportNodeInfo=[{fieldName:"circle",filedType:"cc.Sprite",fieldPath:"Bg/AnimNode/cc_circle"},{fieldName:"item",filedType:"cc.Node",fieldPath:"Bg/AnimNode/cc_circle/cc_item"},{fieldName:"btnGet",filedType:"cc.Button",fieldPath:"Bg/cc_btnGet"},{fieldName:"btnLabel",filedType:"cc.Label",fieldPath:"Bg/cc_btnGet/cc_btnLabel"},{fieldName:"btnIcon",filedType:"cc.Sprite",fieldPath:"Bg/cc_btnGet/cc_btnIcon"},{fieldName:"lotteryCountLabel",filedType:"cc.Label",fieldPath:"Bg/cc_lotteryCountLabel"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"}],t.charViews=[],t.rewardItems=null,t.closeWhenGeted=!1,t.isGetting=!1,t}return __extends(t,e),t.prototype.buildUi=function(){for(var e,t=[this.item],n=1;n<8;n++){var o=cc.instantiate(this.item);o.setParent(this.item.parent),o.rotation=this.convertIndexToAngle(n)-22.5,t.push(o)}var f=a.default.getCircleLotteryItems();this.rewardItems=f;var p=function(e){var n=f[e],o=t[e],a=r.default.getChildComponent(o,"icon",s.default),p=r.default.getChildComponent(o,"count",cc.Label);if(n.itemId==i.ITEM_ID.COIN)a.switchSprite(0+(1==n.payId?3:0)),p.string="+"+d.default.formatBigNumber(n.count);else if(n.itemId==i.ITEM_ID.ENERGY)a.switchSprite(1+(1==n.payId?3:0)),p.string="+"+d.default.formatBigNumber(n.count);else if(n.itemId==i.ITEM_ID.GIRL){a.switchSprite(-1);var g=u.default.get_up_db(i.UpId.girl,n.count),m=l.default.poolManager.get(c.default,g.view);m.setCreateCallback(function(){m.setParent(o.getChildByName("view"))}),h.charViews.push(m),m.create(),p.string="\u7b49\u7ea7:"+n.count}else n.itemId==i.ITEM_ID.WATER?(a.switchSprite(2+(1==n.payId?3:0)),p.string="+"+n.count):n.itemId==i.ITEM_ID.GIRL_LEVEL&&cc.error("\u6682\u65f6\u672a\u5f00\u653e")},h=this;for(n=0;n<f.length;n++)p(n);var m=a.default.getCircleLotteryIndex();this.circle.node.rotation=45*m,this.refreshState(),this.registerMsg(((e={})[i.MSG.ADV_SHOW_SUC]=this.onMsgAdvShowSuc.bind(this),e)),this.startProcMsg(),g.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg();for(var t=0;t<this.charViews.length;t++){var n=this.charViews[t];l.default.poolManager.put(n)}this.charViews=[],e.prototype.dispose.call(this),g.default.closeAdv("dialog_banner")},t.prototype.onMsgAdvShowSuc=function(e){"lottery"==e.advName&&(a.default.addCircleLotteryFreeCount(),this.refreshState())},t.prototype.onFocus=function(e){e&&this.refreshState()},t.prototype.refreshState=function(){var e=a.default.getCircleLotteryState(),t=a.default.getCircleLotteryFreeCount();this.lotteryCountLabel.string=t.toString(),"get"==e?(this.btnIcon.node.active=!1,this.btnLabel.string="\u83b7\u53d6",this.btnLabel.node.x=0):"empty"==e?(t>0?(this.btnIcon.node.active=!1,this.btnLabel.node.x=0):(this.btnIcon.node.active=!0,this.btnLabel.node.x=18),this.btnLabel.string="\u8f6c\u52a8"):cc.error("--------- refreshState")},t.prototype.convertIndexToAngle=function(e){return 45*(8-e)},t.prototype.onTweenFinish=function(e,t){this.refreshState(),this.btnGet.interactable=!0,this.rewardItem(t)},t.prototype.rewardItem=function(e){var t=this;if(!this.isGetting){this.isGetting=!0;var n=this.rewardItems[e];h.default.callLater(1,function(){t.isGetting=!1,f.default.alertAndGetItem(n)&&(a.default.markCircleLotteryGeted(),g.default.checkActive("lottery")||(t.close(),l.default.sendMsg(i.MSG.RECHECK_ADV)))}),this.closeWhenGeted&&this.close()}},t.prototype.on_click_btnGet=function(){var e=a.default.getCircleLotteryState(),t=a.default.getCircleLotteryIndex();if("get"==e)this.rewardItem(t);else if("empty"==e){if(a.default.getCircleLotteryFreeCount()<=0)return void g.default.dispatchAdv("lottery",!0);this.btnGet.interactable=!1;var n=a.default.makeCircleLottery(),o=(n.index+8-t)%8,i=cc.sequence(cc.rotateBy(4.5,5400+45*o).easing(cc.easeInOut(1.5)),cc.callFunc(this.onTweenFinish,this,n.index));this.circle.node.runAction(i),"reset"==n.state&&(this.closeWhenGeted=!0)}},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=m,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../extensions/SpriteSwitcher":"SpriteSwitcher","../game/CharView":"CharView","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrAdv":"mgrAdv","../manager/mgrAlert":"mgrAlert","../manager/mgrOperations":"mgrOperations","../manager/mgrPanel":"mgrPanel","../utils/Timer":"Timer","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelMain:[function(e,t,n){"use strict";cc._RF.push(t,"2103b3vRjtM66nyQ6OblbE9","PanelMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/GridItem"),i=e("../Config"),r=e("../common/Const"),s=e("../manager/mgrItem"),l=e("../game/mgrGame"),c=e("../utils/Mathf"),u=e("../generate/db"),d=e("../manager/mgrPanel"),f=e("./PanelGarden"),p=e("./PanelFaDian"),h=e("./PanelHuaLing"),g=e("./PanelAch"),m=e("./PanelRank"),_=e("./PanelSign"),v=e("../manager/mgrAudio"),y=e("./PanelLottery"),b=e("./PanelShare"),S=e("./PanelOutputX2"),C=e("../utils/Tools"),T=e("./PanelNewGift"),I=e("../manager/mgrOperations"),w=e("../utils/Timer"),k=e("../manager/mgrGuide"),P=e("../game/FlyIcon"),L=e("../_G"),N=e("./PanelRecycle"),R=e("../manager/mgrAlert"),A=e("../manager/mgrAdv"),M=e("../extensions/RedPoint"),G=e("../manager/mgrQuest"),B=e("../manager/mgrSdk"),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelLayer=d.PANEL_LAYER.UI,t.panelStyle=d.PANEL_STYLE.FULL,t.prefabName="prefab/ui/PanelMain",t.recycleNode=null,t.btnRecycle=null,t.btnDouble=null,t.doubleTimeLabel=null,t.gridNode=null,t.l1=null,t.coinCountLabel=null,t.coinOutputLabel=null,t.coinIconPosNode=null,t.energyCountLabel=null,t.energyIconPosNode=null,t.maxLevelLabel=null,t.btnRank=null,t.btnFriends=null,t.btnSign=null,t.btnLottery=null,t.btnNew=null,t.btnDesc=null,t.btnHuaLing=null,t.btnBuy=null,t.buyLvLable=null,t.buyPriceLable=null,t.btnAch=null,t.btnGarden=null,t.btnGenerate=null,t.generateSprite=null,t.generateLv=null,t.btnLvup=null,t._exportNodeInfo=[{fieldName:"recycleNode",filedType:"cc.Node",fieldPath:"AnchorBottomLeft/cc_recycleNode"},{fieldName:"btnRecycle",filedType:"cc.Button",fieldPath:"AnchorBottomLeft/cc_recycleNode/cc_btnRecycle"},{fieldName:"btnDouble",filedType:"cc.Button",fieldPath:"AnchorBottomLeft/cc_btnDouble"},{fieldName:"doubleTimeLabel",filedType:"cc.Label",fieldPath:"AnchorBottomLeft/cc_btnDouble/cc_doubleTimeLabel"},{fieldName:"gridNode",filedType:"cc.Node",fieldPath:"cc_gridNode"},{fieldName:"l1",filedType:"cc.Node",fieldPath:"cc_gridNode/cc_l1"},{fieldName:"coinCountLabel",filedType:"cc.Label",fieldPath:"AnchorTop/Coin/cc_coinCountLabel"},{fieldName:"coinOutputLabel",filedType:"cc.Label",fieldPath:"AnchorTop/Coin/cc_coinOutputLabel"},{fieldName:"coinIconPosNode",filedType:"cc.Node",fieldPath:"AnchorTop/Coin/cc_coinIconPosNode"},{fieldName:"energyCountLabel",filedType:"cc.Label",fieldPath:"AnchorTop/Energy/cc_energyCountLabel"},{fieldName:"energyIconPosNode",filedType:"cc.Node",fieldPath:"AnchorTop/Energy/cc_energyIconPosNode"},{fieldName:"maxLevelLabel",filedType:"cc.Label",fieldPath:"AnchorTop/Level/cc_maxLevelLabel"},{fieldName:"btnRank",filedType:"cc.Button",fieldPath:"AnchorTop/BtnGrid/cc_btnRank"},{fieldName:"btnFriends",filedType:"cc.Button",fieldPath:"AnchorTop/BtnGrid/cc_btnFriends"},{fieldName:"btnSign",filedType:"cc.Button",fieldPath:"AnchorTop/BtnGrid/cc_btnSign"},{fieldName:"btnLottery",filedType:"cc.Button",fieldPath:"AnchorTop/BtnGrid/cc_btnLottery"},{fieldName:"btnNew",filedType:"cc.Button",fieldPath:"AnchorTop/BtnGrid/cc_btnNew"},{fieldName:"btnDesc",filedType:"cc.Button",fieldPath:"AnchorBottom/Btns/cc_btnDesc"},{fieldName:"btnHuaLing",filedType:"cc.Button",fieldPath:"AnchorBottom/Btns/cc_btnHuaLing"},{fieldName:"btnBuy",filedType:"cc.Button",fieldPath:"AnchorBottom/Btns/cc_btnBuy"},{fieldName:"buyLvLable",filedType:"cc.Label",fieldPath:"AnchorBottom/Btns/cc_btnBuy/cc_buyLvLable"},{fieldName:"buyPriceLable",filedType:"cc.Label",fieldPath:"AnchorBottom/Btns/cc_btnBuy/cc_buyPriceLable"},{fieldName:"btnAch",filedType:"cc.Button",fieldPath:"AnchorBottom/Btns/cc_btnAch"},{fieldName:"btnGarden",filedType:"cc.Button",fieldPath:"AnchorBottom/Btns/cc_btnGarden"},{fieldName:"btnGenerate",filedType:"cc.Button",fieldPath:"AnchorBottomRight2/cc_btnGenerate"},{fieldName:"generateSprite",filedType:"cc.Sprite",fieldPath:"AnchorBottomRight2/cc_btnGenerate/cc_generateSprite"},{fieldName:"generateLv",filedType:"cc.Label",fieldPath:"AnchorBottomRight2/cc_btnGenerate/cc_generateLv"},{fieldName:"btnLvup",filedType:"cc.Button",fieldPath:"AnchorBottomRight2/cc_btnLvup"}],t.gridItems=[],t.curSelectGridItem=null,t.recycleRect=null,t.btnBuyPos=null,t.btnGeneratePos=null,t.coinAction=null,t.energyAction=null,t.redPoints=[],t.lastLeftDoubleTime=0,t}return __extends(t,e),t.prototype.buildUi=function(){for(var e,t=this,n=[this.l1],o=1;o<i.default.girl_grid_item_count;o++){var s=cc.instantiate(this.l1);this.gridNode.addChild(s),n.push(s)}var l=this.gridNode.getComponent(cc.Layout);l.updateLayout(),l.enabled=!1;for(o=0;o<n.length;o++)this.gridItems.push(new a.default(n[o],o));w.default.callLater(.1,function(){t.refreshWorldPosition()}),this.gridNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.gridNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gridNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.gridNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.registerMsg(((e={})[r.MSG.ITEM_CHANGE]=this.onMsgItemChange.bind(this),e[r.MSG.GIRL_ADD]=this.onMsgGirlAdd.bind(this),e[r.MSG.GIRL_CHANGE]=this.onMsgGirlChange.bind(this),e[r.MSG.GIRL_LVUP_EFFECT_FINISH]=this.onMsgLvupEffectFinish.bind(this),e[r.MSG.GIRL_GAINS_COIN]=this.onMsgGirlGainsCoin.bind(this),e[r.MSG.GIRL_PRICE_UPDATE]=this.onMsgGirlPriceUpdate.bind(this),e[r.MSG.PAY_SUCCESS]=this.onMsgPaySuc.bind(this),e[r.MSG.LOADING_COMPLETED]=this.onMsgLoadingComplete.bind(this),e[r.MSG.PLAY_ENGERY_ACTION]=this.onMsgPlayEnergyAction.bind(this),e[r.MSG.PLAY_GIRL_FLY]=this.onMsgPlayGirlFly.bind(this),e[r.MSG.RECHECK_ADV]=this.onMsgRecheckAdv.bind(this),e[r.MSG.COP_CHANGED]=this.onMsgCopChanged.bind(this),e[r.MSG.VIEW_RESIZE]=this.onMsgViewResize.bind(this),e)),this.startProcMsg(),this.refreshGameInfo(),v.default.playMusic("bgm")},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this)},t.prototype.update=function(e){this.refreshGenerateState(),this.refreshDoubleOutputTime()},t.prototype.onTouchStart=function(e){e.stopPropagation();var t=e.getLocation(),n=this.getItemInWorldPoint(t);n&&n.hasGirl()&&(n.touchBegin(t),this.curSelectGridItem=n,v.default.playSound("speak"+c.default.Random(9)))},t.prototype.onTouchMove=function(e){e.stopPropagation();var t=e.getLocation();this.curSelectGridItem&&this.curSelectGridItem.touchMove(t)},t.prototype.onTouchEnd=function(e){e.stopPropagation();var n=e.getLocation();if(this.curSelectGridItem){this.curSelectGridItem.touchEnd(n);var o=this.getItemInWorldPoint(n);if(o){if(o.index!=this.curSelectGridItem.index)switch(l.default.moveGirl(this.curSelectGridItem.index,o.index)){case l.MoveState.Fail:break;case l.MoveState.Merge:this.curSelectGridItem.clearGirl(),o.playLvupEffect();break;case l.MoveState.Move:this.curSelectGridItem.swap(o);case l.MoveState.Swap:this.curSelectGridItem.swap(o)}}else if(this.recycleHitTest(n)&&l.default.recycleGirl(this.curSelectGridItem.index)){this.curSelectGridItem.clearGirl();var a=cc.sequence(cc.scaleTo(.2,1.3),cc.scaleTo(.2,1),cc.callFunc(function(e,t){t.rotation=30},this,this.recycleNode),cc.rotateTo(.5,0).easing(cc.easeBounceOut()));this.recycleNode.runAction(a);var i=d.default.getLayerNode(d.PANEL_LAYER.TIP),r=L.default.poolManager.get(P.default);r.create(),r.setParent(i),r.setEnergy(),r.fly(t.recyclePos,t.energyIconPos)}this.curSelectGridItem=null}},t.prototype.onTouchCancel=function(e){e.stopPropagation(),this.onTouchEnd(e)},t.prototype.getItemInWorldPoint=function(e){for(var t=0;t<this.gridItems.length;t++){var n=this.gridItems[t];if(n.hitTest(e))return n}return null},t.prototype.recycleHitTest=function(e){return this.recycleRect.contains(e)},t.prototype.onMsgItemChange=function(e){e.itemId==r.ITEM_ID.COIN?(this.coinCountLabel.string=l.default.formatBigNumber(e.curCount),null==this.coinAction&&(this.coinAction=cc.sequence(cc.scaleTo(.1,1.2).easing(cc.easeOut(1.5)),cc.scaleTo(.1,1).easing(cc.easeOut(1.5))),this.coinCountLabel.node.runAction(this.coinAction)),this.coinAction.isDone()&&this.coinCountLabel.node.runAction(this.coinAction)):e.itemId==r.ITEM_ID.ENERGY?(this.energyCountLabel.string=l.default.formatBigNumber(e.curCount),v.default.playSound("energy")):e.itemId==r.ITEM_ID.GIRL_LEVEL&&this.refreshLvupState()},t.prototype.onMsgGirlAdd=function(e){this.gridItems[e.pos].setGirlLevel(l.default.getGirlLevel(e.pos),e.auto?this.btnGeneratePos:this.btnBuyPos),this.refreshOutputInfo()},t.prototype.onMsgGirlChange=function(e){null!=e&&this.gridItems[e].lvup(),this.refreshOutputInfo(),this.refreshMaxLevel()},t.prototype.onMsgLvupEffectFinish=function(e){this.gridItems[e].lvup()},t.prototype.onMsgGirlGainsCoin=function(e){this.gridItems[e].gainsCoin()},t.prototype.onMsgGirlPriceUpdate=function(){this.refreshBuyInfo()},t.prototype.onMsgPaySuc=function(){I.default.hasNewGift()&&(this.btnNew.node.active=!1)},t.prototype.onMsgLoadingComplete=function(){k.default.dispatchGuide("enter_main"),l.default.offlineGains>0&&(R.default.alertOfflineGains(l.default.offlineGains),l.default.offlineGains=0)},t.prototype.onMsgPlayEnergyAction=function(){null==this.energyAction&&(this.energyAction=cc.sequence(cc.scaleTo(.1,1.2).easing(cc.easeOut(1.5)),cc.scaleTo(.1,1).easing(cc.easeOut(1.5))),this.energyCountLabel.node.runAction(this.energyAction)),this.energyAction.isDone()&&this.energyCountLabel.node.runAction(this.energyAction)},t.prototype.onMsgPlayGirlFly=function(e){e&&e.index&&this.gridItems[e.index].playGirlFly(e.from)},t.prototype.onMsgRecheckAdv=function(){!A.default.checkActive("lottery")&&I.default.getCircleLotteryFreeCount()<=0?this.btnLottery.node.active=!1:this.btnLottery.node.active=!0,A.default.checkActive("output_x2")?this.btnDouble.node.active=!0:this.btnDouble.node.active=!1},t.prototype.onMsgCopChanged=function(){this.onMsgRecheckAdv(),this.refreshLvupState(),this.btnRank.node.active=B.default.channelRankEnabled,this.btnNew.node.active=B.default.shareEnabled,this.btnFriends.node.active=B.default.shareEnabled},t.prototype.onMsgViewResize=function(){this.refreshWorldPosition()},t.prototype.refreshGameInfo=function(){this.coinCountLabel.string=l.default.formatBigNumber(s.default.getItemCount(r.ITEM_ID.COIN)),this.energyCountLabel.string=l.default.formatBigNumber(s.default.getItemCount(r.ITEM_ID.ENERGY)),this.refreshOutputInfo(),this.refreshGenerateState(),this.refreshMaxLevel(),this.refreshDoubleOutputTime(),this.refreshLvupState(),this.onMsgCopChanged(),this.doubleTimeLabel.string="",I.default.hasNewGift()&&(this.btnNew.node.active=!1);for(var e=l.default.getGirls(),t=0;t<e.length;t++){this.gridItems[t].init();var n=e[t];0!=n.level&&this.gridItems[t].setGirlLevel(n.level,null)}this.redPoints.push(new M.default(this.btnAch.node.getChildByName("redPoint"),function(){return G.default.hasCommitaleQuest(G.QUEST_TYPE.ACHIEVEMENT)},r.MSG.ACH_STATE_CHANGE)),this.redPoints.push(new M.default(this.btnGarden.node.getChildByName("redPoint"),function(){return l.default.hasLvupFlower()}))},t.prototype.refreshWorldPosition=function(){this.recycleRect=this.recycleNode.getBoundingBoxToWorld();var e=cc.Vec2.ZERO;this.btnBuyPos=this.btnBuy.node.convertToWorldSpaceAR(e),this.btnGeneratePos=this.btnGenerate.node.convertToWorldSpaceAR(e);var n=d.default.getLayerNode(d.PANEL_LAYER.TIP);t.recyclePos=n.convertToNodeSpaceAR(this.recycleNode.convertToWorldSpaceAR(e)),t.coinIconPos=n.convertToNodeSpaceAR(this.coinIconPosNode.convertToWorldSpaceAR(e)),t.energyIconPos=n.convertToNodeSpaceAR(this.energyIconPosNode.convertToWorldSpaceAR(e))},t.prototype.refreshOutputInfo=function(){var e=1;l.default.getDoubleOutputLeftTime()>0&&(e=2),this.coinOutputLabel.string=l.default.formatBigNumber(l.default.getAllGirlOutput()*e)},t.prototype.refreshGenerateState=function(){var e=l.default.getNextGenerateGirlTime(),t=l.default.getWorldTime();t=c.default.Clamp(e-t,0,i.default.auto_generate_girl_delta_time*i.default.game_time_scale),this.generateSprite.fillRange=t/(i.default.auto_generate_girl_delta_time*i.default.game_time_scale)},t.prototype.refreshMaxLevel=function(){var e=l.default.getCurMaxGirlLevel(),t=u.default.get_up_db(r.UpId.girl,e);this.maxLevelLabel.string="Lv."+e+" "+t.name,this.btnGarden.interactable=e>=i.default.garden_unlock_level,this.btnHuaLing.interactable=e>=i.default.garden_unlock_level,this.generateLv.string="Lv."+l.default.getGenerateGirlLevel(),this.refreshBuyInfo()},t.prototype.refreshBuyInfo=function(){var e=l.default.getCurMaxBuyGirlLevel();this.buyLvLable.string="Lv."+e,this.buyPriceLable.string=l.default.formatBigNumber(l.default.getGirlPrice(e))},t.prototype.refreshDoubleOutputTime=function(){var e=l.default.getDoubleOutputLeftTime();this.lastLeftDoubleTime>0?e<=0?(this.refreshOutputInfo(),this.doubleTimeLabel.string=""):this.doubleTimeLabel.string=C.default.formatTime(e):e>0&&this.refreshOutputInfo(),this.lastLeftDoubleTime=e},t.prototype.refreshLvupState=function(){this.btnLvup.node.active=l.default.canGenerateGirlLvup()&&B.default.shareEnabled,this.generateLv.string="Lv."+l.default.getGenerateGirlLevel()},t.prototype.on_click_btnGenerate=function(){l.default.accGenerateGirlTime()},t.prototype.on_click_btnGarden=function(){d.default.openPanel(f.default)},t.prototype.on_click_btnBuy=function(){var e=l.default.getCurMaxBuyGirlLevel(),t=l.default.buyGirlLeftCoin(e);t>=0?l.default.buyGirl(e):A.default.checkActive("coin_get")&&!k.default.isGuiding?R.default.alertCoinNotEnought(Math.ceil(-t)):R.default.alertNotEnough(r.ITEM_ID.COIN)},t.prototype.on_click_btnDesc=function(){d.default.openPanel(p.default)},t.prototype.on_click_btnHuaLing=function(){d.default.openPanel(h.default)},t.prototype.on_click_btnAch=function(){d.default.openPanel(g.default)},t.prototype.on_click_btnRank=function(){d.default.openPanel(m.default)},t.prototype.on_click_btnSign=function(){d.default.openPanel(_.default)},t.prototype.on_click_btnLottery=function(){!A.default.checkActive("lottery")&&I.default.getCircleLotteryFreeCount()<=0?this.btnLottery.node.active=!1:d.default.openPanel(y.default)},t.prototype.on_click_btnNew=function(){I.default.hasNewGift()||d.default.openPanel(T.default)},t.prototype.on_click_btnFriends=function(){d.default.openPanel(b.default)},t.prototype.on_click_btnLvup=function(){k.default.isGuiding||d.default.openPanel(b.default)},t.prototype.on_click_btnDouble=function(){d.default.openPanel(S.default)},t.prototype.on_click_btnRecycle=function(){d.default.openPanel(N.default)},t.recyclePos=null,t.coinIconPos=null,t.energyIconPos=null,t}(o.default);n.default=O,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../extensions/RedPoint":"RedPoint","../game/FlyIcon":"FlyIcon","../game/GridItem":"GridItem","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrAdv":"mgrAdv","../manager/mgrAlert":"mgrAlert","../manager/mgrAudio":"mgrAudio","../manager/mgrGuide":"mgrGuide","../manager/mgrItem":"mgrItem","../manager/mgrOperations":"mgrOperations","../manager/mgrPanel":"mgrPanel","../manager/mgrQuest":"mgrQuest","../manager/mgrSdk":"mgrSdk","../utils/Mathf":"Mathf","../utils/Timer":"Timer","../utils/Tools":"Tools","./PanelAch":"PanelAch","./PanelBase":"PanelBase","./PanelFaDian":"PanelFaDian","./PanelGarden":"PanelGarden","./PanelHuaLing":"PanelHuaLing","./PanelLottery":"PanelLottery","./PanelNewGift":"PanelNewGift","./PanelOutputX2":"PanelOutputX2","./PanelRank":"PanelRank","./PanelRecycle":"PanelRecycle","./PanelShare":"PanelShare","./PanelSign":"PanelSign"}],PanelNewGift:[function(e,t,n){"use strict";cc._RF.push(t,"f80e4u7YJFGzLGtY8khQH/P","PanelNewGift"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/mgrGame"),i=e("../Config"),r=e("../manager/mgrAlert"),s=e("../manager/mgrOperations"),l=e("../manager/mgrAdv"),c=e("../manager/mgrSdk"),u=e("../common/Const"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelNewGift",t.descLabel=null,t.item1Label=null,t.item2Label=null,t.titleLabel=null,t.btnShare=null,t.btnClose=null,t._exportNodeInfo=[{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/pnl/cc_descLabel"},{fieldName:"item1Label",filedType:"cc.Label",fieldPath:"Bg/pnl/item1/cc_item1Label"},{fieldName:"item2Label",filedType:"cc.Label",fieldPath:"Bg/pnl/item2/cc_item2Label"},{fieldName:"titleLabel",filedType:"cc.Label",fieldPath:"Bg/cc_titleLabel"},{fieldName:"btnShare",filedType:"cc.Button",fieldPath:"Bg/cc_btnShare"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.item1Label.string=a.default.formatBigNumber(i.default.new_reward_item[0].count),this.item2Label.string=a.default.formatBigNumber(i.default.new_reward_item[1].count),this.registerMsg(((e={})[u.MSG.SHARE_SUC]=this.onMsgSharedSuc.bind(this),e)),this.startProcMsg(),l.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this),l.default.closeAdv("dialog_banner")},t.prototype.onMsgSharedSuc=function(){r.default.alertAndGetItem(i.default.new_reward_item[0]),r.default.alertAndGetItem(i.default.new_reward_item[1]),s.default.markNewGiftGeted(),this.close()},t.prototype.on_click_btnShare=function(){c.default.share()},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=d,cc._RF.pop()},{"../Config":"Config","../common/Const":"Const","../game/mgrGame":"mgrGame","../manager/mgrAdv":"mgrAdv","../manager/mgrAlert":"mgrAlert","../manager/mgrOperations":"mgrOperations","../manager/mgrSdk":"mgrSdk","./PanelBase":"PanelBase"}],PanelOutputX2:[function(e,t,n){"use strict";cc._RF.push(t,"f14eeTzA9tKnIJV2b7beZSV","PanelOutputX2"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/mgrGame"),i=e("../Config"),r=e("../utils/Tools"),s=e("../common/Const"),l=e("../manager/mgrAdv"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelOutputX2",t.barSprite=null,t.barLabel=null,t.btnClose=null,t.btnAdv=null,t.descLabel=null,t._exportNodeInfo=[{fieldName:"barSprite",filedType:"cc.Sprite",fieldPath:"Bg/bar/cc_barSprite"},{fieldName:"barLabel",filedType:"cc.Label",fieldPath:"Bg/bar/cc_barLabel"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"},{fieldName:"btnAdv",filedType:"cc.Button",fieldPath:"Bg/cc_btnAdv"},{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/cc_descLabel"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.refreshState(),this.registerMsg(((e={})[s.MSG.ADV_SHOW_SUC]=this.onMsgAdvShowSuc.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this)},t.prototype.onMsgAdvShowSuc=function(e){"output_x2"==e.advName&&(a.default.refreshDoubleOutputTime(),this.close())},t.prototype.refreshState=function(){var e=a.default.getDoubleOutputLeftTime();e<=0?(this.btnAdv.node.active=!0,this.descLabel.node.active=!1,this.barSprite.fillRange=0,this.barLabel.string="00:00"):(this.btnAdv.node.active=!1,this.descLabel.node.active=!0,this.barSprite.fillRange=e/i.default.double_output_time,this.barLabel.string=r.default.formatTime(e))},t.prototype.update=function(e){this.refreshState()},t.prototype.on_click_btnClose=function(){this.close()},t.prototype.on_click_btnAdv=function(){l.default.dispatchAdv("output_x2",!0)},t}(o.default);n.default=c,cc._RF.pop()},{"../Config":"Config","../common/Const":"Const","../game/mgrGame":"mgrGame","../manager/mgrAdv":"mgrAdv","../utils/Tools":"Tools","./PanelBase":"PanelBase"}],PanelPosNotEnought:[function(e,t,n){"use strict";cc._RF.push(t,"b3becyNWgNP9aki6koSWCn9","PanelPosNotEnought"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../manager/mgrAdv"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelPosNotEnought",t.btnClose=null,t._exportNodeInfo=[{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"}],t}return __extends(t,e),t.prototype.buildUi=function(){a.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){e.prototype.dispose.call(this),a.default.closeAdv("dialog_banner")},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=i,cc._RF.pop()},{"../manager/mgrAdv":"mgrAdv","./PanelBase":"PanelBase"}],PanelRank:[function(e,t,n){"use strict";cc._RF.push(t,"e593ac2c9hLF6aWxmlvWkS/","PanelRank"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../utils/UiHelper"),i=e("../extensions/SpriteSwitcher"),r=e("../manager/mgrAdv"),s=e("../manager/mgrSdk"),l=e("../manager/mgrRank"),c=e("../manager/mgrRes"),u=e("../common/Const"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelRank",t.scrollView=null,t.rankItem=null,t.emptyLabel=null,t.btnClose=null,t.btnShare=null,t._exportNodeInfo=[{fieldName:"scrollView",filedType:"cc.Node",fieldPath:"ScrollBg/cc_scrollView"},{fieldName:"rankItem",filedType:"cc.Sprite",fieldPath:"ScrollBg/cc_scrollView/view/content/cc_rankItem"},{fieldName:"emptyLabel",filedType:"cc.Label",fieldPath:"ScrollBg/cc_emptyLabel"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"ScrollBg/cc_btnClose"},{fieldName:"btnShare",filedType:"cc.Button",fieldPath:"ScrollBg/cc_btnShare"}],t.hasData=!1,t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.btnShare.node.active=s.default.shareEnabled,r.default.dispatchAdv("dialog_banner"),l.default.commit(l.default.getPlayerScore()),l.default.requestRank(),this.refreshRank(),this.registerMsg(((e={})[u.MSG.RECEIVE_RANK_DATA]=this.refreshRank.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg(),r.default.closeAdv("dialog_banner"),e.prototype.dispose.call(this)},t.prototype.refreshRank=function(){if(!this.hasData){var e=l.default.getRankData();if(!e||e.length<=0)return this.scrollView.active=!1,void(this.emptyLabel.node.active=!0);this.scrollView.active=!0,this.emptyLabel.node.active=!1,this.hasData=!0;for(var t=[this.rankItem.node],n=1;n<e.length;n++){var o=cc.instantiate(this.rankItem.node);o.setParent(this.rankItem.node.parent),t.push(o)}for(n=0;n<t.length;n++)this.initItem(t[n],e[n])}},t.prototype.initItem=function(e,t){var n=this;t.rank<4?(e.getChildByName("rankLabel").active=!1,a.default.getChildComponent(e,"rankImage",i.default).switchSprite(t.rank-1)):(e.getChildByName("rankImage").active=!1,e.getChildByName("rankLabel").active=!0,a.default.getChildComponent(e,"rankLabel",cc.Label).string=t.rank.toString()),a.default.getChildComponent(e,"name",cc.Label).string=t.name,a.default.getChildComponent(e,"score",cc.Label).string=t.score.toString(),console.log("load head: ",t.headUrl);var o=a.default.getChildSprite(e,"head");c.default.loadImageFromWeb(t.headUrl,function(e){e instanceof cc.Texture2D?n.isDisposed||(o.spriteFrame=new cc.SpriteFrame(e)):console.log("load head is not cc.Texture2D")})},t.prototype.on_click_btnClose=function(){this.close()},t.prototype.on_click_btnShare=function(){s.default.share()},t}(o.default);n.default=d,cc._RF.pop()},{"../common/Const":"Const","../extensions/SpriteSwitcher":"SpriteSwitcher","../manager/mgrAdv":"mgrAdv","../manager/mgrRank":"mgrRank","../manager/mgrRes":"mgrRes","../manager/mgrSdk":"mgrSdk","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelRecycle:[function(e,t,n){"use strict";cc._RF.push(t,"5f196MAbVtPCrT6FDYrGHnF","PanelRecycle"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../manager/mgrAdv"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelRecycle",t.btnOk=null,t.btnLabel=null,t._exportNodeInfo=[{fieldName:"btnOk",filedType:"cc.Button",fieldPath:"Bg/cc_btnOk"},{fieldName:"btnLabel",filedType:"cc.Label",fieldPath:"Bg/cc_btnOk/cc_btnLabel"}],t}return __extends(t,e),t.prototype.buildUi=function(){a.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){e.prototype.dispose.call(this),a.default.closeAdv("dialog_banner")},t.prototype.on_click_btnOk=function(){this.close()},t}(o.default);n.default=i,cc._RF.pop()},{"../manager/mgrAdv":"mgrAdv","./PanelBase":"PanelBase"}],PanelRewarFlyBox:[function(e,t,n){"use strict";cc._RF.push(t,"72bcb7OR2xC14KRkK4p1dn6","PanelRewarFlyBox"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/mgrGame"),i=e("../common/Const"),r=e("../manager/mgrAlert"),s=e("../manager/mgrAdv"),l=e("../manager/mgrItem"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelRewarFlyBox",t.descLabel=null,t.titleLabel=null,t.btnClose=null,t.btnAdv=null,t.btnLabel=null,t.btnIcon=null,t._exportNodeInfo=[{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/cc_descLabel"},{fieldName:"titleLabel",filedType:"cc.Label",fieldPath:"Bg/cc_titleLabel"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"},{fieldName:"btnAdv",filedType:"cc.Button",fieldPath:"Bg/cc_btnAdv"},{fieldName:"btnLabel",filedType:"cc.Label",fieldPath:"Bg/cc_btnAdv/cc_btnLabel"},{fieldName:"btnIcon",filedType:"cc.Sprite",fieldPath:"Bg/cc_btnAdv/cc_btnIcon"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.context.adv||(this.btnClose.node.active=!1,this.btnLabel.string="\u83b7\u5f97",this.btnLabel.node.x=0,this.btnIcon.enabled=!1),this.descLabel.string=a.default.formatBigNumber(this.context.count),this.registerMsg(((e={})[i.MSG.ADV_SHOW_SUC]=this.onMsgAdvShowSuc.bind(this),e)),this.startProcMsg(),s.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this),s.default.closeAdv("dialog_banner")},t.prototype.onMsgAdvShowSuc=function(e){"coin_get"==e.advName&&this.onAdvReward()},t.prototype.onAdvReward=function(){this.close(),r.default.alertAndGetItem({itemId:i.ITEM_ID.COIN,count:2*this.context.count})},t.prototype.on_click_btnAdv=function(){this.context.adv?s.default.dispatchAdv("coin_get",!0):this.on_click_btnClose()},t.prototype.on_click_btnClose=function(){l.default.addItem(i.ITEM_ID.COIN,this.context.count),this.close()},t}(o.default);n.default=c,cc._RF.pop()},{"../common/Const":"Const","../game/mgrGame":"mgrGame","../manager/mgrAdv":"mgrAdv","../manager/mgrAlert":"mgrAlert","../manager/mgrItem":"mgrItem","./PanelBase":"PanelBase"}],PanelRewardAch:[function(e,t,n){"use strict";cc._RF.push(t,"035c3LWSghKrLlUMQJX9xSX","PanelRewardAch"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../generate/db"),i=e("../game/mgrGame"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelRewardAch",t.imageSwitcher=null,t.descLabel=null,t.rewardLabel=null,t.btnGet=null,t._exportNodeInfo=[{fieldName:"imageSwitcher",filedType:"SpriteSwitcher",fieldPath:"Bg/pnl/cc_imageSwitcher"},{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/pnl/cc_descLabel"},{fieldName:"rewardLabel",filedType:"cc.Label",fieldPath:"Bg/cc_rewardLabel"},{fieldName:"btnGet",filedType:"cc.Button",fieldPath:"Bg/cc_btnGet"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e=this.context.questId,t=this.context.reward,n=a.default.get_quest_db(e);this.imageSwitcher.switchSprite(n.order),this.descLabel.string=n.name,this.rewardLabel.string=i.default.formatBigNumber(t.count)},t.prototype.on_click_btnGet=function(){this.close()},t}(o.default);n.default=r,cc._RF.pop()},{"../game/mgrGame":"mgrGame","../generate/db":"db","./PanelBase":"PanelBase"}],PanelRewardOffline:[function(e,t,n){"use strict";cc._RF.push(t,"a70ddRK7SxD7ZOU1kO+C8kd","PanelRewardOffline"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../manager/mgrAdv"),i=e("../common/Const"),r=e("../game/mgrGame"),s=e("../manager/mgrAlert"),l=e("../manager/mgrItem"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelRewardOffline",t.titleLabel=null,t.descLabel=null,t.btnOk=null,t.advNode=null,t.btnDb=null,t.btnClose=null,t._exportNodeInfo=[{fieldName:"titleLabel",filedType:"cc.Label",fieldPath:"Bg/cc_titleLabel"},{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/cc_descLabel"},{fieldName:"btnOk",filedType:"cc.Button",fieldPath:"Bg/cc_btnOk"},{fieldName:"advNode",filedType:"cc.Node",fieldPath:"Bg/cc_advNode"},{fieldName:"btnDb",filedType:"cc.Button",fieldPath:"Bg/cc_advNode/cc_btnDb"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_advNode/cc_btnClose"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.descLabel.string=r.default.formatBigNumber(this.context.count),a.default.checkActive("reward_x2")&&(this.btnOk.node.active=!1,this.advNode.active=!0),this.registerMsg(((e={})[i.MSG.ADV_SHOW_SUC]=this.onMsgAdvShowSuc.bind(this),e)),this.startProcMsg(),l.default.addItem(this.context.itemId,this.context.count),a.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this),a.default.closeAdv("dialog_banner")},t.prototype.onMsgAdvShowSuc=function(e){"reward_x2"==e.advName&&(this.close(),l.default.addItem(this.context.itemId,this.context.count),s.default.alertItemOnly({itemId:this.context.itemId,count:2*this.context.count}))},t.prototype.on_click_btnOk=function(){this.close()},t.prototype.on_click_btnDb=function(){a.default.dispatchAdv("reward_x2",!0)},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=c,cc._RF.pop()},{"../common/Const":"Const","../game/mgrGame":"mgrGame","../manager/mgrAdv":"mgrAdv","../manager/mgrAlert":"mgrAlert","../manager/mgrItem":"mgrItem","./PanelBase":"PanelBase"}],PanelRewardShow:[function(e,t,n){"use strict";cc._RF.push(t,"65d46EudeRJhZRO1dp2LjRj","PanelRewardShow"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../common/Const"),i=e("../game/mgrGame"),r=e("../manager/mgrItem"),s=e("../manager/mgrAdv"),l=e("../manager/mgrAlert"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelRewardShow",t.itemIcon=null,t.titleLabel=null,t.descLabel=null,t.btnOk=null,t.advNode=null,t.btnDb=null,t.btnClose=null,t._exportNodeInfo=[{fieldName:"itemIcon",filedType:"SpriteSwitcher",fieldPath:"Bg/Pnl/cc_itemIcon"},{fieldName:"titleLabel",filedType:"cc.Label",fieldPath:"Bg/cc_titleLabel"},{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/cc_descLabel"},{fieldName:"btnOk",filedType:"cc.Button",fieldPath:"Bg/cc_btnOk"},{fieldName:"advNode",filedType:"cc.Node",fieldPath:"Bg/cc_advNode"},{fieldName:"btnDb",filedType:"cc.Button",fieldPath:"Bg/cc_advNode/cc_btnDb"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_advNode/cc_btnClose"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e,t=this.context,n=0;t.itemId==a.ITEM_ID.COIN?n=0:t.itemId==a.ITEM_ID.ENERGY?n=1:t.itemId==a.ITEM_ID.WATER&&(n=2),this.descLabel.string=i.default.formatBigNumber(t.count),t.isBig&&(n+=3),this.itemIcon.switchSprite(n),t.adv&&s.default.checkActive("reward_x2")&&(this.btnOk.node.active=!1,this.advNode.active=!0),this.registerMsg(((e={})[a.MSG.ADV_SHOW_SUC]=this.onMsgAdvShowSuc.bind(this),e)),this.startProcMsg(),s.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this),s.default.closeAdv("dialog_banner")},t.prototype.onMsgAdvShowSuc=function(e){"reward_x2"==e.advName&&(this.close(),r.default.addItem(this.context.itemId,this.context.count),l.default.alertItemOnly({itemId:this.context.itemId,count:2*this.context.count}))},t.prototype.on_click_btnOk=function(){this.close()},t.prototype.on_click_btnDb=function(){s.default.dispatchAdv("reward_x2",!0)},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=c,cc._RF.pop()},{"../common/Const":"Const","../game/mgrGame":"mgrGame","../manager/mgrAdv":"mgrAdv","../manager/mgrAlert":"mgrAlert","../manager/mgrItem":"mgrItem","./PanelBase":"PanelBase"}],PanelShare:[function(e,t,n){"use strict";cc._RF.push(t,"822b18Ov5RFVI2Q3laOsUpV","PanelShare"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../utils/UiHelper"),i=e("../manager/mgrOperations"),r=e("../game/mgrGame"),s=e("../manager/mgrSdk"),l=e("../utils/Mathf"),c=e("../manager/mgrPanel"),u=e("../manager/mgrAdv"),d=e("../common/Const"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelStyle=c.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelShare",t.rewardItem=null,t.barSprite=null,t.barLabel=null,t.GetedLabel=null,t.desc1=null,t.desc2=null,t.btnClose=null,t._exportNodeInfo=[{fieldName:"rewardItem",filedType:"cc.Node",fieldPath:"Bg/Grid/cc_rewardItem"},{fieldName:"barSprite",filedType:"cc.Sprite",fieldPath:"Bg/barPnl/barBg/cc_barSprite"},{fieldName:"barLabel",filedType:"cc.Label",fieldPath:"Bg/barPnl/barBg/cc_barLabel"},{fieldName:"GetedLabel",filedType:"cc.Label",fieldPath:"Bg/barPnl/cc_GetedLabel"},{fieldName:"desc1",filedType:"cc.Label",fieldPath:"Bg/barPnl/cc_desc1"},{fieldName:"desc2",filedType:"cc.Label",fieldPath:"Bg/barPnl/cc_desc2"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"}],t.items=null,t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.items=[this.rewardItem];for(var t=1;t<6;t++){var n=cc.instantiate(this.rewardItem);n.setParent(this.rewardItem.parent),this.items.push(n)}for(t=0;t<this.items.length;t++){var o=this.items[t];this.initNode(o,t)}this.refreshBar(),this.registerMsg(((e={})[d.MSG.SHARE_SUC]=this.onShareSuc.bind(this),e)),this.startProcMsg(),u.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this),u.default.closeAdv("dialog_banner")},t.prototype.initNode=function(e,t){var n=this;this.items[t]=e,a.default.getChildLabel(e,"name").string="\u7b2c"+(t+1)+"\u4f4d\u597d\u53cb",a.default.getChildLabel(e,"count").string=r.default.formatBigNumber(i.default.getShareReward(t).count),a.default.addChildClick(e,"btnGet",function(){n.onClickGet(t)}),a.default.addChildClick(e,"btnShare",function(){n.onClickShare(t)}),this.refreshNode(t)},t.prototype.refreshNode=function(e){var t=this.items[e],n=i.default.getShareState(e);"empty"==n?t.getChildByName("btnGet").active=!1:"shared"==n?(t.getChildByName("btnGet").active=!0,t.getChildByName("btnShare").active=!1):"geted"==n?(t.getChildByName("btnGet").active=!1,t.getChildByName("btnShare").active=!1):cc.error(" unkown shared state")},t.prototype.refreshBar=function(){if(i.default.allShared()||!r.default.canGenerateGirlLvup())this.desc1.enabled=!1,this.desc2.enabled=!1,this.GetedLabel.enabled=!0,this.barSprite.fillRange=1,this.barLabel.string="";else{var e=i.default.getSharedCount();this.GetedLabel.enabled=!1,this.barLabel.string=e+"/6",this.barSprite.fillRange=l.default.Clamp01(e/6)}},t.prototype.onShareSuc=function(e){var t=parseInt(e);i.default.markShared(t),this.refreshNode(t),this.refreshBar()},t.prototype.onClickGet=function(e){i.default.makeShareReward(e),this.refreshNode(e)},t.prototype.onClickShare=function(e){s.default.share(e.toString())},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=f,cc._RF.pop()},{"../common/Const":"Const","../game/mgrGame":"mgrGame","../manager/mgrAdv":"mgrAdv","../manager/mgrOperations":"mgrOperations","../manager/mgrPanel":"mgrPanel","../manager/mgrSdk":"mgrSdk","../utils/Mathf":"Mathf","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelSign:[function(e,t,n){"use strict";cc._RF.push(t,"3d997FgruRFgICBAUPM9gTA","PanelSign"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../common/Const"),i=e("../utils/UiHelper"),r=e("../game/mgrGame"),s=e("../manager/mgrAlert"),l=e("../manager/mgrOperations"),c=e("../manager/mgrPanel"),u=e("../manager/mgrAdv"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelStyle=c.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelSign",t.signItem0=null,t.signItem1=null,t.signItem2=null,t.signItem3=null,t.signItem4=null,t.signItem5=null,t.signItem6=null,t.btnClose=null,t.advNode=null,t.btnAdv=null,t.btnGet=null,t._exportNodeInfo=[{fieldName:"signItem0",filedType:"cc.Sprite",fieldPath:"ScrollBg/layout/cc_signItem0"},{fieldName:"signItem1",filedType:"cc.Sprite",fieldPath:"ScrollBg/layout/cc_signItem1"},{fieldName:"signItem2",filedType:"cc.Sprite",fieldPath:"ScrollBg/layout/cc_signItem2"},{fieldName:"signItem3",filedType:"cc.Sprite",fieldPath:"ScrollBg/layout/cc_signItem3"},{fieldName:"signItem4",filedType:"cc.Sprite",fieldPath:"ScrollBg/layout/cc_signItem4"},{fieldName:"signItem5",filedType:"cc.Sprite",fieldPath:"ScrollBg/layout/cc_signItem5"},{fieldName:"signItem6",filedType:"cc.Sprite",fieldPath:"ScrollBg/layout/cc_signItem6"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"ScrollBg/cc_btnClose"},{fieldName:"advNode",filedType:"cc.Sprite",fieldPath:"ScrollBg/cc_advNode"},{fieldName:"btnAdv",filedType:"cc.Button",fieldPath:"ScrollBg/cc_advNode/cc_btnAdv"},{fieldName:"btnGet",filedType:"cc.Button",fieldPath:"ScrollBg/cc_btnGet"}],t.items=[],t.states=[],t.active=!1,t.theItemCanGet=null,t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.active=l.default.getSignState(this.items,this.states),this.active?u.default.checkActive("sign")||(this.advNode.node.active=!1):(this.btnGet.node.active=!1,this.advNode.node.active=!1);for(var t=0;t<7;t++)this.initItem(t,this.items[t],this.states[t]);this.registerMsg(((e={})[a.MSG.ADV_SHOW_SUC]=this.onAdvShowSuc.bind(this),e)),this.startProcMsg(),u.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this),u.default.closeAdv("dialog_banner")},t.prototype.initItem=function(e,t,n){var o=this["signItem"+e].node;i.default.getChildComponent(o,"count",cc.Label).string=r.default.formatBigNumber(t.count),n!=l.SIGN_STATE.Geted&&(o.getChildByName("mask").active=!1),n==l.SIGN_STATE.CanGet&&(this.theItemCanGet=t)},t.prototype.rewardItem=function(){this.isDisposed||s.default.alertAndGetItem(this.theItemCanGet)&&(l.default.markSignGeted(),this.close())},t.prototype.onAdvShowSuc=function(e){"sign"==e.advName&&(this.theItemCanGet.itemId==a.ITEM_ID.GIRL?this.rewardItem():(this.theItemCanGet.count*=2,this.rewardItem()))},t.prototype.on_click_btnGet=function(){this.rewardItem()},t.prototype.on_click_btnAdv=function(){u.default.dispatchAdv("sign",!0)},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=d,cc._RF.pop()},{"../common/Const":"Const","../game/mgrGame":"mgrGame","../manager/mgrAdv":"mgrAdv","../manager/mgrAlert":"mgrAlert","../manager/mgrOperations":"mgrOperations","../manager/mgrPanel":"mgrPanel","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelTestHead:[function(e,t,n){"use strict";cc._RF.push(t,"5345aEA2ahN1KTgiFh3Blvv","PanelTestHead"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelTestHead",t.titleLabel=null,t.btnYes=null,t.head=null,t._exportNodeInfo=[{fieldName:"titleLabel",filedType:"cc.Label",fieldPath:"Bg/cc_titleLabel"},{fieldName:"btnYes",filedType:"cc.Button",fieldPath:"Bg/cc_btnYes"},{fieldName:"head",filedType:"cc.Sprite",fieldPath:"Bg/cc_head"}],t}return __extends(t,e),t.prototype.buildUi=function(){var e=this;cc.loader.load("http://192.168.1.248:5000/logo/logo.png",function(t,n){t?console.log("load head error: ",t):(cc.log("Should load a texture from external url: "+(n instanceof cc.Texture2D)),e.isDisposed||(e.head.spriteFrame=new cc.SpriteFrame(n)))})},t.prototype.on_click_btnYes=function(){this.close()},t}(e("./PanelBase").default);n.default=o,cc._RF.pop()},{"./PanelBase":"PanelBase"}],PanelTip:[function(e,t,n){"use strict";cc._RF.push(t,"1d9b9r9bU9PZ6Z3HPkZb+i2","PanelTip"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../manager/mgrPanel"),i=e("../common/Const"),r=e("../utils/UiHelper"),s=function(){function e(e){this.action=null,this.node=null,this.textLabel=null,this.animNode=null,this.node=e,this.action=cc.sequence(cc.spawn(cc.moveTo(.3,0,88),cc.fadeTo(.2,255)),cc.delayTime(3),cc.fadeTo(.2,0),cc.callFunc(this.onActionFinish,this)),this.animNode=e.getChildByName("AnimNode"),this.textLabel=r.default.getChildComponent(this.animNode,"Label",cc.Label)}return e.prototype.onActionFinish=function(){this.node.active=!1,this.resetNode()},e.prototype.resetNode=function(){this.animNode.setPosition(0,0),this.animNode.opacity=0},e.prototype.setText=function(e){this.textLabel.string=e.toString()},e.prototype.play=function(){this.node.active=!0,this.animNode.runAction(this.action)},e}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelLayer=a.PANEL_LAYER.TIP,t.panelStyle=a.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelTip",t.textNode=null,t._exportNodeInfo=[{fieldName:"textNode",filedType:"cc.Node",fieldPath:"cc_textNode"}],t.textItem=null,t.textList=[],t.nextTime=-1,t}return __extends(t,e),t.prototype.buildUi=function(){var e;this.textItem=new s(this.textNode),this.textNode.active=!1,this.registerMsg(((e={})[i.MSG.SHOW_TIP]=this.onMsgShowTip.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this)},t.prototype.update=function(e){this.nextTime>0&&(this.nextTime-=e,this.nextTime<=0&&this.showNext())},t.prototype.onMsgShowTip=function(e){this.textList.push(e),this.showNext()},t.prototype.showNext=function(){var e=this.textList.shift();this.textItem.setText(e),this.textItem.play()},t}(o.default);n.default=l,cc._RF.pop()},{"../common/Const":"Const","../manager/mgrPanel":"mgrPanel","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelTuJian:[function(e,t,n){"use strict";cc._RF.push(t,"ffc75YzUnlN2qZyL4a+/ghT","PanelTuJian"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../game/mgrGame"),i=e("../utils/UiHelper"),r=e("../generate/db"),s=e("../common/Const"),l=e("../manager/mgrPanel"),c=e("../game/CharView"),u=e("../_G"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelStyle=l.PANEL_STYLE.COMMON,t.prefabName="prefab/ui/PanelTuJian",t.roleItem=null,t.btnClose=null,t._exportNodeInfo=[{fieldName:"roleItem",filedType:"cc.Sprite",fieldPath:"ScrollBg/ScrollView/view/content/cc_roleItem"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"ScrollBg/cc_btnClose"}],t.flowers=[],t}return __extends(t,e),t.prototype.buildUi=function(){for(var e=this.roleItem.node,t=[e],n=1;n<a.default.flower_level_max;n++){var o=cc.instantiate(e);o.setParent(e.parent),t.push(o)}for(n=0;n<t.length;n++){var i=t[n];this.initItem(i,n+1)}},t.prototype.dispose=function(){for(var t=0;t<this.flowers.length;t++){var n=this.flowers[t];n.viewNode.color=cc.Color.WHITE,n.viewNode.opacity=255,u.default.poolManager.put(n)}e.prototype.dispose.call(this)},t.prototype.initItem=function(e,t){var n=i.default.getChildLabel(e,"name"),o=i.default.getChildLabel(e,"cost"),l=i.default.getChildLabel(e,"output"),d=r.default.get_up_db(s.UpId.flower,t),f=u.default.poolManager.get(c.default,d.view);this.flowers.push(f),f.setCreateCallback(function(){f.setParent(e.getChildByName("view")),a.default.getCurMaxFlowerLevel()<t?(f.viewNode.color=cc.Color.BLACK.fromHEX("#141414"),f.viewNode.opacity=212,f.setTimeScale(0),n.string="???",o.string="???",l.string="???"):(n.string=d.name+"\uff08Lv."+t+"\uff09",o.string=a.default.formatBigNumber(d.reqCnt),l.string=a.default.formatBigNumber(d.output))}),f.create()},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=d,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../game/CharView":"CharView","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrPanel":"mgrPanel","../utils/UiHelper":"UiHelper","./PanelBase":"PanelBase"}],PanelWater:[function(e,t,n){"use strict";cc._RF.push(t,"e23155di+9G4a+kaBHJKW7y","PanelWater"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PanelBase"),a=e("../Config"),i=e("../manager/mgrOperations"),r=e("../utils/Tools"),s=e("../utils/Timer"),l=e("../_G"),c=e("../common/Const"),u=e("../manager/mgrItem"),d=e("../game/WaterEffect"),f=e("../manager/mgrAdv"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/ui/PanelWater",t.descLabel=null,t.animNode=null,t.btnClose=null,t.btnAdv=null,t.btnLabel=null,t.btnIcon=null,t.timeLabel=null,t._exportNodeInfo=[{fieldName:"descLabel",filedType:"cc.Label",fieldPath:"Bg/pnl/cc_descLabel"},{fieldName:"animNode",filedType:"cc.Node",fieldPath:"Bg/pnl/cc_animNode"},{fieldName:"btnClose",filedType:"cc.Button",fieldPath:"Bg/cc_btnClose"},{fieldName:"btnAdv",filedType:"cc.Button",fieldPath:"Bg/cc_btnAdv"},{fieldName:"btnLabel",filedType:"cc.Label",fieldPath:"Bg/cc_btnAdv/cc_btnLabel"},{fieldName:"btnIcon",filedType:"cc.Sprite",fieldPath:"Bg/cc_btnAdv/cc_btnIcon"},{fieldName:"timeLabel",filedType:"cc.Label",fieldPath:"Bg/cc_timeLabel"}],t.timer=null,t.effect=null,t}return __extends(t,e),t.prototype.buildUi=function(){var e,t=this;this.descLabel.string="\u6d47\u6c34"+a.default.coin_drop_duration+"\u79d2",this.refreshState();var n=new d.default;n.setCreateCallback(function(){n.setParent(t.animNode),n.stay()}),n.create(),this.effect=n,this.registerMsg(((e={})[c.MSG.ADV_SHOW_SUC]=this.onMsgAdvShowSuc.bind(this),e)),this.startProcMsg(),!f.default.checkActive("water")&&i.default.getWaterCount()<=0&&(this.btnAdv.node.active=!1),f.default.dispatchAdv("dialog_banner")},t.prototype.dispose=function(){this.stopProcMsg(),this.stopTimer(),this.effect&&this.effect.stop(),e.prototype.dispose.call(this),f.default.closeAdv("dialog_banner")},t.prototype.stopTimer=function(){this.timer&&(this.timer.stop(),this.timer=null)},t.prototype.refreshState=function(){this.stopTimer(),i.default.refreshWaterTime();var e=i.default.getWaterCount();e>0?(this.timeLabel.string="\u5269\u4f59\u6b21\u6570"+e,this.btnIcon.enabled=!1,this.btnLabel.node.x=0,this.btnLabel.string="\u5f00\u59cb"):(this.updateWater(),this.timer=new s.default(1,-1,this.updateWater.bind(this)),this.timer.start(!0))},t.prototype.updateWater=function(){var e=i.default.getLeftWaterTime();e<=0&&(this.stopTimer(),this.refreshState()),this.timeLabel.string="\u5012\u8ba1\u65f6:"+r.default.formatTime(e)},t.prototype.onMsgAdvShowSuc=function(e){"water"==e.advName&&(u.default.addItem(c.ITEM_ID.WATER,1),this.refreshState())},t.prototype.on_click_btnAdv=function(){i.default.getWaterCount()>0?(l.default.sendMsg(c.MSG.START_WATER_TIME),this.btnAdv.interactable=!1,this.btnClose.node.active=!1,this.effect.play(),this.effect=null,this.close()):f.default.dispatchAdv("water",!0)},t.prototype.on_click_btnClose=function(){this.close()},t}(o.default);n.default=p,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../game/WaterEffect":"WaterEffect","../manager/mgrAdv":"mgrAdv","../manager/mgrItem":"mgrItem","../manager/mgrOperations":"mgrOperations","../utils/Timer":"Timer","../utils/Tools":"Tools","./PanelBase":"PanelBase"}],PoolManager:[function(e,t,n){"use strict";cc._RF.push(t,"10a3fSJ8ttB0Jkh9AWpxWaC","PoolManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.list=[],this.total=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this.list.length},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.total--,this.list.push(e)},e.prototype.pop=function(){return this.total++,this.list.pop()},e.prototype.getUsedCount=function(){return this.total},e}(),a=function(){function e(){this.pools=[],this.poolConfigs=[]}return e.prototype._getPool=function(e,t){var n=this.pools[e];n||(n={},this.pools[e]=n);var a=n[t];return a||(a=new o,n[t]=a),a},e.prototype.register=function(e,t){var n={poolClass:e,maxCount:t};e.__pool_id=this.poolConfigs.length,this.poolConfigs.push(n)},e.prototype.get=function(e,t){var n=e.__pool_id;if(null!=n){var o=this.poolConfigs[n];if(o){null==t&&(t="__default__");var a=this._getPool(n,t).pop();return a||((a=new o.poolClass(t)).__pool_id=n,a.__pool_key=t),a.reuse(),a.__pool_flag_inpool=null,a}cc.warn('"PoolManager.get config not found! poolId = '+n+'"')}else cc.warn("PoolManager.get need a poolId")},e.prototype.put=function(e){if(e){var t=e.__pool_id,n=e.__pool_key;if(null!=t)if(n)if(cc.isValid(e)){var o=this.poolConfigs[t];if(o)if(e.__pool_flag_inpool)cc.warn("PoolManager.put obj is already in pool!");else{var a=this._getPool(t,n);a.length<o.maxCount?(e.unuse(),e.__pool_flag_inpool=!0,a.push(e)):e.cleanup()}else cc.warn("PoolManager.put config not found! poolId = "+t)}else cc.warn("PoolManager.put obj not valid.");else cc.warn("PoolManager.put obj.__pool_key not found!")}else cc.warn("PoolManager.put node is nil!")},e.prototype.clean=function(e,t){var n=e.__pool_id;for(var o in this.pools)if(null!=n||n==o){var a=this.pools[o];for(var i in a)if(!t||t==i)for(var r=a[i],s=r.length,l=0;l<s;l++){r.pop().cleanup()}}},e.prototype.debugInfo=function(){for(var e in cc.log("------ debug pools ------"),this.pools){var t=this.pools[e];for(var n in t){var o=t[n];cc.log("pool:"+e+"    key:"+n+"    cached:"+o.length+"    used:"+o.getUsedCount())}}},e}();n.default=a,cc._RF.pop()},{}],RedPoint:[function(e,t,n){"use strict";cc._RF.push(t,"3c0451hHdtDnJkXMQEqpWct","RedPoint"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./MsgHandler"),a=e("../utils/Timer"),i=e("../utils/Tools"),r=function(){function e(e,t,n,i){var r;void 0===i&&(i=1),this.node=null,this.msgHandler=null,this.checkFunc=null,this.checkDeltaTime=0,this.lastCheckTime=0,this.timer=null,this.node=e;var s=cc.sequence(cc.scaleTo(0,0),cc.spawn(cc.fadeIn(.1),cc.sequence(cc.delayTime(.8),cc.fadeOut(.2)),cc.scaleTo(1,1.3).easing(cc.easeOut(3))),cc.delayTime(.5)).repeatForever();e.runAction(s),this.checkFunc=t,n?(this.msgHandler=new o.default,this.msgHandler.registerListeners(((r={})[n]=this.onRefreshMsg.bind(this),r)),this.msgHandler.startProcMsg()):(this.timer=new a.default(i,-1,this.onRefreshMsg.bind(this)),this.timer.start(!0)),this.checkDeltaTime=i,this.onRefreshMsg()}return e.prototype.dispose=function(){this.node.stopAllActions(),this.msgHandler&&(this.msgHandler.stopProcMsg(),this.msgHandler=null),this.timer&&(this.timer.stop(),this.timer=null)},e.prototype.onRefreshMsg=function(){var e=i.default.getTime();this.lastCheckTime<=e&&(this.lastCheckTime=e+this.checkDeltaTime,this.node.active=this.checkFunc())},e}();n.default=r,cc._RF.pop()},{"../utils/Timer":"Timer","../utils/Tools":"Tools","./MsgHandler":"MsgHandler"}],SceneBase:[function(e,t,n){"use strict";cc._RF.push(t,"c0575gNKJtAF6rjmV57xbDt","SceneBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.getPreprocessList=function(){return[]},e}();n.default=o,cc._RF.pop()},{}],SceneMain:[function(e,t,n){"use strict";cc._RF.push(t,"276af81XDJFVbY9z48tEQie","SceneMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../extensions/SceneBase"),a=e("../_G"),i=e("../game/Effect"),r=e("../game/JumpCoin"),s=e("../game/CharView"),l=e("../game/CharEffect"),c=e("../game/NumberEffect"),u=e("./ViewBase"),d=e("../manager/mgrPanel"),f=e("./PanelMain"),p=e("../game/mgrGame"),h=e("../generate/db"),g=e("../common/Const"),m=e("../game/FlyIcon"),_=e("../utils/Timer"),v=e("../manager/mgrRank"),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getPreloadResList=function(){var e=["prefab/ui/PanelDialog","prefab/ui/PanelMain","prefab/ui/PanelTip","prefab/ui/PanelPosNotEnought","prefab/ui/PanelRewardShow","prefab/ui/PanelGirlGift","prefab/ui/PanelHuaLing","prefab/ui/PanelGarden","prefab/ui/PanelCoinNotEnough","prefab/ui/PanelRewarFlyBox","prefab/ui/PanelRewardAch","prefab/game/EffectColorStar","prefab/game/Girl","prefab/game/FlyIcon","animation/defaultDialogOpen","animation/defaultDialogClose"],t=p.default.getCurMaxGirlLevel()+1;t=Math.min(t,p.default.girl_level_max);for(var n=0;n<t;n++)e.push(h.default.get_up_db(g.UpId.girl,n).view),e.push(h.default.get_up_db(g.UpId.flower,n).view);return e},t.prototype.getPreprocessList=function(){return[this.initPhyManager,this.initPool,this.initGame]},t.prototype.initPhyManager=function(){},t.prototype.initPool=function(){a.default.poolManager.register(i.default,20),a.default.poolManager.register(s.default,100),a.default.poolManager.register(r.default,100),a.default.poolManager.register(l.default,10),a.default.poolManager.register(c.default,10),a.default.poolManager.register(m.default,20)},t.prototype.initGame=function(){u.default.setButtonClickSound("click"),cc.audioEngine.setMaxAudioInstance(6)},t.prototype.onEnter=function(e){d.default.openPanel(f.default),_.default.callLater(30,function(){v.default.commit(v.default.getPlayerScore()),_.default.callLoop(60,function(){v.default.commit(v.default.getPlayerScore())},!0)})},t.prototype.onExit=function(){},t}(o.default);n.default=y,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../extensions/SceneBase":"SceneBase","../game/CharEffect":"CharEffect","../game/CharView":"CharView","../game/Effect":"Effect","../game/FlyIcon":"FlyIcon","../game/JumpCoin":"JumpCoin","../game/NumberEffect":"NumberEffect","../game/mgrGame":"mgrGame","../generate/db":"db","../manager/mgrPanel":"mgrPanel","../manager/mgrRank":"mgrRank","../utils/Timer":"Timer","./PanelMain":"PanelMain","./ViewBase":"ViewBase"}],SpriteSheet:[function(e,t,n){"use strict";cc._RF.push(t,"ec5a5377TpLn7nFGRKzFYKW","SpriteSheet"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprites=[],t.fps=30,t.loop=!1,t.playOnLoad=!1,t.OnFinished=null,t.deltaTime=0,t.curTime=0,t.bStarted=!1,t.curIndex=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.playOnLoad&&this.play()},t.prototype.play=function(){this.bStarted=!0,this.deltaTime=1/this.fps,this.curTime=this.deltaTime,this.curIndex=0,this.spriteFrame=this.sprites[this.curIndex]},t.prototype.stop=function(){this.bStarted=!1},t.prototype.onFinish=function(){this.OnFinished&&this.OnFinished()},t.prototype.update=function(e){if(this.bStarted&&(this.curTime-=e,this.curTime<=0)){if(this.curTime=this.deltaTime,++this.curIndex>=this.sprites.length){if(!this.loop)return this.stop(),void this.onFinish();this.curIndex=0}this.spriteFrame=this.sprites[this.curIndex]}},__decorate([i([cc.SpriteFrame])],t.prototype,"sprites",void 0),__decorate([i],t.prototype,"fps",void 0),__decorate([i],t.prototype,"loop",void 0),__decorate([i],t.prototype,"playOnLoad",void 0),t=__decorate([a],t)}(cc.Sprite);n.default=r,cc._RF.pop()},{}],SpriteSwitcher:[function(e,t,n){"use strict";cc._RF.push(t,"f1858IqJUNLdrOiWZvpgRg0","SpriteSwitcher"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprites=[],t}return __extends(t,e),t.prototype.switchSprite=function(e){if(e<this.getSpritesCount()&&e!=this.spriteIndex){if(e<0)return this.enabled=!1,void(this.spriteIndex=e);this.spriteIndex<0&&(this.enabled=!0),this.spriteIndex=e,this.spriteFrame=this.sprites[e]}},t.prototype.getSpritesCount=function(){return this.sprites.length},__decorate([i([cc.SpriteFrame])],t.prototype,"sprites",void 0),t=__decorate([a],t)}(cc.Sprite);n.default=r,cc._RF.pop()},{}],TestScript:[function(e,t,n){"use strict";cc._RF.push(t,"d5ab9LEzEtH369YQC3fs/M+","TestScript"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=cc.director.getCollisionManager();e.enabled=!0,e.enabledDebugDraw=!0,e.enabledDrawBoundingBox=!0},t.prototype.start=function(){},t.prototype.onCollisionEnter=function(e,t){cc.log("------- onCollisionEnter",e.name,t.name,this.name)},t.prototype.onCollisionStay=function(e,t){},t.prototype.onCollisionExit=function(e,t){cc.log("------- onCollisionExit",t.name)},t.prototype.onBeginContact=function(e,t,n){cc.log("------- onBeginContact")},t.prototype.onEndContact=function(e,t,n){cc.log("------- onEndContact")},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],TestSpine:[function(e,t,n){"use strict";cc._RF.push(t,"97f85kJeARG+5gBLmA8N+md","TestSpine"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/mgrCfg"),a=cc._decorator,i=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){var e=this.getComponent(sp.Skeleton);this.spine=e},t.prototype.update=function(){},t.get_upItem_db_map=function(){return o.default.getDb("upItem_db")},t.get_upItem_db_id_map=function(e){return this.get_upItem_db_map()[e]},t.get_upItem_db_id_name_map=function(e,t){return this.get_upItem_db_map()[e][t]},t.get_upItem_db=function(e,t,n){return this.get_upItem_db_map()[e][t][n]},t=__decorate([i],t)}(cc.Component));n.default=r,cc._RF.pop()},{"../manager/mgrCfg":"mgrCfg"}],Timer:[function(e,t,n){"use strict";cc._RF.push(t,"af707ZGsddAw6Y8EhUu5MFa","Timer"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t,n){this._repeatCount=-1,this._span=1,this._callback=null,this._intervalId=null,this._count=0,this._bindingNode=null,this._span=e,this._repeatCount=t,this._callback=n}return e.callLater=function(t,n,o){var a=new e(t,1,n);o?a.startAndBindToNode(o):a.start()},e.callLoop=function(t,n,o){var a=new e(t,-1,n);if(1==o){var i=o;a.start(i)}else if(o instanceof cc.Node){a.startAndBindToNode(o)}else a.start()},e.startFrameLoop=function(e){var t=this;if(!this._TimerNode){var n=new cc.Node,o=n.addComponent(cc.Component);o.update=function(e){try{for(var n=0;n<t._FrameLoopList.length;n++){t._FrameLoopList[n].callback(e)}}catch(e){cc.error("[\u8b66\u544a] Timer.startFrameLoop has error",e)}},cc.director.getScheduler().enableForTarget(o),cc.director.getScheduler().scheduleUpdate(o,0,!1),this._TimerNode=n}if(e){var a=++this._TimerIncreaseId,i={callback:e,timerId:a};return this._FrameLoopList.push(i),a}return-1},e.stopFrameLoop=function(e){for(var t=!1,n=0;n<this._FrameLoopList.length;n++){if(this._FrameLoopList[n].timerId===e){t=!0,this._FrameLoopList.splice(n,1);break}}return t||cc.error("can't stopo frame loop timer["+e+"]"),t},e.prototype._onSpan=function(){if(this._count++,this._callback)try{this._callback(this)}catch(e){cc.error("[\u8b66\u544a] Timer._onSpan callback has error",e)}this._repeatCount>=0&&this._count>=this._repeatCount&&this.stop()},e.prototype.isRunning=function(){return null!=this._intervalId},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){return this._span},enumerable:!0,configurable:!0}),e.prototype.startAndBindToNode=function(e){var t=this,n=new cc.Node,o=n.addComponent(cc.Component);return 0==o._isOnLoadCalled?o.onLoad=function(){t.start(!0)}:this.start(!0),o.onDestroy=function(){t.stop()},n.parent=e,this._bindingNode=n,this},e.prototype.start=function(e){return void 0===e&&(e=!1),this.stop(),this._callback?(!e&&this._repeatCount<0&&(cc.warn("\u8b66\u544a] Timer.start, this timer will never stop!"),cc.warn("\u8b66\u544a]     please use startAndBindToNode"),cc.warn("\u8b66\u544a]     or your can stop timer in callback. use e:stop()")),this._count=0,this._intervalId=setInterval(this._onSpan.bind(this),1e3*this.span),this):(cc.warn("\u8b66\u544a] Timer.start callback\u672a\u8bbe\u7f6e\uff01"),this)},e.prototype.stop=function(){return null!=this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),cc.isValid(this._bindingNode)&&(this._bindingNode.destroy(),this._bindingNode=null),this},e._TimerNode=null,e._FrameLoopList=[],e._TimerIncreaseId=0,e}();n.default=o,cc._RF.pop()},{}],Tools:[function(e,t,n){"use strict";cc._RF.push(t,"5f44cAxCKpFNrELzjyCLhPo","Tools"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getTime=function(){return Date.now()/1e3},e._setDebugTime=function(e){this._debugTime=e},e.isOneDay=function(e,t){var n=new Date(1e3*e),o=new Date(1e3*t);return n.getFullYear()==o.getFullYear()&&n.getMonth()==o.getMonth()&&n.getDate()==o.getDate()},e.getMidnightTime=function(e){var t;return(t=null==e?new Date:new Date(1e3*e)).setHours(0,0,0,0),t.getTime()/1e3},e.getObjSize=function(t){if(!t)return 0;if(Array.isArray(t))return t.length;var n=0;return e.forEachMap(t,function(e,t){n++}),n},e.isWorldLocaInNode=function(e,t,n){var o=this.calcNodeBoundingBoxToWorld(e);return null!=n&&(o.x-=n,o.y-=n,o.width+=2*n,o.height+=2*n),o.contains(t)},e.calcRecursiveScale=function(e){var t=1;do{t*=e.getScale(),e=e.parent}while(null!=e);return t},e.forEachMap=function(e,t){if(e)for(var n=Object.keys(e),o=0;o<n.length;o++){var a=n[o],i=e[a];if(null!=i&&t(a,i))break}},e.splitToNumber=function(e,t){if(!e||!t)return[];for(var n=e.split(t),o=[],a=0;a<n.length;a++)o[a]=parseInt(n[a]);return o},e.convertRectToNodeSpace=function(e,t){if(!t)return null;var n=cc.v2(t.xMin,t.yMin),o=cc.v2(t.xMax,t.yMax);n=e.convertToNodeSpaceAR(n),o=e.convertToNodeSpaceAR(o);var a=Math.min(n.x,o.x),i=Math.min(n.y,o.y),r=Math.max(n.x,o.x)-a,s=Math.max(n.y,o.y)-i;return new cc.Rect(a,i,r,s)},e.convertRectToWorldSpace=function(e,t){if(!t)return null;var n=cc.v2(t.xMin,t.yMin),o=cc.v2(t.xMax,t.yMax);n=e.convertToWorldSpaceAR(n),o=e.convertToWorldSpaceAR(o);var a=Math.min(n.x,o.x),i=Math.min(n.y,o.y),r=Math.max(n.x,o.x)-a,s=Math.max(n.y,o.y)-i;return new cc.Rect(a,i,r,s)},e.calcNodeBoundingBoxToWorld=function(e,t){var n=e.getBoundingBox();return t&&(n.x-=t,n.y-=t,n.width+=2*t,n.height+=2*t),this.convertRectToWorldSpace(e.parent,n)},e.formatNumber=function(e,t,n){for(var o=e=Math.floor(e),a=1;(o/=10)>=1;)a++;if(a>=n)return e.toString();for(var i=n-a,r="",s=0;s<i;s++)r+=t;return r+e},e._formatTime=function(t,n){var o=Math.floor(t/3600),a=Math.floor(t/60)%60,i=Math.floor(t)%60;return n.match("%h")&&(n=n.replace("%h",o.toString())),n.match("%H")&&(n=n.replace("%h",e.formatNumber(o,"0",2))),n.match("%m")&&(n=n.replace("%m",a.toString())),n.match("%M")&&(n=n.replace("%M",e.formatNumber(a,"0",2))),n.match("%s")&&(n=n.replace("%s",i.toString())),n.match("%S")&&(n=n.replace("%S",e.formatNumber(i,"0",2))),n},e.formatTime=function(e){if(Math.floor(e)<=0)return"00:00";var t=Math.floor(e/3600),n=Math.floor(e/60)%60,o=Math.floor(e)%60,a="";return t>0&&(a=t>9?t+":":"0"+t+":"),a=n>9?""+a+n+":":a+"0"+n+":",a=o>9?""+a+o:a+"0"+o},e.formatFullTime=function(e){var t=new Date(e);t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds();return""},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},e.deepCopy=function(e){if(!e)return e;var t=e,n=null;if(t instanceof Array)n=[];else{if(!(t instanceof Object))return t;n={}}for(var o in t){var a=t[o];n[o]=this.deepCopy(a)}return n},e._debugTime=null,e}();n.default=o,cc._RF.pop()},{}],TweenActive:[function(e,t,n){"use strict";cc._RF.push(t,"abd28LShlhI+YYkGAlOG6Bg","TweenActive"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UITweener"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.value=!1,t}return __extends(t,e),t.prototype.start=function(){this.value=this.target.active,e.prototype.start.call(this)},t.prototype.OnUpdate=function(e,t){t&&(this.target.active=!this.target.active)},t.prototype.ResetToBeginning=function(){this.target.active=this.value,e.prototype.ResetToBeginning.call(this)},t.prototype.ResetToEnd=function(){this.target.active=!this.value,e.prototype.ResetToEnd.call(this)},__decorate([r(cc.Node)],t.prototype,"target",void 0),t=__decorate([i],t)}(o.default);n.default=s,cc._RF.pop()},{"./UITweener":"UITweener"}],TweenAlpha:[function(e,t,n){"use strict";cc._RF.push(t,"27c0chiNMpCs70r23Q258F2","TweenAlpha"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UITweener"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=255,t.to=0,t}return __extends(t,e),t.prototype.OnUpdate=function(e,t){this.node.opacity=this.from*(1-e)+this.to*e},__decorate([r],t.prototype,"from",void 0),__decorate([r],t.prototype,"to",void 0),t=__decorate([i],t)}(o.default);n.default=s,cc._RF.pop()},{"./UITweener":"UITweener"}],TweenCallbackDelay:[function(e,t,n){"use strict";cc._RF.push(t,"371eda+cCRLiL3IXikInYhu","TweenCallbackDelay"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UITweener"),a=cc._decorator.ccclass,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=!1,t}return __extends(t,e),t.prototype.OnUpdate=function(e,t){this.state=e<.5},t=__decorate([a],t)}(o.default);n.default=i,cc._RF.pop()},{"./UITweener":"UITweener"}],TweenColor:[function(e,t,n){"use strict";cc._RF.push(t,"91b374w3/FPCaOQS4Ar8nOQ","TweenColor"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UITweener"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=new cc.Color,t.to=new cc.Color,t}return __extends(t,e),t.prototype.OnUpdate=function(e,t){var n=this.from.getR()*(1-e)+this.to.getR()*e,o=this.from.getG()*(1-e)+this.to.getG()*e,a=this.from.getB()*(1-e)+this.to.getB()*e,i=this.from.getA()*(1-e)+this.to.getA()*e;this.node.color=cc.color(n,o,a),this.node.opacity=i},__decorate([r(cc.Color)],t.prototype,"from",void 0),__decorate([r(cc.Color)],t.prototype,"to",void 0),t=__decorate([i],t)}(o.default);n.default=s,cc._RF.pop()},{"./UITweener":"UITweener"}],TweenGroup:[function(e,t,n){"use strict";cc._RF.push(t,"80ae0b3mchADbkK9eSevX+K","TweenGroup"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UITweener"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.group=0,t.tweens=[],t}return __extends(t,e),t.prototype.onLoad=function(){for(var e=this.getComponentsInChildren(o.default),t=0;t<e.length;t++){var n=e[t];n.tweenGroup==this.group&&this.tweens.push(n)}},t.prototype.ResetToBeginning=function(){for(var e=0;e<this.tweens.length;e++){this.tweens[e].ResetToBeginning()}},t.prototype.PlayForward=function(){for(var e=0;e<this.tweens.length;e++){this.tweens[e].PlayForward()}},t.prototype.PlayReverse=function(){for(var e=0;e<this.tweens.length;e++){this.tweens[e].PlayReverse()}},t.prototype.Stop=function(){for(var e=0;e<this.tweens.length;e++){this.tweens[e].Stop()}},t.prototype.SetDuration=function(e){for(var t=0;t<this.tweens.length;t++){this.tweens[t].duration=e}},t.prototype.SetDelay=function(e){for(var t=0;t<this.tweens.length;t++){this.tweens[t].delay=e}},__decorate([r],t.prototype,"group",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./UITweener":"UITweener"}],TweenPosition:[function(e,t,n){"use strict";cc._RF.push(t,"dc5b0/XSY9LxbuTt5yD10mX","TweenPosition"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UITweener"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=new cc.Vec2,t.to=new cc.Vec2,t}return __extends(t,e),t.prototype.OnUpdate=function(e,t){var n=this.from.x*(1-e)+this.to.x*e,o=this.from.y*(1-e)+this.to.y*e;this.node.setPosition(n,o)},__decorate([r(cc.Vec2)],t.prototype,"from",void 0),__decorate([r(cc.Vec2)],t.prototype,"to",void 0),t=__decorate([i],t)}(o.default);n.default=s,cc._RF.pop()},{"./UITweener":"UITweener"}],TweenRotation:[function(e,t,n){"use strict";cc._RF.push(t,"3dd8f8HcLpErZiBgorGdRPY","TweenRotation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UITweener"),a=e("../utils/Mathf"),i=cc._decorator,r=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=0,t.to=0,t}return __extends(t,e),t.prototype.OnUpdate=function(e,t){this.node.rotation=a.default.Lerp(this.from,this.to,e)},__decorate([s],t.prototype,"from",void 0),__decorate([s],t.prototype,"to",void 0),t=__decorate([r],t)}(o.default);n.default=l,cc._RF.pop()},{"../utils/Mathf":"Mathf","./UITweener":"UITweener"}],TweenScale:[function(e,t,n){"use strict";cc._RF.push(t,"05127sq1cBIuadh0gF6otI4","TweenScale"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UITweener"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=new cc.Vec2(0,0),t.to=new cc.Vec2(1,1),t}return __extends(t,e),t.prototype.OnUpdate=function(e,t){var n=this.from.x*(1-e)+this.to.x*e,o=this.from.y*(1-e)+this.to.y*e;this.node.scaleX=n,this.node.scaleY=o},__decorate([r],t.prototype,"from",void 0),__decorate([r],t.prototype,"to",void 0),t=__decorate([i],t)}(o.default);n.default=s,cc._RF.pop()},{"./UITweener":"UITweener"}],UITweener:[function(e,t,n){"use strict";cc._RF.push(t,"9d5e8qRAyxOEIQyrpre/SNs","UITweener"),Object.defineProperty(n,"__esModule",{value:!0});var o,a,i,r=e("../Config"),s=e("../utils/Mathf"),l=cc._decorator,c=l.ccclass,u=l.property;(function(e){e[e.Linear=0]="Linear",e[e.EaseIn=1]="EaseIn",e[e.EaseOut=2]="EaseOut",e[e.EaseInOut=3]="EaseInOut",e[e.BounceIn=4]="BounceIn",e[e.BounceOut=5]="BounceOut",e[e.BounceOnce=6]="BounceOnce"})(o||(o={})),function(e){e[e.Once=0]="Once",e[e.Loop=1]="Loop",e[e.PingPong=2]="PingPong"}(a||(a={})),function(e){e[e.Reverse=-1]="Reverse",e[e.Toggle=0]="Toggle",e[e.Forward=1]="Forward"}(i||(i={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method=o.Linear,t.style=a.Once,t.ignoreTimeScale=!0,t.delay=0,t.duration=1,t.tweenGroup=0,t.startFromFrom=!0,t.startFactor=0,t.fixedUpdateDelta=!1,t._preview=0,t.mStarted=!1,t.mStartTime=0,t.mDuration=0,t.mAmountPerDelta=1e3,t.mFactor=0,t}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"preview",{get:function(){return this._preview},set:function(e){this._preview=e,this.OnUpdate(e,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amountPerDelta",{get:function(){return this.mDuration!=this.duration&&(this.mDuration=this.duration,this.mAmountPerDelta=Math.abs(this.duration>0?1/this.duration:1e3)*s.default.Sign(this.mAmountPerDelta)),this.mAmountPerDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this.amountPerDelta<0?i.Reverse:i.Forward},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.startFromFrom?(this.mFactor=this.amountPerDelta<0?1-this.startFactor:this.startFactor,this.Sample(this.mFactor,!1)):this.update(0)},t.prototype.update=function(e){var t=this.ignoreTimeScale?e:e*n.timeScale;this.fixedUpdateDelta&&(t=1/r.default.GameFrameRate),this.UpdateValue(t)},t.prototype.UpdateValue=function(e){this.mStarted||(this.mStarted=!0,this.mStartTime=this.delay),this.mStartTime>0?this.mStartTime-=e:(this.mFactor+=this.amountPerDelta*e,this.style==a.Loop?this.mFactor>1&&(this.mFactor-=Math.floor(this.mFactor)):this.style==a.PingPong&&(this.mFactor>1?(this.mFactor=1-(this.mFactor-Math.floor(this.mFactor)),this.mAmountPerDelta=-this.mAmountPerDelta):this.mFactor<0&&(this.mFactor=-this.mFactor,this.mFactor-=Math.floor(this.mFactor),this.mAmountPerDelta=-this.mAmountPerDelta)),this.style==a.Once&&(0==this.duration||this.mFactor>1||this.mFactor<0)?(this.mFactor=s.default.Clamp01(this.mFactor),this.Sample(this.mFactor,!0),(0==this.duration||1==this.mFactor&&this.mAmountPerDelta>0||0==this.mFactor&&this.mAmountPerDelta<0)&&(this.enabled=!1),this.OnFinished&&this.OnFinished()):this.Sample(this.mFactor,!1))},t.prototype.Sample=function(e,t){var a=s.default.Clamp01(e);this.method==o.Linear||(this.method==o.EaseIn?a=n.EaseInLogic(a):this.method==o.EaseOut?a=n.EaseOutLogic(a):this.method==o.EaseInOut?a=n.EaseInOutLogic(a):this.method==o.BounceIn?a=n.BounceLogic(a):this.method==o.BounceOut?a=1-n.BounceLogic(1-a):this.method==o.BounceOnce&&(a=n.BounceOnceLogic(a))),this.OnUpdate(a,t)},t.EaseInLogic=function(e){return 1-Math.sin(.5*Math.PI*(1-e))},t.EaseOutLogic=function(e){return Math.sin(.5*Math.PI*e)},t.EaseInOutLogic=function(e){var t=2*Math.PI;return e-Math.sin(e*t)/t},t.BounceLogic=function(e){return e<.363636?e*=7.5685*e:e=e<.727272?7.5625*(e-=.545454)*e+.75:e<.90909?7.5625*(e-=.818181)*e+.9375:7.5625*(e-=.9545454)*e+.984375,e},t.BounceOnceLogic=function(e){return e<.8?(e=s.default.Lerp(0,1,s.default.InverseLerp(0,.8,e)),s.default.Lerp(0,1.2,this.EaseInLogic(e))):(e=s.default.Lerp(0,1,s.default.InverseLerp(.8,1,e)),s.default.Lerp(1.2,1,this.EaseInLogic(e)))},t.prototype.PlayForward=function(){this.Play(!0)},t.prototype.PlayReverse=function(){this.Play(!1)},t.prototype.Play=function(e){this.mAmountPerDelta=Math.abs(this.amountPerDelta),e||(this.mAmountPerDelta=-this.mAmountPerDelta),this.enabled=!0,this.update(0)},t.prototype.ResetToBeginning=function(){this.mStarted=!1,this.mAmountPerDelta=Math.abs(this.amountPerDelta),this.mFactor=this.startFactor,this.Sample(this.mFactor,!1)},t.prototype.ResetToEnd=function(){this.mStarted=!1,this.mFactor=this.amountPerDelta<0?0:1,this.Sample(this.mFactor,!1)},t.prototype.Stop=function(){this.ResetToBeginning(),this.enabled=!1},t.prototype.Pause=function(){this.enabled=!1},t.prototype.Resume=function(){this.enabled=!0},t.prototype.ResetTo=function(e){this.OnUpdate(e,!1)},t.prototype.Toggle=function(){this.mFactor>0?this.mAmountPerDelta=-this.amountPerDelta:this.mAmountPerDelta=Math.abs(this.amountPerDelta),this.enabled=!0},t.Method=o,t.Style=a,t.Direction=i,t.timeScale=1,__decorate([u({type:cc.Enum(o)})],t.prototype,"method",void 0),__decorate([u({type:cc.Enum(a)})],t.prototype,"style",void 0),__decorate([u],t.prototype,"ignoreTimeScale",void 0),__decorate([u],t.prototype,"delay",void 0),__decorate([u],t.prototype,"duration",void 0),__decorate([u,u({type:cc.Integer,step:1})],t.prototype,"tweenGroup",void 0),__decorate([u],t.prototype,"startFromFrom",void 0),__decorate([u({type:cc.Float,min:0,max:1})],t.prototype,"startFactor",void 0),__decorate([u],t.prototype,"fixedUpdateDelta",void 0),__decorate([u({min:0,max:1,slide:!0,tooltip:"\u8bb0\u5f97\u5f520!!!!!!"})],t.prototype,"preview",null),t=n=__decorate([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Config":"Config","../utils/Mathf":"Mathf"}],ULCop:[function(e,t,n){"use strict";cc._RF.push(t,"923d6AskM1ARo5obfkWYWPx","ULCop"),Object.defineProperty(n,"__esModule",{value:!0}),n.IsGetCopData=void 0,n.getRequestUrl=i,n.initCopInfo=function(e,t,r,s){var l=i(e,t,r,s);console.log("initCopInfo.......channelId....",t);var c=o.getConfigByKey("netTimeout"),u="";u=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");u.open("get",l),u.send();var d=!1,f=setTimeout(function(){d=!0,u.abort()},c);u.onreadystatechange=function(){d&&(console.log("initCopInfo.......copJsonData....timeout..."),clearTimeout(f)),4==u.readyState&&200==u.status&&(a=u.responseText,console.log("initCopInfo.......copJsonData....",a)),n.IsGetCopData=!0}},n.getCopData=function(e,t){for(var n in t)e[n]=t[n];return JSON.stringify(function(e){if(null==a)return console.log("copObj.....copDataReplace........1111111.",a),e;var t=JSON.parse(a);if(console.log("copObj.....copDataReplace........222222.",a),t.hasOwnProperty("code")&&-1==t.code)return e;for(var n in t)e[n]=t[n];return e}(e))};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../ulsdkmanager/ulsdkmanager.js"));var a=null;n.IsGetCopData=!1;function i(e,t,n,o){return e=e+"?gameid="+n+"&qudao="+t+"&version="+o}cc._RF.pop()},{"../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],UiHelper:[function(e,t,n){"use strict";cc._RF.push(t,"9760cuKcsRMOaS6Zp/WwVs2","UiHelper"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ui/ViewBase"),a=e("../extensions/SpriteSwitcher"),i=function(){function e(){}return e.addClick=function(e,t,n){n&&(t=t.bind(n)),e.on("click",function(){o.default.playButtonClickSound(),t()})},e.addChildClick=function(e,t,n,o){if(t&&""!=t){var a=cc.find(t,e);this.addClick(a,n,o)}else this.addClick(e,n,o)},e.getChildComponent=function(e,t,n){return t&&""!=t?cc.find(t,e).getComponent(n):e.getComponent(n)},e.getChildLabel=function(e,t){return this.getChildComponent(e,t,cc.Label)},e.getChildSprite=function(e,t){return this.getChildComponent(e,t,cc.Sprite)},e.getChildSwitcher=function(e,t){return this.getChildComponent(e,t,a.default)},e.finishAction=function(e){e._elapsed=e._duration},e}();n.default=i,cc._RF.pop()},{"../extensions/SpriteSwitcher":"SpriteSwitcher","../ui/ViewBase":"ViewBase"}],ViewBase:[function(e,t,n){"use strict";cc._RF.push(t,"7fa68nt64tOerGSvju7Cywd","ViewBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/mgrRes"),a=e("../extensions/MsgHandler"),i=e("../manager/mgrAudio"),r=e("../utils/Timer"),s=function(){function e(e){this.isDisposed=!1,this.isLoaded=!1,this.resNode=null,this.context=null,this._exportNodeInfo=null,this.m_MsgHandler=null,this.m_TimerId=null,this.m_OnCreateCallback=null,this.context=e}return e.prototype.setContext=function(e){this.context=e},e.prototype.setCreateCallback=function(e){this.m_OnCreateCallback=e},e.prototype.create=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.prefabName?this.isLoaded?(this.m_OnCreateCallback&&(this.m_OnCreateCallback(),this.m_OnCreateCallback=null),[2]):(e=o.default.tryLoadRes(this.prefabName,cc.Prefab))?[3,2]:[4,o.default.promiseLoadAsset(this.prefabName,cc.Prefab)]:(cc.error("ViewBase can't find prefab name."),[2]);case 1:e=t.sent(),t.label=2;case 2:return this.onPrefabLoaded(e),[2]}})})},e.prototype.onPrefabLoaded=function(e){e&&(this.resNode=cc.instantiate(e),this.isDisposed?this.resNode.destroy():(this.isLoaded=!0,this.loadExportNode(),this.onCreateComplete(),this.m_OnCreateCallback&&this.m_OnCreateCallback(),this.update&&(this.m_TimerId=r.default.startFrameLoop(this.update.bind(this)))))},e.setButtonClickSound=function(e){this.m_buttonClickSoundName=e},e.playButtonClickSound=function(){this.m_buttonClickSoundName&&i.default.playSound(this.m_buttonClickSoundName)},e.prototype.loadExportNode=function(){if(this._exportNodeInfo)for(var t=function(t){var o=n._exportNodeInfo[t],a=cc.find(o.fieldPath,n.resNode);if("cc.Node"==o.filedType)n[o.fieldName]=a;else if(n[o.fieldName]=a.getComponent(o.filedType),"cc.Button"==o.filedType){var i="on_click_"+o.fieldName;if(n[i]&&"function"==typeof n[i]){var r=n[i].bind(n);a.on("click",function(){e.playButtonClickSound(),r()})}}else if("cc.Toggle"==o.filedType){i="on_click_"+o.fieldName;if(n[i]&&"function"==typeof n[i]){var s=n[i].bind(n);a.on("toggle",function(){e.playButtonClickSound(),s()})}}},n=this,o=0;o<this._exportNodeInfo.length;o++)t(o)},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isLoaded&&(this.isLoaded=!1,null!=this.m_TimerId&&(r.default.stopFrameLoop(this.m_TimerId),this.m_TimerId=null),this.resNode&&this.resNode.destroy(),this.resNode=null))},e.prototype.setParent=function(e){this.isLoaded&&(this.resNode.parent=e)},e.prototype.getParent=function(){return this.isLoaded?this.resNode.parent:null},e.prototype.removeFromParent=function(e){void 0===e&&(e=!1),this.isLoaded&&this.resNode.removeFromParent(e)},e.prototype.setPosition=function(e,t){this.isLoaded&&this.resNode.setPosition(e,t)},e.prototype.setWorldPosition=function(e){this.isLoaded&&(this.resNode.parent&&(e=this.resNode.parent.convertToNodeSpaceAR(e)),this.resNode.position=e)},e.prototype.setScale=function(e,t){this.isLoaded&&this.resNode.setScale(e,t)},e.prototype.show=function(){this.isLoaded&&(this.resNode.active=!0)},e.prototype.hide=function(){this.isLoaded&&(this.resNode.active=!1)},e.prototype.runAction=function(e){if(this.isLoaded)return this.resNode.runAction(e)},e.prototype.stopAllActions=function(){this.isLoaded&&this.resNode.stopAllActions()},e.prototype.setSiblingIndex=function(e){this.isLoaded&&this.resNode.setSiblingIndex(e)},e.prototype.getChild=function(e){if(this.isLoaded)return cc.find(e,this.resNode)},e.prototype.getChildComponent=function(e,t){if(this.isLoaded)return cc.find(e,this.resNode).getComponent(t)},e.prototype.registerMsg=function(e){this.m_MsgHandler||(this.m_MsgHandler=new a.default),this.m_MsgHandler.registerListeners(e)},e.prototype.startProcMsg=function(){this.m_MsgHandler&&this.m_MsgHandler.startProcMsg()},e.prototype.stopProcMsg=function(){this.m_MsgHandler&&this.m_MsgHandler.stopProcMsg()},e.m_buttonClickSoundName=null,e}();n.default=s,cc._RF.pop()},{"../extensions/MsgHandler":"MsgHandler","../manager/mgrAudio":"mgrAudio","../manager/mgrRes":"mgrRes","../utils/Timer":"Timer"}],WaterEffect:[function(e,t,n){"use strict";cc._RF.push(t,"73d9c1nnAxDaKJY9LoDgc5n","WaterEffect"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ui/ViewBase"),a=e("../manager/mgrPanel"),i=e("../_G"),r=e("../common/Const"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="prefab/game/WaterEffect",t.spine=null,t.playing=!1,t}return __extends(t,e),t.prototype.onCreateComplete=function(){var e;this.spine=this.getChildComponent("View",sp.Skeleton),this.registerMsg(((e={})[r.MSG.END_WATER_TIME]=this.onMsgEndWaterTime.bind(this),e)),this.startProcMsg()},t.prototype.dispose=function(){this.stopProcMsg(),e.prototype.dispose.call(this)},t.prototype.onMsgEndWaterTime=function(){this.stop()},t.prototype.stay=function(){this.isLoaded&&this.spine.setAnimation(0,"l1",!1)},t.prototype.play=function(){if(this.isLoaded)if(this.playing)cc.error("water effect is playing!");else{this.setParent(a.default.getLayerNode(a.PANEL_LAYER.UI)),this.spine.setAnimation(0,"l2",!0);var e=.5*i.default.canvasWidth-70,t=cc.sequence(cc.spawn(cc.moveTo(1,e,400).easing(cc.easeOut(1.5)),cc.scaleTo(1,1)),cc.sequence(cc.moveTo(5,100-e,400),cc.moveTo(5,e,400)).repeat(20));this.resNode.runAction(t)}},t.prototype.stop=function(){this.isLoaded&&this.resNode.stopAllActions(),this.dispose()},t}(o.default);n.default=s,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../manager/mgrPanel":"mgrPanel","../ui/ViewBase":"ViewBase"}],_G:[function(e,t,n){"use strict";cc._RF.push(t,"7b00cQeEahNoIQmaA8NhFTT","_G"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./extensions/MsgHandler"),a=e("./extensions/PoolManager"),i=function(){function e(){}return e.sendMsg=function(e,t){this.m_MsgHandler.sendMsg(e,t)},Object.defineProperty(e,"canvasWidth",{get:function(){return cc.view.getDesignResolutionSize().width},enumerable:!0,configurable:!0}),Object.defineProperty(e,"canvasHeight",{get:function(){return cc.view.getDesignResolutionSize().height},enumerable:!0,configurable:!0}),e.m_MsgHandler=new o.default,e.poolManager=new a.default,e}();n.default=i,cc._RF.pop()},{"./extensions/MsgHandler":"MsgHandler","./extensions/PoolManager":"PoolManager"}],_mgrBase:[function(e,t,n){"use strict";cc._RF.push(t,"0dd89AuN+9LAqnLGJ3toi8C","_mgrBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../extensions/MsgHandler"),a=function(){function e(){}return e.onload=function(){cc.warn("please override this function")},e.start=function(){},e.registerMsg=function(e){this.m_MsgHandler.registerListeners(e),this.m_MsgHandler.startProcMsg()},e.sendMsg=function(e,t){this.m_MsgHandler.sendMsg(e,t)},e.m_MsgHandler=new o.default,e}();n.default=a,cc._RF.pop()},{"../extensions/MsgHandler":"MsgHandler"}],cConfig:[function(e,t,n){"use strict";cc._RF.push(t,"faddcDUXiRCa6qsveTNmIHm","cConfig"),Object.defineProperty(n,"__esModule",{value:!0});n.cConfig='{\n\t"gameId": "45",\n\t"gameName":"\u82b1\u82b1\u59d1\u5a18\u82b1\u8bed\u5947\u7f18",\n\t"gameVersion": "100",\n\t"cdk_app_id": "",\n\t"megadataServerTypeId": "3",\n\t"megadataSwitch":false,\n\t"openPaySwitch": true,\n\t"setVersionDelay":3000,\n\t"popUpWindowSwitch": false,\n\t"gameOrientation":1,\n\t"popUpWindowMess": "\u516c\u544a\u4fe1\u606f.....",\n\t"payTimeout": 70000,\n\t"netTimeout":5000,\n\t"timerLoopTime": 5000,\n\t"timerStopTime": 240000,\n\t"copUrl": "https://copv6.ultralisk.cn/getdata/",\n\t"megadataUrl": "https://megadata.ultralisk.cn/appstatusrequest",\n\t"loginUrl": "https://sdkservertest.ultralisk.cn/userlogin",\n\t"useCDKEYUrl": "https://cdkey.ultralisk.cn/commoncdk/usecdk",\n\t"commonCopConfig": {\n\t\t\t"open_adv":"0;100;100;100;100;100;100;100"\n\t},\n\t"headline":{\n\t\t"cop_channelId":"147",\n\t\t"isOpenShare":0,\n\t\t"isUseSdkRank":false,\n\t\t"banner_adunit":"1od2sbebulbboiwwgo",\n\t\t"video_adunit":"o96kd5donlr8elmj2d",\n\t\t"bannerTimer":8000,\n\t\t"copDefaultConfig": {\t\t\n\t\t}\n\t},\n\t"oppoqg":{\n\t\t"cop_channelId":"146",\n\t\t"packageName":"cn.ultralisk.gameapp.game49.kyx.nearme.gamecenter",\n\t\t"appid":"30001503",\n\t\t"appkey":"cm7wjb9Og5k4sgoS4SkSG88w4",\n\t\t"appsecret":"649c810480f36F85C69138f875240a1b",\n\t\t"isOpenShare":0,\n\t\t"isUseSdkRank":false,\n\t\t"bannerId":"35964",\n\t\t"bannerTimer":15000,\n\t\t"interstitialId":"35967",\n\t\t"videoId":"35972",\n\t\t"nativeAdvId":"35971",\n\t\t"copDefaultConfig": {\t\t\n\t\t}\n\t},\n\t"oppo":{\n\t\t"cop_channelId":"135",\n\t\t"packageName":"cn.ultralisk.gameapp.game49.nearme.gamecenter",\n\t\t"appid":30000816,\n\t\t"appkey":"a2LkBwc8urk0gckkCkSg8kGCC",\n\t\t"appsecret":"2070aaf9b9e1292285D1280f1bf389d6",\n\t\t"mediaId":"101000132",\n\t\t"bannerId":"28557",\n\t\t"interstitialId":"28558",\n\t\t"videoId":"30391",\n\t\t"interstitialTimer":120000,\n\t\t"bannerTimer":300000,\n\t\t"isOpenShare":0,\n\t\t"isUseSdkRank":false,\n\t\t"copDefaultConfig":{\t\t\n\t\t}\n\t},\n\t"vivo": {\n\t\t"cop_channelId": "136",\n\t\t"appid":"ab78435c331b4129b625373934d0f5c1",\n\t\t"bannerId":"aa506f1f8dc34f3495442f6c99c29d35",\n\t\t"interstitialId":"ab48381138b24391bf3311ec9b103536",\n\t\t"videoId":"",\n\t\t"isOpenShare":0,\n\t\t"isUseSdkRank":false,\n\t\t"copDefaultConfig": {\n\t\t\t"banner_timer":30000,\n\t\t\t"interstitial_timer":10000\t\t\n\t\t}\n\t},\n\t"limi":{\n\t\t"cop_channelId": "137",\n\t\t"gameId": "4581",\n\t\t"appId": "101520843",\t\n\t\t"bannerViewId":1001,\n\t\t"rankNameList":{\n\t\t\t"score":"\u5e78\u8fd0\u5927\u5956\u8d5b",\n\t\t\t"scoreOrder":1,\n\t\t\t"\u5e78\u8fd0\u5927\u5956\u8d5b":"score",\n\t\t\t"\u8d85\u7ea7\u6392\u4f4d\u8d5b":"a1",\n\t\t\t"\u8fb9\u5883\u8d5b":"a3"\n\t\t},\n\t\t"isOpenShare":1,\n\t\t"isUseSdkRank":false,\n\t\t"shareTitle":"\u52aa\u529b\u5954\u8dd1\u5427\uff01\u9a9a\u5e74",\n\t\t"shareImgUrl":"https://gamesres.ultralisk.cn/notice/sharegames/game49/qqplay.jpg",\n\t\t"bannerTimer":10,\n\t\t"jumpGames":{\n\t\t\t"49": 4581,\n            "52": 4862,\n            "53": 5178,\n            "54": 5506,\n            "55": 5499\n\t\t},\n\t\t"copDefaultConfig": {}\n\t},\n\t"weixin": {\n\t\t"cop_channelId": "138",\n\t\t"appid": "wxcc8b86224e260cca",\n\t\t"loginUrl": "https://sdkserver.ultralisk.cn/wxuserlogin",\n\t\t"appsecret": "ac1cac32675caa402abc2d6bc2daf9ea",\n\t\t"offerId":"1450016792",\n\t\t"banner_adunit":"adunit-93533396d749feed",\n\t\t"video_adunit":"adunit-40d75f8ddd5989c1",\n\t\t"env":1,\n\t\t"mch_id":"1511216771",\n\t\t"bannerTimer":60000,\n\t\t"isOpenShare":1,\n\t\t"isUseSdkRank":false,\n\t\t"copDefaultConfig": {},\n\t\t"jumpGames": {\n\t\t\t"49": "wxcc8b86224e260cca",\n            "52": "wx8a2936c07c8d7d27",\n            "53": "wxeab8875f495561a5",\n            "54": "wxff9a948a14140eaa",\n            "55": "wx4f87cd56ed816382"\n\t\t},\t\t\n\t\t"shareTitle":"\u52aa\u529b\u5954\u8dd1\u5427\uff01\u9a9a\u5e74",\n\t\t"shareImgUrl":"https://gamesres.ultralisk.cn/notice/sharegames/game49/weixin.jpg"\n\t},\n\t"xiaomi": {\n\t\t"cop_channelId": "139",\n\t\t"isOpenShare":0,\n\t\t"isUseSdkRank":false,\n\t\t"copDefaultConfig": {\t\t\n\t\t}\n\t},\n\t"m4399mingame": {\n\t\t"cop_channelId": "140",\n\t\t"isOpenShare":1,\n\t\t"isUseSdkRank":false,\n\t\t"copDefaultConfig": {\t\t\n\t\t}\n\t},\n\t"taptap": {\n\t\t"cop_channelId": "141",\n\t\t"isOpenShare":0,\n\t\t"isUseSdkRank":false,\n\t\t"copDefaultConfig": {\t\t\n\t\t}\n\t},\n\t"baidu": {\n\t\t"cop_channelId": "142",\n\t\t"isOpenShare":0,\n\t\t"isUseSdkRank":false,\n\t\t"appSid":"bf52cdcc",\n\t\t"bannerTimer":60000,\n\t\t"bannerId":"6098173",\n\t\t"videoId":"6098174",\n\t\t"copDefaultConfig": {\t\t\n\t\t}\n\t},\n\t"m360": {\n\t\t"cop_channelId": "143",\n\t\t"isOpenShare":0,\n\t\t"isUseSdkRank":false,\n\t\t"copDefaultConfig": {\t\t\n\t\t}\n\t},\n\t"pay_code": {\n\t\t"2": {\n\t\t\t"payCode": "11002",\n\t\t\t"price": "30",\n\t\t\t"limi_payId":1,\n\t\t\t"proName": "\u8d85\u503c\u94bb\u77f3\u5305"\n\t\t},\n\t\t"3": {\n\t\t\t"payCode": "11003",\n\t\t\t"price": "30",\n\t\t\t"limi_payId":2,\n\t\t\t"proName": "\u8d85\u503c\u91d1\u5e01\u5305"\n\t\t},\n\t\t"4": {\n\t\t\t"payCode": "11004",\n\t\t\t"price": "6",\n\t\t\t"limi_payId":3,\n\t\t\t"proName": "\u523b\u82e6\u4f53\u529b\u5305"\n\t\t},\n\t\t"5": {\n\t\t\t"payCode": "11005",\n\t\t\t"price": "6",\n\t\t\t"limi_payId":4,\n\t\t\t"proName": "\u5c11\u91cf\u94bb\u77f3"\n\t\t},\n\t\t"6": {\n\t\t\t"payCode": "11006",\n\t\t\t"price": "12",\n\t\t\t"limi_payId":5,\n\t\t\t"proName": "\u4e2d\u91cf\u94bb\u77f3"\n\t\t},\n\t\t"9": {\n\t\t\t"payCode": "11009",\n\t\t\t"price": "6",\n\t\t\t"limi_payId":6,\n\t\t\t"proName": "\u5c11\u91cf\u91d1\u5e01"\n\t\t},\n\t\t"10": {\n\t\t\t"payCode": "11010",\n\t\t\t"price": "12",\n\t\t\t"limi_payId":7,\n\t\t\t"proName": "\u5927\u91cf\u91d1\u5e01"\n\t\t},\n\t\t"11": {\n\t\t\t"payCode": "11011",\n\t\t\t"price": "25",\n\t\t\t"limi_payId":8,\n\t\t\t"proName": "\u5ba0\u7269\u5168\u5bb6\u6b22"\n\t\t},\n\t\t"12": {\n\t\t\t"payCode": "11012",\n\t\t\t"price": "1",\n\t\t\t"limi_payId":9,\n\t\t\t"proName": "\u9996\u51b2\u793c\u5305"\n\t\t},\n\t\t"13": {\n\t\t\t"payCode": "11013",\n\t\t\t"price": "12",\n\t\t\t"limi_payId":10,\n\t\t\t"proName": "\u534e\u4e3d\u65f6\u88c5\u5305"\n\t\t},\n\t\t"14": {\n\t\t\t"payCode": "11014",\n\t\t\t"price": "18",\n\t\t\t"limi_payId":11,\n\t\t\t"proName": "\u68a6\u5e7b\u65f6\u88c5\u5305"\n\t\t},\n\t\t"15": {\n\t\t\t"payCode": "11015",\n\t\t\t"price": "25",\n\t\t\t"limi_payId":12,\n\t\t\t"proName": "\u5962\u534e\u65f6\u88c5\u5305"\n\t\t},\n\t\t"16": {\n\t\t\t"payCode": "11016",\n\t\t\t"price": "68",\n\t\t\t"limi_payId":13,\n\t\t\t"proName": "\u53cc\u500d\u94bb\u77f3\u5305"\n\t\t},\n\t\t"23": {\n\t\t\t"payCode": "11023",\n\t\t\t"price": "68",\n\t\t\t"limi_payId":15,\n\t\t\t"proName": "\u53cc\u500d\u91d1\u5e01\u5305"\n\t\t}\n\t}\n}';cc._RF.pop()},{}],db:[function(e,t,n){"use strict";cc._RF.push(t,"0b736ob4ZRDAqysi+/i4Hqd","db"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/mgrCfg"),a=function(){function e(){}return e.get_item_db_map=function(){return o.default.getDb("item_db")},e.get_item_db=function(e){return this.get_item_db_map()[e]},e.get_pay_db_map=function(){return o.default.getDb("pay_db")},e.get_pay_db=function(e){return this.get_pay_db_map()[e]},e.get_upItem_db_map=function(){return o.default.getDb("upItem_db")},e.get_upItem_db=function(e){return this.get_upItem_db_map()[e]},e.get_quest_db_map=function(){return o.default.getDb("quest_db")},e.get_quest_db=function(e){return this.get_quest_db_map()[e]},e.get_badword_db_arr=function(){return o.default.getDb("badword_db")},e.get_badword_db=function(e){return this.get_badword_db_arr()[e]},e.get_adv_db_map=function(){return o.default.getDb("adv_db")},e.get_adv_db=function(e,t){return this.get_adv_db_map()[e][t]},e.get_goal_db_map=function(){return o.default.getDb("goal_db")},e.get_goal_db=function(e){return this.get_goal_db_map()[e]},e.get_switch_db_map=function(){return o.default.getDb("switch_db")},e.get_switch_db=function(e){return this.get_switch_db_map()[e]},e.get_drop_db_map=function(){return o.default.getDb("drop_db")},e.get_drop_db=function(e){return this.get_drop_db_map()[e]},e.get_role_db_map=function(){return o.default.getDb("role_db")},e.get_role_db=function(e){return this.get_role_db_map()[e]},e.get_up_db_map=function(){return o.default.getDb("up_db")},e.get_up_db=function(e,t){return this.get_up_db_map()[e][t]},e.get_name_db_arr=function(){return o.default.getDb("name_db")},e.get_name_db=function(e){return this.get_name_db_arr()[e]},e}();n.default=a,cc._RF.pop()},{"../manager/mgrCfg":"mgrCfg"}],debugFollow:[function(e,t,n){"use strict";cc._RF.push(t,"ddf45WKr2lPnJBAhgprGGyU","debugFollow"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.followAction=cc.follow(this.targetNode,cc.rect(0,0,2e3,2e7))},t.prototype.start=function(){},__decorate([i(cc.Node)],t.prototype,"targetNode",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],httprequest:[function(e,t,n){"use strict";cc._RF.push(t,"873bce6F+JFxqZ+z3JOF5VH","httprequest"),Object.defineProperty(n,"__esModule",{value:!0}),n.useCdkey=function(e){var t=e.userId,n=e.cdkStr,a=e.channelId,i=o.getConfigByKey("cdk_app_id"),r=o.getConfigByKey("netTimeout"),s=o.getConfigByKey("useCDKEYUrl")+"?userId="+t+"&cdkStr="+n+"&appId="+i+"&channelId="+a;console.log(s);var l="";l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");l.open("get",s),l.send();var c=!1,u=setTimeout(function(){c=!0,l.abort()},r);l.onreadystatechange=function(){if(c){var e={cmd:"/c/useCdkey"},t={code:"-1",message:"\u8bf7\u6c42\u8d85\u65f6"};e.data=t;var n=JSON.stringify(e);o.manageSdkResponse(n)}if(clearTimeout(u),4==l.readyState&&200==l.status){var a=l.responseText;a=(a=(a=(a=a.replace('"[',"[")).replace(']"',"]")).replace('"0"','"1"')).replace("message","data");var i=JSON.parse(a);console.log("success.....loginRequest.....",i);var r={cmd:"/c/useCdkey"};r.data=i;var n=JSON.stringify(r);o.manageSdkResponse(n)}}},n.postMegaData=function(e,t){if(!o.getConfigByKey("megadataSwitch")){var n={cmd:"/c/megadataServer"},a={code:"1",message:"\u5927\u6570\u636e\u4e0a\u4f20\u5f00\u5173\u6ca1\u6253\u5f00!"};n.data=a;var i=JSON.stringify(n);return void o.manageSdkResponse(i)}var r=o.getCurrentChannel(),s=o.getConfigByKey("gameId"),l=o.getConfigByKey("megadataServerTypeId"),c=o.getConfigByKey("netTimeout"),u=o.getConfigByKey("megadataUrl");console.log("postMegaData....",s,o),e.unshift(s,t,r);var d={};d.typeid=l,d.updata=e;var f="updata="+JSON.stringify(d),p="";p=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");p.open("post",u,!0),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),p.send(f);var h=!1,g=setTimeout(function(){h=!0,p.abort()},c);p.onreadystatechange=function(){if(h){console.log("\u5927\u6570\u636e\u8bf7\u6c42--------------\u8d85\u65f6\uff01");var e={cmd:"/c/megadataServer"},t={code:"-1",message:"\u8bf7\u6c42\u8d85\u65f6"};e.data=t;var n=JSON.stringify(e);return o.manageSdkResponse(n),void clearTimeout(g)}if(clearTimeout(g),4==p.readyState&&200==p.status){var a=p.responseText,i={};console.log("success.....postMegaData..resultData...",a);var r={cmd:"/c/megadataServer"};"Successful"==a?(i.code="1",i.message="Successful",console.log("\u5927\u6570\u636e\u8bf7\u6c42--------------Successful\uff01")):(i.code="0",i.message=a),r.data=i;var s=JSON.stringify(r);o.manageSdkResponse(s)}}},n.channelLogin=function(e,t){var n=o.getConfigByKey("netTimeout"),i="userId="+e,r=o.getConfigByKey("loginUrl"),s=o.getCurrentModule();console.log("channelLogin---loginData:",e);try{var l="";(l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("post",r,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.send(i);var c=!1,u=setTimeout(function(){c=!0,l.abort()},n);l.onreadystatechange=function(){if(c)return console.log("\u767b\u5f55\u8bf7\u6c42-\u652f\u4ed8\u6570\u636e---------------\u8d85\u65f6\uff01"),void clearTimeout(u);if(clearTimeout(u),4==l.readyState&&200==l.status){var e=l.responseText;""==e||null==e||void 0==e?console.log("channelLogin--\u670d\u52a1\u7aef\u6570\u636e\u83b7\u53d6\u5f02\u5e38"):"empty"==e?console.log("channelLogin---\u65e0\u652f\u4ed8\u672a\u53d1\u8d27\u8ba2\u5355"):(s.LoginCallback(JSON.parse(e)),"1"==t&&(console.log("ChannelLogin---:\u5b9a\u65f6\u5668\u83b7\u53d6\u5230\u6570\u636e,\u5173\u95ed\u5b9a\u65f6\u5668\u907f\u514d\u591a\u4f59\u8bf7\u6c42\u6d6a\u8d39\u8d44\u6e90-----"),clearTimeout(a.timer))),console.log("initCopInfo.......copJsonData....",e)}}}catch(e){console.log("channelLogin---\u5f02\u5e38\u4fe1\u606f:",e)}};var o=i(e("../ulsdkmanager/ulsdkmanager.js")),a=i(e("../sdktools/sdktools.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}console.log("httpRequest......",o),cc._RF.pop()},{"../sdktools/sdktools.js":"sdktools","../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],mgrAdv:[function(e,t,n){"use strict";cc._RF.push(t,"e55badu1wRK9aDO6VeJePb0","mgrAdv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("../utils/JsBridge"),i=e("../_G"),r=e("../utils/Tools"),s=e("../generate/db"),l=e("../Config"),c=e("./mgrAudio"),u=e("../common/Const"),d=e("../utils/Mathf"),f=e("./mgrGuide"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){a.registerCmd("/c/advShowResult",this.onAdvShowResult.bind(this))},t.getAdvDb=function(e){return s.default.get_adv_db(l.default.game_channel,e)},t.hotfixCop=function(e){var t=s.default.get_adv_db_map()[l.default.game_channel],n={};for(var o in t){var a=t[o];""!=a.copKey&&(n[a.copKey]=!0)}for(var i in n)this.COP[i]=r.default.splitToNumber(e[i],";");this.adv_click_type=parseInt(e.adv_click_type),this.inst_show_delta_time=parseInt(e.inst_show_delta_time)||5},t.onAdvShowResult=function(e){var t=e.code,n=JSON.parse(e.advData.userData||"{}");console.log("userData:",n);var o=this.getAdvDb(n.advName),a=e.msg;"1"==t?(o.pauseSound&&c.default.resume(),i.default.sendMsg(u.MSG.GAME_PAUSE,!1),i.default.sendMsg(u.MSG.ADV_SHOW_SUC,n)):"0"==t||"2"==t?(o.pauseSound&&c.default.resume(),i.default.sendMsg(u.MSG.GAME_PAUSE,!1)):"5"==t&&i.default.sendMsg(u.MSG.ADV_CLICK_SUC,n),console.log("adv result code["+t+"], msg["+a+"]")},t.dispatchAdv=function(e,t,n){(void 0===t&&(t=null),void 0===n&&(n=!1),this.hasAdv(e))&&(console.log("\u89e6\u53d1\u5e7f\u544a",e),(n||this.checkActive(e))&&(this.getAdvDb(e).pauseSound&&c.default.pause(),i.default.sendMsg(u.MSG.GAME_PAUSE,!0),this.dispatchToSdk(e,t)))},t.hasAdv=function(e){return!!this.getAdvDb(e)},t.getActive=function(e){if(this.debugMode)return!0;var t=this.getAdvDb(e);return t?0!==this.getCopRatByKey(t.copKey,t.copIndex,t.defaultRate)||(console.log("\u6982\u7387\u65e0\u6548"),!1):(console.log("\u5e7f\u544adb\u4e3a\u7a7a"),!1)},t.checkActive=function(e){if(f.default.isGuiding)return!1;if(this.debugMode)return!0;var t=this.getAdvDb(e);return t?!(d.default.Random(100)>this.getCopRatByKey(t.copKey,t.copIndex,t.defaultRate))||(console.log("\u6982\u7387\u65e0\u6548"),!1):(console.log("\u5e7f\u544adb\u4e3a\u7a7a"),!1)},t.getCopRatByKey=function(e,t,n){return this.COP[e]&&t>=0&&t<this.COP[e].length?this.COP[e][t]:n},t.dispatchToSdk=function(e,t){void 0===t&&(t=null);var n={advName:e,params:t},o=this.getAdvDb(e);a.sendToSdk("/c/openAdv",{type:o.advType,userData:JSON.stringify(n)}),this.debugMode&&this.onAdvShowResult({code:1,advData:{userData:JSON.stringify(n)}})},t.closeAdv=function(e){var t=this.getAdvDb(e);a.sendToSdk("/c/closeAdv",{type:t.advType})},t.debugMode=!1,t.COP={},t.adv_click_type=0,t.inst_show_delta_time=5,t}(o.default);n.default=p,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../generate/db":"db","../utils/JsBridge":"JsBridge","../utils/Mathf":"Mathf","../utils/Tools":"Tools","./_mgrBase":"_mgrBase","./mgrAudio":"mgrAudio","./mgrGuide":"mgrGuide"}],mgrAlert:[function(e,t,n){"use strict";cc._RF.push(t,"4baa3NzuC5OGbpBT4O9c2FW","mgrAlert"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("./mgrPanel"),i=e("../ui/PanelDialog"),r=e("../generate/db"),s=e("../ui/PanelInput"),l=e("../_G"),c=e("../common/Const"),u=e("../ui/PanelRewardShow"),d=e("../ui/PanelGirlGift"),f=e("../game/mgrGame"),p=e("../ui/PanelPosNotEnought"),h=e("./mgrItem"),g=e("./mgrGuide"),m=e("../ui/PanelRewardAch"),_=e("../ui/PanelRewarFlyBox"),v=e("../ui/PanelCoinNotEnough"),y=e("../ui/PanelRewardOffline"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){},t.saveRecord=function(){},t.alertDialog=function(e,t,n,o){var r={desc:e,title:t,confirm:n,cancel:o};a.default.openPanel(i.default,r)},t.alertText=function(e){cc.log("alert:",e),l.default.sendMsg(c.MSG.SHOW_TIP,e)},t.alertItems=function(e){var t="";if(e instanceof Array)for(var n=0;n<e.length;n++){var o=e[n],a=r.default.get_item_db(o.itemId);t=0==n?"\u83b7\u5f97"+o.count+"\u4e2a"+a.name:t+", \u83b7\u5f97"+o.count+"\u4e2a"+a.name}else{a=r.default.get_item_db(e.itemId);t="\u83b7\u5f97"+e.count+"\u4e2a"+a.name}this.alertText(t)},t.alertNotEnough=function(e){var t=r.default.get_item_db(e);e==c.ITEM_ID.ENERGY?this.alertDialog(t.name+"\u4e0d\u8db3\uff0c\u5408\u6210\u82b1\u82b1\u59d1\u5a18\u83b7\u53d6\u66f4\u591a\u9732\u6c34"):this.alertDialog(t.name+"\u4e0d\u8db3~")},t.alertInput=function(e,t,n){var o={tip:e,confirm:t,cancel:n};a.default.openPanel(s.default,o)},t.alertAndGetItem=function(e,t,n){if(void 0===n&&(n=!1),e.itemId==c.ITEM_ID.GIRL){if(null==t){if((t=f.default.findGirlEmptyPos())<0)return a.default.openPanel(p.default),!1;f.default.buyGirl(e.count,t,!0)}return a.default.openPanel(d.default,{pos:t,anim:n}),!0}h.default.addItem(e.itemId,e.count);var o={itemId:e.itemId,count:e.count,adv:!1,isBig:!!t};return a.default.openPanelWithSingleton(u.default,o),!0},t.alertItemOnly=function(e,t){if(e.itemId==c.ITEM_ID.GIRL)a.default.openPanel(d.default,{pos:t,anim:!1});else{var n={itemId:e.itemId,count:e.count,adv:!1,isBig:!!t};a.default.openPanelWithSingleton(u.default,n)}},t.alertOfflineGains=function(e){if(!g.default.isGuiding){var t={itemId:c.ITEM_ID.COIN,count:e};a.default.openPanel(y.default,t)}},t.alertAchReward=function(e,t){a.default.openPanel(m.default,{questId:e,reward:t})},t.alertFlyBoxReward=function(e,t){a.default.openPanel(_.default,{adv:e,count:t})},t.alertCoinNotEnought=function(e){a.default.openPanel(v.default,{count:e})},t}(o.default);n.default=b,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../game/mgrGame":"mgrGame","../generate/db":"db","../ui/PanelCoinNotEnough":"PanelCoinNotEnough","../ui/PanelDialog":"PanelDialog","../ui/PanelGirlGift":"PanelGirlGift","../ui/PanelInput":"PanelInput","../ui/PanelPosNotEnought":"PanelPosNotEnought","../ui/PanelRewarFlyBox":"PanelRewarFlyBox","../ui/PanelRewardAch":"PanelRewardAch","../ui/PanelRewardOffline":"PanelRewardOffline","../ui/PanelRewardShow":"PanelRewardShow","./_mgrBase":"_mgrBase","./mgrGuide":"mgrGuide","./mgrItem":"mgrItem","./mgrPanel":"mgrPanel"}],mgrAudio:[function(e,t,n){"use strict";cc._RF.push(t,"6939bXLGFlNn6rJAEdQIFyK","mgrAudio"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./mgrRecord"),i=e("./_mgrBase"),r=e("./mgrRes");(function(e){e[e.MUSIC=0]="MUSIC",e[e.EFFECT=1]="EFFECT"})(o||(o={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this.loadRecord()},t.loadRecord=function(){var e=a.default.getData("_audio_info_")||{};this.musicOnOff=null==e.musicOnOff||e.musicOnOff,this.soundOnOff=null==e.soundOnOff||e.soundOnOff},t.saveRecord=function(){var e={musicOnOff:this.musicOnOff,soundOnOff:this.soundOnOff};a.default.setData("_audio_info_",e)},t.playMusic=function(e,t){return void 0===t&&(t=!0),__awaiter(this,void 0,void 0,function(){var n,o;return __generator(this,function(a){switch(a.label){case 0:return this.curMusicName=e,this.curMusicLoop=t,this.musicOnOff?(n="audio/music/"+e,(o=r.default.tryLoadRes(n,cc.AudioClip))?[3,2]:[4,r.default.promiseLoadAsset(n,cc.AudioClip)]):[2];case 1:o=a.sent(),a.label=2;case 2:return cc.audioEngine.playMusic(o,t),this.curPlayingMusicName=e,[2]}})})},t.stopMusic=function(){this.curMusicName&&(this.curMusicName=null,this.curPlayingMusicName=null,cc.audioEngine.stopMusic())},t.playSound=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(o){switch(o.label){case 0:return this.soundOnOff?(t="audio/sound/"+e,(n=r.default.tryLoadRes(t,cc.AudioClip))?[3,2]:[4,r.default.promiseLoadAsset(t,cc.AudioClip)]):[2];case 1:n=o.sent(),o.label=2;case 2:return cc.audioEngine.playEffect(n,!1),[2]}})})},t.stopSound=function(){cc.audioEngine.stopAllEffects()},t.setMusic=function(e){this.musicOnOff=e,this.saveRecord(),this.curMusicName&&(e?(cc.audioEngine.setMusicVolume(1),this.curPlayingMusicName?cc.audioEngine.resumeMusic():this.playMusic(this.curMusicName,this.curMusicLoop)):(cc.audioEngine.setMusicVolume(0),cc.audioEngine.pauseMusic()))},t.setSound=function(e){this.soundOnOff=e,this.saveRecord(),e||cc.audioEngine.stopAllEffects()},t.pause=function(){this.musicOnOff=!1,this.soundOnOff=!1,cc.audioEngine.pauseAll()},t.resume=function(){this.loadRecord(),this.setMusic(this.musicOnOff)},t.musicOnOff=!0,t.soundOnOff=!0,t.curMusicName=null,t.curPlayingMusicName=null,t.curMusicLoop=!0,t}(i.default);n.default=s,cc._RF.pop()},{"./_mgrBase":"_mgrBase","./mgrRecord":"mgrRecord","./mgrRes":"mgrRes"}],mgrCfg:[function(e,t,n){"use strict";cc._RF.push(t,"87ccffzdhVBK5IsrcHdEFxL","mgrCfg"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("./mgrRes"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(o){switch(o.label){case 0:return this.loaded?[2]:[4,a.default.promiseLoadAsset("cfg/CfgFiles",cc.JsonAsset)];case 1:if(!(e=o.sent())||!e.loaded)return cc.error("can't find CfgFiles."),[2];t=this.getLoadHandlers(e.json),n=0,o.label=2;case 2:return n<t.length?[4,(0,t[n])()]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return this.loaded=!0,[2]}})})},t.getLoadHandlers=function(e){for(var t=this,n=e,o=0;o<n.length;o++)n[o];var i=[],r=function(e){var o=n[e];i.push(function(){return __awaiter(t,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,a.default.promiseLoadAsset("cfg/"+o,cc.JsonAsset)];case 1:return(e=t.sent())&&e.loaded?this.allDbs[o]=e.json:cc.warn("\u8b66\u544a] \u914d\u7f6e\u8868\u52a0\u8f7d\u5931\u8d25\uff01",o),[2]}})})})};for(o=0;o<n.length;o++)r(o);var s=[],l=function(e){var n=s[e];i.push(function(){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return e.sent(),[2]}})})})};for(o=0;o<s.length;o++)l(o);return i},t.getDb=function(e){var t=this.allDbs[e];return t||cc.error("[\u8b66\u544a] mgrCfg.getDb db not found! dbName=["+e+"]"),t},t.loaded=!1,t.allDbs={},t.dbRules={},t.value=1,t}(o.default);n.default=i,cc._RF.pop()},{"./_mgrBase":"_mgrBase","./mgrRes":"mgrRes"}],mgrDrop:[function(e,t,n){"use strict";cc._RF.push(t,"04b6dKegONN2qOOjAdpfEOK","mgrDrop"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./_mgrBase"),i=e("./mgrRecord"),r=e("../generate/db"),s=e("../utils/Mathf"),l=e("./mgrSwitch");(function(e){e[e.MULTI=1]="MULTI",e[e.ONE_OR_NONE=2]="ONE_OR_NONE",e[e.ONE=3]="ONE",e[e.SEQUENCE=4]="SEQUENCE"})(o=n.DROP_TYPE||(n.DROP_TYPE={}));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this.m_lotteryData=i.default.getData("_lotter_data_")||{}},t.start=function(){},t.getAllDropItems=function(e){if(!e)return null;var t=r.default.get_drop_db(e);if(!t)return null;for(var n=[],o=0;o<t.items.length;o++){var a=t.items[o];n.push({itemId:a.id,count:a.max})}return n},t.saveDropRecord=function(){},t.makeDrop=function(e){if(!e)return null;var t=r.default.get_drop_db(e),n=t.items;switch(t.type){case o.MULTI:return this.makeDrop_singleRate(n);case o.ONE_OR_NONE:return this.makeDrop_roundRate(n);case o.ONE:return this.makeDrop_circleRate(n,t.sum);case o.SEQUENCE:cc.warn("please use makeLottery instead.");var a=this.makeLottery(e,!1);return a?[a]:[]}return null},t.makeDrop_singleRate=function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var o=e[n];s.default.Random(1e4),void 0<=o.rate&&t.push({itemId:o.id,count:s.default.Random(o.min,o.max)})}return t},t.makeDrop_circleRate=function(e,t){if(t<=0)return null;if(e)for(var n=s.default.Random(t),o=0;o<e.length;o++){var a=e[o];if(n<=a.rate)return[{itemId:a.id,count:s.default.Random(a.min,a.max)}];n-=a.rate}return null},t.makeDrop_roundRate=function(e){if(e)for(var t=s.default.Random(1e4),n=0;n<e.length;n++){var o=e[n];if(t<=o.rate)return[{itemId:o.id,count:s.default.Random(o.min,o.max)}];t-=o.rate}return null},t.saveLotteryRecord=function(){i.default.setData("_lotter_data_",this.m_lotteryData)},t.getLotteryActive=function(e){if(!e)return!1;var t=r.default.get_drop_db(e);return!(!t||t.type!=o.SEQUENCE)&&l.default.check(t.switchId)},t.getCurLotteryIndex=function(e){var t=this.m_lotteryData[e];return null==t?-1:t},t.makeLottery=function(e,t){if(!e)return null;var n=r.default.get_drop_db(e);if(!n||n.type!=o.SEQUENCE)return null;if(!l.default.check(n.switchId))return cc.log("---\x3e lottery not active ",e),null;t||l.default.active(n.switchId);var a=this.m_lotteryData[e];null==a&&(a=-1),(a+=1)>=n.items.length&&(a=n.loop?0:n.items.length-1),t||this.m_lotteryData[e]==a||(this.m_lotteryData[e]=a,this.saveLotteryRecord());var i=n.items[a];return{itemId:i.id,count:s.default.Random(i.min,i.max)}},t.m_lotteryData=null,t}(a.default);n.default=c,cc._RF.pop()},{"../generate/db":"db","../utils/Mathf":"Mathf","./_mgrBase":"_mgrBase","./mgrRecord":"mgrRecord","./mgrSwitch":"mgrSwitch"}],mgrGame:[function(e,t,n){"use strict";cc._RF.push(t,"706deg1NHFHbp0ekFogVf+A","mgrGame"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("../manager/_mgrBase"),i=e("../manager/mgrRecord"),r=e("../generate/db"),s=e("../common/Const"),l=e("../manager/mgrUp"),c=e("../manager/mgrItem"),u=e("../Config"),d=e("../utils/Timer"),f=e("../utils/Mathf"),p=e("../_G"),h=e("../manager/mgrAlert"),g=e("../manager/mgrGoal"),m=e("../manager/mgrAudio"),_=e("../manager/mgrPanel"),v=e("../ui/PanelPosNotEnought"),y=e("../utils/Tools"),b=e("../ui/PanelGirlReward"),S=e("../manager/mgrRank");(function(e){e[e.Fail=0]="Fail",e[e.Merge=1]="Merge",e[e.Move=2]="Move",e[e.Swap=3]="Swap"})(o=n.MoveState||(n.MoveState={}));function C(e,t){var n=f.default.roundPower10Double[t];return e*=n,Math.floor(e)/n}var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){},t.start=function(){this.girl_level_max=l.default.getMaxLevel(s.UpId.girl),this.flower_level_max=l.default.getMaxLevel(s.UpId.flower),this.soil_count_max=l.default.getMaxLevel(s.UpId.soil),this.loadRecord(),d.default.callLoop(1,this.update.bind(this),!0)},t.loadRecord=function(){if(this.m_data=i.default.getData("game54"),this.m_data){for(var e=this.getWorldTime();this.m_data.nextGenerateGirlTime<e;)this.autoGenerateGirl()||(this.m_data.nextGenerateGirlTime=e);var t=this.m_data.girls,n=0;for(h=0;h<t.length;h++){var o=t[h];o.level>0&&o.nextGainsTime<e&&(n=o.nextGainsTime,o.nextGainsTime=e+u.default.girl_gains_delta_time)}var a=Math.min(this.m_data.doubleOutptEndTime,e)-n;if(n>0){var l=this.getAllGirlOutput(),d=0;a>0&&(d=a*l),d+=Math.min(e-n,u.default.offline_gains_time)*l,c.default.addItem(s.ITEM_ID.COIN,d),this.offlineGains+=d}var f=this.m_data.flowers;for(h=0;h<f.length;h++){var p=f[h];if(p.level>0&&p.nextGainsTime<e){m=r.default.get_up_db(s.UpId.flower,p.level),d=0;a>0&&(d=a*m.output),d+=(e-p.nextGainsTime)*m.output,p.income=Math.min(p.income+d,m.capacity),p.nextGainsTime=e+u.default.flower_gains_delta_time}}}else{this.m_data={curMaxGirlLevel:1,nextGenerateGirlTime:this.getWorldTime()+u.default.auto_generate_girl_delta_time*u.default.game_time_scale,doubleOutptEndTime:0,girls:[],flowers:[],girlsPrice:[]};for(var h=0;h<u.default.girl_grid_item_count;h++)this.m_data.girls.push({level:0,nextGainsTime:0});this.m_data.girls[5].level=1,this.m_data.girls[5].nextGainsTime=this.getWorldTime()+u.default.girl_gains_delta_time,this.m_data.girls[6].level=1,this.m_data.girls[6].nextGainsTime=this.getWorldTime()+u.default.girl_gains_delta_time;for(var h=0;h<u.default.soil_count;h++)this.m_data.flowers.push({level:0,income:0,nextGainsTime:0});for(var h=0;h<this.girl_level_max;h++){var m=r.default.get_up_db(s.UpId.girl,h);this.m_data.girlsPrice.push(m.buyPrice)}g.default.commit(s.ACTION_ID.GIRL_LEVEL,0,1,g.GOAL_COMMIT_MODE.BIGGER)}},t.saveRecord=function(){i.default.setData("game54",this.m_data)},t.update=function(){this.updateGirl(),this.updateFlower()},t.convertToValidNumber=function(e){if(e<1)return e;var t=Math.floor(f.default.Log(e)),n=Math.floor(t/4),o=Math.min(3-t%4,2),a=4*n;return C(e/f.default.roundPower10Double[a],o)*f.default.roundPower10Double[a]},t.formatBigNumber=function(e){if(e<1)return f.default.Round(e).toString();var t=Math.floor(f.default.Log(e)),n=Math.floor(t/4);return n=C(e/f.default.roundPower10Double[4*n],Math.min(3-t%4,2)),e>=1e12?n+"\u5146":e>=1e8?n+"\u4ebf":e>=1e4?n+"\u4e07":n.toString()},t.getWorldTime=function(){return Date.now()/1e3*u.default.game_time_scale},t.subItem=function(e,t){return c.default.getItemCount(e)<t?c.default.subItem(e,this.convertToValidNumber(t)):c.default.subItem(e,t)},t.getDoubleOutputLeftTime=function(){return this.m_data.doubleOutptEndTime-y.default.getTime()},t.refreshDoubleOutputTime=function(){this.m_data.doubleOutptEndTime=y.default.getTime()+u.default.double_output_time,this.saveRecord()},t.getCurMaxGirlLevel=function(){return this.m_data.curMaxGirlLevel},t.getCurMaxBuyGirlLevel=function(){var e=this.getCurMaxGirlLevel();return e<1+u.default.girl_buy_delta_level?1:e-u.default.girl_buy_delta_level},t.hasMergeGirl=function(){for(var e={},t=this.m_data.girls,n=0;n<t.length;n++){var o=t[n];if(0!=o.level){if(e[o.level])return!0;e[o.level]=!0}}return!1},t.getGirlPrice=function(e){return this.m_data.girlsPrice[e]},t.getNextGenerateGirlTime=function(){return this.m_data.nextGenerateGirlTime},t.forceClearGenerateTime=function(){this.m_data.nextGenerateGirlTime=this.getWorldTime()+u.default.auto_generate_girl_delta_time},t.getGenerateGirlLevel=function(){return Math.min(c.default.getItemCount(s.ITEM_ID.GIRL_LEVEL)+1,u.default.auto_generate_girl_level_max)},t.canGenerateGirlLvup=function(){return c.default.getItemCount(s.ITEM_ID.GIRL_LEVEL)+1<u.default.auto_generate_girl_level_max},t.accGenerateGirlTime=function(){this.m_data.nextGenerateGirlTime-=u.default.game_time_scale,this.autoGenerateGirl()},t.getGirls=function(){return this.m_data.girls},t.getGirlLevel=function(e){return this.m_data.girls[e].level},t.getAllGirlOutput=function(){for(var e=0,t=0;t<this.m_data.girls.length;t++){var n=this.m_data.girls[t];n.level>0&&(e+=r.default.get_up_db(s.UpId.girl,n.level).output)}return e},t.updateGirl=function(){for(var e=this.getWorldTime();this.m_data.nextGenerateGirlTime<=e&&this.autoGenerateGirl(););for(var t=this.getDoubleOutputLeftTime()>0?2:1,n=this.m_data.girls,o=0,a=0;a<n.length;a++){var i=n[a];if(i.level>0)for(;i.nextGainsTime<e;)o+=r.default.get_up_db(s.UpId.girl,i.level).output*u.default.girl_gains_delta_time,i.nextGainsTime+=u.default.girl_gains_delta_time,p.default.sendMsg(s.MSG.GIRL_GAINS_COIN,a)}o>0&&(c.default.addItem(s.ITEM_ID.COIN,o*t),this.saveRecord())},t.autoGenerateGirl=function(){var e=this.findGirlEmptyPos();return-1!=e&&(this.m_data.nextGenerateGirlTime<=this.getWorldTime()&&(this.m_data.nextGenerateGirlTime+=u.default.auto_generate_girl_delta_time*u.default.game_time_scale,this.m_data.girls[e].level=this.getGenerateGirlLevel(),this.m_data.girls[e].nextGainsTime=this.getWorldTime()+u.default.girl_gains_delta_time,this.saveRecord(),p.default.sendMsg(s.MSG.GIRL_ADD,{pos:e,auto:!0}),p.default.sendMsg(s.MSG.GUD_COMPLETE_KEY,"gud_key_girl_auto_generate"),!0))},t.buyGirl=function(e,t,n){void 0===n&&(n=!1);var o=this.getCurMaxBuyGirlLevel();if(!n&&e>o)return h.default.alertDialog("\u8d85\u51fa\u7b49\u7ea7\u5566~"),!1;if(null==t?t=this.findGirlEmptyPos():0!=this.m_data.girls[t].level&&(t=-1),-1==t)return _.default.openPanel(v.default),!1;var a=this.getGirlPrice(e);return n||this.subItem(s.ITEM_ID.COIN,a)?(this.m_data.girlsPrice[e]*=u.default.buy_inscrease_rate,this.m_data.girls[t].level=e,this.m_data.girls[t].nextGainsTime=this.getWorldTime()+u.default.girl_gains_delta_time,this.saveRecord(),g.default.commit(s.ACTION_ID.GIRL_BUY),p.default.sendMsg(s.MSG.GIRL_ADD,{pos:t,auto:!1}),p.default.sendMsg(s.MSG.GIRL_PRICE_UPDATE),!0):(h.default.alertNotEnough(s.ITEM_ID.COIN),!1)},t.buyGirlLeftCoin=function(e){var t=this.getGirlPrice(e),n=c.default.getItemCount(s.ITEM_ID.COIN);return n<t&&(t=this.convertToValidNumber(t)),n-t},t.lvupGirl=function(e){var t=this.m_data.girls[e].level;if(0==t||t>=this.girl_level_max)return!1;this.m_data.girls[e].level++,this.m_data.girls[e].nextGainsTime=this.getWorldTime()+u.default.girl_gains_delta_time,p.default.sendMsg(s.MSG.GIRL_CHANGE,e)},t.findGirlEmptyPos=function(){for(var e=this.m_data.girls,t=f.default.Random(e.length)-1,n=0;n<e.length;n++){var o=(n+t)%e.length;if(0==e[o].level)return o}return-1},t.moveGirl=function(e,t){if(e==t)return o.Fail;var n=this.m_data.girls[e];if(!n)return o.Fail;var a=this.m_data.girls[t];if(a){if(n.level!=a.level){var i=a.level;a.level=n.level,n.level=i;var l=a.nextGainsTime;return a.nextGainsTime=n.nextGainsTime,n.nextGainsTime=l,this.saveRecord(),o.Swap}if(a.level>=this.girl_level_max)return o.Fail;var d=r.default.get_up_db(s.UpId.girl,n.level);c.default.addItem(s.ITEM_ID.ENERGY,d.mergeEnery),a.level++,n.level=0;var f=Math.max(this.m_data.curMaxGirlLevel,a.level);this.m_data.curMaxGirlLevel!=f&&(m.default.playSound("new"),_.default.openPanel(b.default,f),g.default.commit(s.ACTION_ID.GIRL_LEVEL,0,f,g.GOAL_COMMIT_MODE.BIGGER)),this.m_data.curMaxGirlLevel=f;var h=this.getWorldTime();return this.m_data.nextGenerateGirlTime<=h&&(this.m_data.nextGenerateGirlTime=h+u.default.auto_generate_girl_delta_time),this.saveRecord(),g.default.commit(s.ACTION_ID.GIRL_MERGE),S.default.addPlayerScore(1),p.default.sendMsg(s.MSG.GUD_COMPLETE_KEY,"gud_key_girl_merge_suc"),p.default.sendMsg(s.MSG.GIRL_CHANGE),o.Merge}return a.level=n.level,n.level=0,this.saveRecord(),o.Move},t.recycleGirl=function(e){var t=this.m_data.girls[e];if(t&&t.level>0){var n=r.default.get_up_db(s.UpId.girl,t.level);t.level=0;var o=this.getWorldTime();return this.m_data.nextGenerateGirlTime<=o&&(this.m_data.nextGenerateGirlTime=o+u.default.auto_generate_girl_delta_time),c.default.addItem(s.ITEM_ID.ENERGY,n.recycleEnery),this.saveRecord(),p.default.sendMsg(s.MSG.GIRL_CHANGE),!0}return!1},t.isSoilUnlock=function(e){var t=r.default.get_up_db(s.UpId.soil,e+1);return this.getCurMaxGirlLevel()>=t.reqCnt},t.hasLvupFlower=function(){for(var e=this.m_data.flowers,t=0;t<e.length&&this.isSoilUnlock(t);t++){var n=e[t],o=l.default.getReqItemInfo(s.UpId.flower,n.level),a=void 0;if(a=0==n.level?r.default.get_up_db(s.UpId.soil,t+1).flowerUnlockCoin:o.count,c.default.getItemCount(o.itemId)>=this.convertToValidNumber(a))return!0}return!1},t.getFlowerLevel=function(e){return this.m_data.flowers[e].level},t.getCurMaxFlowerLevel=function(){for(var e=0,t=0;t<this.m_data.flowers.length;t++){var n=this.m_data.flowers[t];e=Math.max(n.level,e)}return e},t.getFlowerIncome=function(e){return this.m_data.flowers[e].income},t.lvupFlower=function(e){var t,n=this.m_data.flowers[e];if(!n)return!1;if(!this.isSoilUnlock(e))return!1;if(n.level>=this.flower_level_max)return!1;if(n.level>=this.getCurMaxGirlLevel())return h.default.alertDialog("\u5148\u63d0\u5347\u5c0f\u82b1\u4ed9\u7b49\u7ea7\u5427~"),!1;var o=l.default.getReqItemInfo(s.UpId.flower,n.level);return t=0==n.level?r.default.get_up_db(s.UpId.soil,e+1).flowerUnlockCoin:o.count,this.subItem(o.itemId,t)?(n.level++,1==n.level&&(n.nextGainsTime=this.getWorldTime()),p.default.sendMsg(s.MSG.FLOWER_CHANGE,e),!0):(h.default.alertNotEnough(o.itemId),!1)},t.getFlowers=function(){return this.m_data.flowers},t.getAllFlowerOutput=function(){for(var e=0,t=0;t<this.m_data.flowers.length;t++){var n=this.m_data.flowers[t];n.level>0&&(e+=r.default.get_up_db(s.UpId.flower,n.level).output)}return e},t.reapFlower=function(e){var t=this.m_data.flowers[e];if(!t)return 0;if(0==t.level)return 0;if(0==t.income)return 0;var n=t.income;return c.default.addItem(s.ITEM_ID.COIN,n),t.income=0,this.saveRecord(),g.default.commit(s.ACTION_ID.FLOWER_GET),n},t.updateFlower=function(){for(var e,t,n=this.getWorldTime(),o=this.getDoubleOutputLeftTime()>0?2:1,a=this.m_data.flowers,i=0;i<a.length;i++){var l=a[i];if(l.level>0)for(;l.nextGainsTime<n;){var c=(e=r.default.get_up_db(s.UpId.flower,l.level)).output*u.default.flower_gains_delta_time*o;l.nextGainsTime+=u.default.flower_gains_delta_time,t=l.income,l.income=Math.min(t+c,e.capacity),t<e.capacity&&p.default.sendMsg(s.MSG.FLOWER_GAINS_COIN,i)}}},t.m_data=null,t.girl_level_max=0,t.flower_level_max=0,t.soil_count_max=0,t.offlineGains=0,t}(a.default);n.default=T,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../generate/db":"db","../manager/_mgrBase":"_mgrBase","../manager/mgrAlert":"mgrAlert","../manager/mgrAudio":"mgrAudio","../manager/mgrGoal":"mgrGoal","../manager/mgrItem":"mgrItem","../manager/mgrPanel":"mgrPanel","../manager/mgrRank":"mgrRank","../manager/mgrRecord":"mgrRecord","../manager/mgrUp":"mgrUp","../ui/PanelGirlReward":"PanelGirlReward","../ui/PanelPosNotEnought":"PanelPosNotEnought","../utils/Mathf":"Mathf","../utils/Timer":"Timer","../utils/Tools":"Tools"}],mgrGoal:[function(e,t,n){"use strict";cc._RF.push(t,"7062ao9zxFKVIjb41wgdlx2","mgrGoal"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./_mgrBase"),i=e("./mgrRecord"),r=e("../generate/db");(function(e){e[e.ADD=0]="ADD",e[e.RESET=1]="RESET",e[e.BIGGER=2]="BIGGER"})(o=n.GOAL_COMMIT_MODE||(n.GOAL_COMMIT_MODE={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this.m_data=i.default.getData("_goal_data_"),this.m_data||(this.m_data={lastGoalEntryId:0,goalList:{}})},t.saveRecord=function(){i.default.setData("_goal_data_",this.m_data)},t.printAllGoal=function(){console.log("---\x3e goad data start <---"),console.log(JSON.stringify(this.m_data)),console.log("---\x3e goad data end <---")},t.setGoalStateChangeListener=function(e){this.m_goalStateChangeListener=e},t.addNotifyQuestId=function(e){this.m_notifyQuestIds[e]=!0},t.clearNotify=function(){this.m_notifyQuestIds={}},t.getGoalList=function(e,t,n){var o=this.m_data.goalList[e];if(!o){if(!n)return null;o={},this.m_data.goalList[e]=o,this.saveRecord()}if(!o[t=t||"_default_"]){if(!n)return null;o[t]={},this.saveRecord()}return o[t]},t.registerGold=function(e,t){var n=r.default.get_goal_db(e);if(n){var o=(++this.m_data.lastGoalEntryId).toString();return this.getGoalList(n.actionId,n.targetId,!0)[o]={goalId:e,questId:t,commits:0},this.saveRecord(),o}},t.unregister=function(e,t){var n=r.default.get_goal_db(e);if(n){var o=this.getGoalList(n.actionId,n.targetId,!1);o&&o[t]&&(delete o[t],this.saveRecord())}},t.commit=function(e,t,n,a){t=t||"_default_",n=n||1,a=a||o.ADD,"number"==typeof t&&(t=t.toString()),"_default_"!=t&&this.commit(e,"_default_",n,a);var i,s,l=this.getGoalList(e,t,!1);if(l)for(var c in l){var u=l[c];if(i=r.default.get_goal_db(u.goalId)){switch(s=this._isDone(u.commits,i.value,i.type),a){case o.ADD:u.commits+=n;break;case o.RESET:u.commits=n;break;case o.BIGGER:u.commits=Math.max(u.commits,n)}u.questId&&(this._isDone(u.commits,i.value,i.type)!=s&&this.onStateGoalChange(u.questId,c,!s),this.notifyQuest(u.questId,u.goalId)),this.saveRecord()}}},t.isDone=function(e,t){var n=r.default.get_goal_db(e);if(!n)return!1;var o=this.getValue(e,t);return this._isDone(o,n.value,n.type)},t._isDone=function(e,t,n){return"min"==n?e>=t:"max"==n?e<=t:(cc.error("can't find goal type "+n),!1)},t.notifyQuest=function(e,t){this.m_notifyQuestIds[e]},t.getValue=function(e,t){var n=r.default.get_goal_db(e);if(!n)return 0;var o=this.getGoalList(n.actionId,n.targetId,!1);if(!o)return cc.warn("can't find goal list by goalId "+e),0;var a=o[t];return a?a.commits:(cc.warn("can't find goal entry by entryId "+t),0)},t.getDbValue=function(e){var t=r.default.get_goal_db(e);return t?t.value:0},t.getActionId=function(e){var t=r.default.get_goal_db(e);return t?t.actionId:null},t.onStateGoalChange=function(e,t,n){this.m_goalStateChangeListener&&this.m_goalStateChangeListener(e,t,n)},t.m_goalStateChangeListener=null,t.m_data=null,t.m_notifyQuestIds={},t}(a.default);n.default=s,cc._RF.pop()},{"../generate/db":"db","./_mgrBase":"_mgrBase","./mgrRecord":"mgrRecord"}],mgrGuide:[function(e,t,n){"use strict";cc._RF.push(t,"62d0adkF+dIH7YNzgzfXNzl","mgrGuide"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("./mgrRecord"),i=e("../game/GuideScript"),r=e("./mgrPanel"),s=e("../ui/PanelGuide"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this.m_data=a.default.getData("_guide_info_")||{}},t.start=function(){i.initGuide()},t.saveRecord=function(){a.default.setData("_guide_info_",this.m_data)},t.getActive=function(e){return!!this.m_data[e]},Object.defineProperty(t,"isGuiding",{get:function(){return null!=this.curGuideId},enumerable:!0,configurable:!0}),t.dispatchGuide=function(e){this.enabled&&i.GuideScript[e]&&(this.m_data[e]||i.GuideScript[e].length>0&&(this.curGuideId=e,cc.log("\u89e6\u53d1\u5f15\u5bfc:"+e),r.default.openPanel(s.default,e)))},t.finish=function(e){e&&this.curGuideId&&(this.m_data[this.curGuideId]=!0,this.saveRecord()),this.curGuideId=null},t.enabled=!0,t.m_data=null,t.curGuideId=null,t}(o.default);n.default=l,cc._RF.pop()},{"../game/GuideScript":"GuideScript","../ui/PanelGuide":"PanelGuide","./_mgrBase":"_mgrBase","./mgrPanel":"mgrPanel","./mgrRecord":"mgrRecord"}],mgrItem:[function(e,t,n){"use strict";cc._RF.push(t,"c6c268cKE1IJqBjDDnqFySs","mgrItem"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./_mgrBase"),i=e("./mgrRecord"),r=e("../_G"),s=e("../common/Const"),l=e("../Config"),c=e("./mgrGoal"),u=e("../generate/db"),d=e("./mgrDrop");(function(e){e[e.RMB=0]="RMB",e[e.CURRENCY=1]="CURRENCY",e[e.GOODS=2]="GOODS",e[e.DROP=3]="DROP"})(o=n.ITEM_TYPE||(n.ITEM_TYPE={}));var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){var e=i.default.getData("_items_data_");if(!e){e={};for(var t=0;t<l.default.game_init_items.length;t++){var n=l.default.game_init_items[t];e[n[0]]=n[1]}}this.m_data=e},t.saveRecord=function(){i.default.setData("_items_data_",this.m_data)},t.addItem=function(e,t){t=t||1;var n=this.getItemCount(e),o=n+t;this.m_data[e]=o,this.saveRecord();var a={itemId:e,curCount:o,lastCount:n};c.default.commit(s.ACTION_ID.GET_ITEM,e,t),r.default.sendMsg(s.MSG.ITEM_CHANGE,a)},t.subItem=function(e,t){if(0==t)return!0;var n=this.getItemCount(e);if(n<t)return!1;var o=n-t;this.m_data[e]=o,this.saveRecord();var a={itemId:e,curCount:o,lastCount:n};return c.default.commit(s.ACTION_ID.USE_ITEM,e,t),r.default.sendMsg(s.MSG.ITEM_CHANGE,a),!0},t.getAllItems=function(){return this.m_data},t.getItemCount=function(e){return this.m_data[e]||0},t.addWrapItem=function(e,t){for(var n=this.unpackItem(e,t,!1),o=0;o<n.length;o++){var a=n[o];this.addItem(a.itemId,a.count)}return n},t.unpackItem=function(e,t,n){if(!e)return null;var o=this._unpackItem(e,t,{},n),a=[];for(var i in o){var r=o[i];a.push({itemId:parseInt(i),count:r})}return a},t._unpackItem=function(e,t,n,a){t=t||1,n=n||{};for(var i=u.default.get_item_db(e),r=0;r<t;r++){if(i.type==o.GOODS){var s=n[e]||0;s+=t,n[e]=s;break}if(i.type==o.DROP)for(var l=d.default.makeDrop(e.toString()),c=0;c<l.length;c++){var f=l[c];this._unpackItem(f.itemId,f.count,n,a)}else cc.error("can't _unpackItem this item["+e+"] type.")}return n},t.m_data={},t}(a.default);n.default=f,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../generate/db":"db","./_mgrBase":"_mgrBase","./mgrDrop":"mgrDrop","./mgrGoal":"mgrGoal","./mgrRecord":"mgrRecord"}],mgrLoader:[function(e,t,n){"use strict";cc._RF.push(t,"3a459+fkk9Pq6WwaOgCXmVI","mgrLoader"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./mgrCfg"),a=e("./mgrPanel"),i=e("./mgrRecord"),r=e("./mgrItem"),s=e("./mgrAudio"),l=e("./mgrSdk"),c=e("./mgrAdv"),u=e("./mgrRank"),d=e("./mgrPvp"),f=e("./mgrAlert"),p=e("./mgrPay"),h=e("./mgrUp"),g=e("../game/mgrGame"),m=e("./mgrGoal"),_=e("./mgrQuest"),v=e("./mgrDrop"),y=e("./mgrSwitch"),b=e("./mgrOperations"),S=e("./mgrGuide"),C=e("./mgrStatistics"),T=function(){function e(){}return e.onload=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return[4,o.default.onload()];case 1:for(n.sent(),e=[o.default,a.default,i.default,m.default,C.default,y.default,c.default,f.default,v.default,r.default,s.default,l.default,u.default,d.default,_.default,p.default,h.default,S.default,b.default,g.default],t=0;t<e.length;t++)e[t].onload();for(t=0;t<e.length;t++)e[t].start();return[2]}})})},e}();n.default=T,cc._RF.pop()},{"../game/mgrGame":"mgrGame","./mgrAdv":"mgrAdv","./mgrAlert":"mgrAlert","./mgrAudio":"mgrAudio","./mgrCfg":"mgrCfg","./mgrDrop":"mgrDrop","./mgrGoal":"mgrGoal","./mgrGuide":"mgrGuide","./mgrItem":"mgrItem","./mgrOperations":"mgrOperations","./mgrPanel":"mgrPanel","./mgrPay":"mgrPay","./mgrPvp":"mgrPvp","./mgrQuest":"mgrQuest","./mgrRank":"mgrRank","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrStatistics":"mgrStatistics","./mgrSwitch":"mgrSwitch","./mgrUp":"mgrUp"}],mgrOperations:[function(e,t,n){"use strict";cc._RF.push(t,"15676TRTiBPEJZFWXxrA/wT","mgrOperations"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./_mgrBase"),i=e("./mgrDrop"),r=e("../common/Const"),s=e("../game/mgrGame"),l=e("../generate/db"),c=e("./mgrRecord"),u=e("./mgrItem"),d=e("../utils/Mathf"),f=e("./mgrSwitch"),p=e("../utils/Tools"),h=e("../Config"),g=e("../utils/Timer"),m=e("../game/FlyBox"),_=e("./mgrAlert"),v=e("../_G"),y=e("./mgrAdv"),b=e("./mgrGuide");(function(e){e[e.Geted=0]="Geted",e[e.CanGet=1]="CanGet",e[e.CanntGet=2]="CanntGet"})(o=n.SIGN_STATE||(n.SIGN_STATE={}));var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this.loadShareRecord(),this.loadCircleLotteryRecored(),this.loadBoxRecored(),this.loadFlyBoxRecord(),this.loadWaterRecord()},t.getSignState=function(e,t){for(var n=i.default.getCurLotteryIndex(r.DROP_ID.SIGN),a=i.default.getLotteryActive(r.DROP_ID.SIGN),s=i.default.getAllDropItems(r.DROP_ID.SIGN),l=0;l<s.length;l++){var c=s[l],u=void 0;u=a&&l==n+1?o.CanGet:l<=n?o.Geted:o.CanntGet,e[l]=c,t[l]=u}return a},t.markSignGeted=function(){i.default.makeLottery(r.DROP_ID.SIGN,!1)},t.loadShareRecord=function(){this.shareRecordData=c.default.getData("_share_info_"),null==this.shareRecordData?this.shareRecordData=["empty","empty","empty","empty","empty","empty"]:f.default.dailyActive&&(this.shareRecordData=["empty","empty","empty","empty","empty","empty"],this.saveShareRecord())},t.saveShareRecord=function(){c.default.setData("_share_info_",this.shareRecordData)},t.getShareState=function(e){return this.shareRecordData[e]},t.markShared=function(e){return"empty"==this.shareRecordData[e]&&(this.shareRecordData[e]="shared",this.saveShareRecord(),this.allShared()&&s.default.canGenerateGirlLvup()&&u.default.addItem(r.ITEM_ID.GIRL_LEVEL,1),!0)},t.makeShareReward=function(e){if("shared"!=this.shareRecordData[e])return!1;this.shareRecordData[e]="geted",this.saveShareRecord();var t=h.default.share_reward_item[e];return _.default.alertAndGetItem(t),!0},t.getShareReward=function(e){return h.default.share_reward_item[e]},t.getSharedCount=function(){for(var e=0,t=0;t<this.shareRecordData.length;t++)"empty"!=this.shareRecordData[t]&&e++;return e},t.allShared=function(){for(var e=0;e<this.shareRecordData.length;e++)if("empty"==this.shareRecordData[e])return!1;return!0},t.saveCircleLotteryRecord=function(){c.default.setData("_circle_lotter_",this.lotteryData)},t.loadCircleLotteryRecored=function(){this.lotteryData=c.default.getData("_circle_lotter_"),null==this.lotteryData?this.lotteryData={lastIndex:0,count:0,state:"empty",freeCount:1}:f.default.dailyActive&&(this.lotteryData.count=0,this.lotteryData.freeCount=1,this.saveCircleLotteryRecord())},t.getCircleLotteryItems=function(){var e,t,n=[],o=s.default.getDoubleOutputLeftTime()>0?2:1;return t=(s.default.getAllGirlOutput()+s.default.getAllFlowerOutput())*o,n.push({itemId:r.ITEM_ID.COIN,count:300*t}),e=l.default.get_up_db(r.UpId.girl,Math.max(s.default.getCurMaxGirlLevel()-2,1)),n.push({itemId:r.ITEM_ID.ENERGY,count:e.mergeEnery,payId:1}),n.push({itemId:r.ITEM_ID.WATER,count:2}),n.push({itemId:r.ITEM_ID.GIRL,count:Math.max(s.default.getCurMaxGirlLevel()-7,1)}),n.push({itemId:r.ITEM_ID.WATER,count:8,payId:1}),e=l.default.get_up_db(r.UpId.girl,Math.max(s.default.getCurMaxGirlLevel()-4,1)),n.push({itemId:r.ITEM_ID.ENERGY,count:e.mergeEnery}),n.push({itemId:r.ITEM_ID.COIN,count:600*t,payId:1}),n.push({itemId:r.ITEM_ID.GIRL,count:Math.max(s.default.getCurMaxGirlLevel()-9,1)}),n},t.getCircleLotteryIndex=function(){return this.lotteryData.lastIndex},t.getCircleLotteryState=function(){return this.lotteryData.state},t.getCircleLotteryFreeCount=function(){return this.lotteryData.freeCount},t.addCircleLotteryFreeCount=function(){this.lotteryData.freeCount++,this.saveCircleLotteryRecord()},t.makeCircleLottery=function(){if("get"!=this.lotteryData.state){var e=d.default.makeCircleRandom([80,39,81,51,38,56,65,66]);return e<0&&cc.error("\u6389\u843d\u6982\u7387\u51fa\u9519"),this.lotteryData.lastIndex=e,this.lotteryData.state="get",this.saveCircleLotteryRecord(),{index:e,state:"get"}}cc.error("\u8bf7\u5148\u83b7\u53d6\u5956\u52b1\uff0c\u518d\u62bd\u5956")},t.markCircleLotteryGeted=function(){this.lotteryData.state="empty",this.lotteryData.count++,this.lotteryData.freeCount>0&&this.lotteryData.freeCount--,this.saveCircleLotteryRecord()},t.saveBoxRecord=function(){c.default.setData("_box_lotter_",this.boxData)},t.loadBoxRecored=function(){this.boxData=c.default.getData("_box_lotter_"),null==this.boxData&&(this.boxData={level:-1,state:"empty",nextTime:0})},t.getBoxLotteryNextTime=function(){return this.boxData.nextTime},t.getBoxLotteryState=function(){return this.boxData.state},t.getBoxLotteryLevel=function(){return this.boxData.level},t.tryMakeBoxLottery=function(){if("lvup"==this.boxData.state)return this.boxData.level;var e=s.default.getCurMaxGirlLevel(),t=Math.max(Math.floor(e/2-2),1),n=Math.max(Math.floor(e/2),1),o=d.default.Random(t,n);return this.boxData.level=o,this.boxData.state="lvup",this.saveBoxRecord(),o},t.markBoxLotteryGeted=function(){this.boxData.state="empty",this.boxData.nextTime=p.default.getTime()+h.default.girl_box_refresh_delta_time,this.saveBoxRecord()},t.loadFlyBoxRecord=function(){this.flyBoxTime=30,g.default.callLoop(5,this.updateFlyBox.bind(this),!0)},t.updateFlyBox=function(){this.flyBoxTime>0&&(this.flyBoxTime-=5,this.flyBoxTime<=0&&(b.default.isGuiding?this.flyBoxTime=1:(this.flyBoxTime=h.default.fly_box_refresh_delta_time,(new m.default).create())))},t.makeFlyBoxReward=function(){var e=c.default.getData("_flybox_info_"),t=s.default.getAllGirlOutput()+s.default.getAllFlowerOutput(),n=s.default.getDoubleOutputLeftTime()>0?2:1;t*=h.default.fly_box_reward_coin_rate*n;var o=!1;e?y.default.checkActive("coin_get")&&(o=1==d.default.Random(2)):c.default.setData("_flybox_info_",!0),_.default.alertFlyBoxReward(o,t)},t.loadWaterRecord=function(){this.nextWaterTime=c.default.getData("_water_info_"),null==this.nextWaterTime?this.nextWaterTime=0:this.refreshWaterTime()},t.saveWaterRecord=function(){c.default.setData("_water_info_",this.nextWaterTime)},t.refreshWaterTime=function(){0==this.getWaterCount()?0==this.nextWaterTime?this.nextWaterTime=h.default.water_count_add_required_time+p.default.getTime():this.nextWaterTime<=p.default.getTime()&&(u.default.addItem(r.ITEM_ID.WATER,1),this.nextWaterTime=0):this.nextWaterTime=0,this.saveWaterRecord()},t.getWaterCount=function(){return u.default.getItemCount(r.ITEM_ID.WATER)},t.getLeftWaterTime=function(){return this.nextWaterTime-p.default.getTime()},t.consumeWater=function(){return this.getWaterCount()>0&&(u.default.subItem(r.ITEM_ID.WATER,1),this.refreshWaterTime(),!0)},t.hasNewGift=function(){return!!c.default.getData("_new_gift_info_")},t.markNewGiftGeted=function(){c.default.setData("_new_gift_info_",!0),v.default.sendMsg(r.MSG.PAY_SUCCESS)},t.shareRecordData=null,t.lotteryData=null,t.boxData=null,t.flyBoxTime=0,t.nextWaterTime=null,t}(a.default);n.default=S,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../game/FlyBox":"FlyBox","../game/mgrGame":"mgrGame","../generate/db":"db","../utils/Mathf":"Mathf","../utils/Timer":"Timer","../utils/Tools":"Tools","./_mgrBase":"_mgrBase","./mgrAdv":"mgrAdv","./mgrAlert":"mgrAlert","./mgrDrop":"mgrDrop","./mgrGuide":"mgrGuide","./mgrItem":"mgrItem","./mgrRecord":"mgrRecord","./mgrSwitch":"mgrSwitch"}],mgrPanel:[function(e,t,n){"use strict";cc._RF.push(t,"4011fZPamdNXrwKIynMk7UH","mgrPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./_mgrBase"),i=e("../_G"),r=e("../common/Const");(function(e){e[e.COMMON=0]="COMMON",e[e.FULL=1]="FULL",e[e.DIALOG=2]="DIALOG"})(o=n.PANEL_STYLE||(n.PANEL_STYLE={})),function(e){e[e.BOTTOM=0]="BOTTOM",e[e.UI=1]="UI",e[e.DIALOG=2]="DIALOG",e[e.TIP=3]="TIP",e[e.TOP=4]="TOP"}(n.PANEL_LAYER||(n.PANEL_LAYER={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.getCanvas=function(){return this.canvas||this.onload(),this.canvas},t.onload=function(){var e=cc.director.getScene().getChildByName("Canvas");if(e){if(!this.canvas){this.canvas=e.getComponent(cc.Canvas),this.fixScreenSize();for(var t=0;t<5;t++){var n=new cc.Node("Layer"+t),o=n.addComponent(cc.Widget);n.parent=e,o.isAlignTop=!0,o.top=0,o.isAlignBottom=!0,o.bottom=0,o.isAlignRight=!0,o.right=0,o.isAlignLeft=!0,o.left=0,o.updateAlignment(),this.m_LayerNodes.push(n)}cc.view.setResizeCallback(this.onViewResize.bind(this))}}else cc.error("can't find canvas in scene")},t.fixScreenSize=function(){var e=cc.view.getFrameSize(),t=e.width/e.height;if(t<.5625){var n=void 0;t<.5?(n=1152,.5625/t*1024,console.log("\u8d85\u9ad8\uff1a\u91cd\u7f6e\u9ad8\u5ea6 "+n)):(n=.5625/t*1024,console.log("\u5bbd\u9002\u914d")),n=Math.floor(n),this.canvas.designResolution=new cc.Size(576,n),this.canvas.node.setContentSize(576,n),this.canvas.fitWidth=!0}else if(t>.5625){var o=void 0;t>.75?(o=768,t/.5625*576,console.log("\u8d85\u5bbd\uff1a\u91cd\u7f6e\u5bbd\u5ea6 "+o)):(o=t/.5625*576,console.log("\u9ad8\u9002\u914d:"+o)),o=Math.floor(o),this.canvas.designResolution=new cc.Size(o,1024),this.canvas.node.setContentSize(o,1024),this.canvas.fitHeight=!0}else this.canvas.fitWidth=!0,console.log("\u9ed8\u8ba4\u914d\u7f6e")},t.onViewResize=function(){console.log("mgrPanel.onViewResize"),this.fixScreenSize(),i.default.sendMsg(r.MSG.VIEW_RESIZE)},t.getLayerNode=function(e){var t=this.m_LayerNodes[e];return t||cc.error("can not find layer node :"+e),t},t.pushStack=function(e,t){var n=this.view_stack[t];n?n.push(e):cc.error("push panel invalid layer: "+t)},t.popStack=function(e){var t=this.view_stack[e];if(t)return t.pop();cc.error("pop panel invalid layer:"+e+"}")},t.peekStack=function(e){var t=this.view_stack[e];if(t)return t[t.length-1];cc.error("pop panel invalid layer:"+e+"}")},t.removeAndDispose=function(e){e&&(this.removePanel(e),e.dispose())},t.removePanel=function(e){for(var t=this.view_stack[e.panelLayer],n=0;n<t.length;n++)if(t[n]===e)return void t.splice(n,1);cc.error("can't remove panel:"+e.prefabName+" in layer:"+e.panelLayer)},t.closePanel=function(e){if(e&&e.isLoaded){e.onFocus(!1);var t=e.panelLayer,n=this.peekStack(t);n===e?(this.removeAndDispose(e),(n=this.peekStack(t))&&(n.show(),n.onFocus(!0))):this.removeAndDispose(e)}},t.openPanel=function(e,t){var n=new e(t);n.__class__=e,n.create()},t.openPanelWithSingleton=function(e,t){var n=this.findViewByClass(e);n?n.setContext(t):this.openPanel(e,t)},t.findViewByClass=function(e){for(var t=0;t<this.view_stack.length;t++)for(var n=this.view_stack[t],o=0;o<n.length;o++){var a=n[o];if(a.__class__==e)return a}return null},t.findViewByName=function(e){for(var t=0;t<this.view_stack.length;t++)for(var n=this.view_stack[t],o=0;o<n.length;o++){var a=n[o],i=a.prefabName.split("/");if(i&&i.length>0&&i[i.length-1]==e)return a}return null},t.addPanel=function(e){if(e.isLoaded){var t=e.panelLayer,n=e.panelStyle,a=this.peekStack(t);a&&(a.panelStyle==o.COMMON||(a.panelStyle==n?a.hide():n==o.FULL&&a.hide()),a.onFocus(!1)),this.pushStack(e,t),e.setParent(this.getLayerNode(t)),e.onFocus(!0)}else cc.error("panel has not loaded, please create first!")},t.disposeAllPanel=function(){for(var e=0;e<this.view_stack.length;e++){for(var t=this.view_stack[e],n=0;n<t.length;n++){t[n].dispose()}this.view_stack[e]=[]}},t.debugPanels=function(){cc.log("------ debug panels ------");for(var e=1,t=0;t<this.view_stack.length;t++)for(var n=this.view_stack[t],o=0;o<n.length;o++){var a=n[o];cc.log(e+++" : "+a.prefabName)}},t.m_LayerNodes=[],t.view_stack=[[],[],[],[],[]],t}(a.default);n.default=s,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","./_mgrBase":"_mgrBase"}],mgrPay:[function(e,t,n){"use strict";cc._RF.push(t,"0a624WtC85HgqdLaur+AEId","mgrPay"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){},t}(e("./_mgrBase").default);n.default=o,cc._RF.pop()},{"./_mgrBase":"_mgrBase"}],mgrPvp:[function(e,t,n){"use strict";cc._RF.push(t,"9da32lgFT1J87kJ1UhKKQh7","mgrPvp"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){},t.saveRecord=function(){},t}(e("./_mgrBase").default);n.default=o,cc._RF.pop()},{"./_mgrBase":"_mgrBase"}],mgrQuest:[function(e,t,n){"use strict";cc._RF.push(t,"38737+QnQxHo7Zs/2nAw/oT","mgrQuest"),Object.defineProperty(n,"__esModule",{value:!0});var o,a,i=e("./_mgrBase"),r=e("./mgrRecord"),s=e("./mgrGoal"),l=e("../generate/db"),c=e("../_G"),u=e("../common/Const"),d=e("./mgrItem"),f=e("../utils/Tools");(function(e){e[e.NONE=0]="NONE",e[e.UPDATEABLE=1]="UPDATEABLE",e[e.FAIL=2]="FAIL",e[e.COMMITABLE=3]="COMMITABLE",e[e.FINISHED=4]="FINISHED"})(o=n.QUEST_STATE||(n.QUEST_STATE={})),function(e){e[e.NORMALL=0]="NORMALL",e[e.ACHIEVEMENT=1]="ACHIEVEMENT",e[e.DAILY=2]="DAILY",e[e.SIGN=3]="SIGN",e[e.STATISTICS=4]="STATISTICS"}(a=n.QUEST_TYPE||(n.QUEST_TYPE={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this.m_data=r.default.getData("_quest_data_")||{}},t.start=function(){var e=[[],[],[],[],[]],t=l.default.get_quest_db_map();for(var n in t){var i=t[n];i.type!=a.ACHIEVEMENT&&i.type!=a.SIGN&&i.type!=a.STATISTICS||this.getQuestState(n)==o.NONE&&this.accept(n),e[i.type].push(n)}this.m_allQuestByType=e,s.default.setGoalStateChangeListener(this.onGoalStateChange.bind(this))},t.saveRecord=function(){r.default.setData("_quest_data_",this.m_data)},t.onGoalStateChange=function(e,t,n){var a=this.m_data[e];if(a&&a.state==o.UPDATEABLE){for(var i=l.default.get_quest_db(e),r=0;r<a.goals.length;r++){var c=a.goals[r];if(c!=t&&s.default.isDone(i.goals[r],c)!=n)return}this.onQuestFinish(e,n)}},t.accept=function(e){var t=l.default.get_quest_db(e);if(t){var n=!0,a=this.m_data[e];if(a){for(var i=0;i<a.goals.length;i++)s.default.unregister(t.goals[i],a.goals[i]);n=a.state!=o.FINISHED&&a.first}var r=[];for(i=0;i<t.goals.length;i++){var c=s.default.registerGold(t.goals[i],e);if(!c)return cc.error("can't accept quest["+e+"], because register gold index["+i+"]"),void delete this.m_data[e];r.push(c)}var u=0!=r.length?o.UPDATEABLE:o.COMMITABLE;this.m_data[e]={state:u,goals:r,first:n},this.saveRecord()}},t.commit=function(e){var t=this.m_data[e];if(!t)return null;var n=l.default.get_quest_db(e);if(t.state==o.UPDATEABLE){for(var i=!0,r=0;r<t.goals.length;r++){var f=t.goals[r];if(!s.default.isDone(n.goals[r],f)){i=!1;break}}this.onQuestFinish(e,i)}if(t.state!=o.COMMITABLE)return null;t.first;var p={itemId:0,count:0};return t.first?(p.itemId=n.firstReward[0],p.count=n.firstReward[1]):(p.itemId=n.aginReward[0],p.count=n.aginReward[1]),d.default.addItem(p.itemId,p.count),t.state=o.FINISHED,this.saveRecord(),c.default.sendMsg(u.MSG.QUEST_COMMIT_FINISH,e),n.type==a.ACHIEVEMENT&&c.default.sendMsg(u.MSG.ACH_STATE_CHANGE,e),p},t.testFun=function(){return{id:"234",num:23}},t.onQuestFinish=function(e,t){var n=this.m_data[e];if(n&&n.state==o.UPDATEABLE){n.state=t?o.COMMITABLE:o.FAIL;for(var i=l.default.get_quest_db(e),r=0;r<n.goals.length;r++){var d=n.goals[r];s.default.unregister(i.goals[r],d)}n.goals=[],c.default.sendMsg(u.MSG.QUEST_COMPLETE,e),i.type==a.ACHIEVEMENT&&c.default.sendMsg(u.MSG.ACH_STATE_CHANGE,e),this.saveRecord()}},t.getQuestState=function(e){var t=this.m_data[e];return t?t.state:o.NONE},t.getValue=function(e,t){var n=this.m_data[e];if(!n)return-1;var o=l.default.get_quest_db(e);return null==t&&(t=0),s.default.getValue(o.goals[t],n.goals[t])},t.isFirst=function(e){var t=this.m_data[e];return!!t&&t.first},t.isPassed=function(e){var t=this.m_data[e];return!!t&&(!t.first||t.state==o.FINISHED)},t.isCurFinish=function(e){return this.getQuestState(e)==o.FINISHED},t.isCurCommitable=function(e){return this.getQuestState(e)==o.COMMITABLE},t.getAllQuestByType=function(e){return f.default.deepCopy(this.m_allQuestByType[e])},t.getSortGroupAndOrder=function(e){for(var t=this.getAllQuestByType(e),n=[],o=0;o<t.length;o++){var a=t[o],i=l.default.get_quest_db(a);if(n[i.group])n[i.group][i.order]=i;else{var r=[];r[i.order]=i,n[i.group]=r}}return n},t.hasCommitaleQuest=function(e){for(var t=this.m_allQuestByType[e],n=0;n<t.length;n++){var o=t[n];if(this.isCurCommitable(o))return!0}return!1},t}(i.default);n.default=p,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../generate/db":"db","../utils/Tools":"Tools","./_mgrBase":"_mgrBase","./mgrGoal":"mgrGoal","./mgrItem":"mgrItem","./mgrRecord":"mgrRecord"}],mgrRank:[function(e,t,n){"use strict";cc._RF.push(t,"2810cBpzbFG76IkW980bqjm","mgrRank"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("../utils/JsBridge"),i=e("./mgrRecord"),r=e("../Config"),s=e("../utils/Mathf"),l=e("../generate/db"),c=e("../_G"),u=e("../common/Const"),d=e("../utils/Tools"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){a.registerCmd("/c/getRankResult",this.onGetRankResult.bind(this)),this.loadData()},t.start=function(){var e;this.rankDatas||(this.rankDatas=((e={}).default_rank_name=[],e))},t.onGetRankResult=function(e){if(1==e.code){var t=[];for(var n in e.msg){var o=JSON.parse(e.msg[n]),a={name:o.nickName,rank:parseInt(n),score:o.score,uid:o.userId,headUrl:o.headUrl,selfFlag:o.selfFlag};t.push(a)}t.sort(function(e,t){return e.rank==t.rank?0:e.rank>t.rank?1:-1}),this.rankDatas.default_rank_name=t,c.default.sendMsg(u.MSG.RECEIVE_RANK_DATA)}},t.loadData=function(){this.playerName=i.default.getData("rank_play_name")||"\u6211",this.playerScore=i.default.getData("rank_play_score")||0},t.saveData=function(){i.default.setData("rank_play_name",this.playerName),i.default.setData("rank_play_score",this.playerScore)},t.randomRankData=function(e,t){var n,o=[],a=t-3,i=t+3;i>999?(a-=i-999,i=999):a<1&&(i+=1-a,a=1);for(var r=a;r<=i;r++){var l={name:this.getRandomName(),rank:r,score:this.getDummyScore(e,r),uid:Date.now()};o.push(l)}if(1==e)for(r=o.length-1;r>=0;r--){l=o[r];if(r==o.length-1)l.data1=s.default.Random(1.5*l.score,2.5*l.score),l.data2=s.default.Random(1.5*l.data1,2.5*l.data1);else if(l.score==n.score){var c=n.data1;l.data1=c+s.default.Random(20),l.data2=s.default.Random(1.5*l.data1,2.5*l.data1)}else l.data1=s.default.Random(1.5*l.score,2.5*l.score),l.data2=s.default.Random(1.5*l.data1,2.5*l.data1);n=l}this.rankDatas[e]=o},t.getDummyScore=function(e,t){var n,o,a,i;(t<1||t>999)&&(cc.error("GetDummyScore Error rank: "+t),t=999);for(var l=0;l<r.default.G_DUMMY_RANK[e].length;l++){var c=r.default.G_DUMMY_RANK[e][l];if(t<=c.fromRank&&t>=c.toRank){n=c.fromScore,o=c.toScore,a=c.fromRank,i=c.toRank;break}}var u=(o-n)/(a-i+1)*.3,d=s.default.LerpFromInverseLerp(n,o,a,i,t);return Math.floor(d+s.default.Random(-u,u))},t.getDummyRank=function(e,t){for(var n,o,a,i,l=0;l<r.default.G_DUMMY_RANK[e].length;l++){var c=r.default.G_DUMMY_RANK[e][l];if(t>=c.fromScore&&t<=c.toScore){n=c.fromScore,o=c.toScore,a=c.fromRank,i=c.toRank;break}}var u=s.default.LerpFromInverseLerp(a,i,n,o,t);return s.default.Round(u)},t.getRandomName=function(){var e=l.default.get_name_db_arr();return e[s.default.Random(e.length-1)].name},t.setPlayerName=function(e){this.playerName=e,this.saveData()},t.addPlayerScore=function(e){this.playerScore+=e,this.saveData()},t.getPlayerScore=function(){return this.playerScore},t.getRankData=function(e){return void 0===e&&(e="default_rank_name"),this.rankDatas[e]},t.requestRank=function(e){void 0===e&&(e=20),a.sendToSdk("/c/getRankData",{dataNum:e,rankName:"default_rank_name",order:1,rankType:0})},t.commit=function(e){var t=Math.floor(d.default.getTime());a.sendToSdk("/c/saveRankData",{startTime:(t-15).toString(),endTime:t.toString(),rankName:"default_rank_name",score:Math.floor(e),order:1})},t.rankDatas=null,t.playerName=null,t.playerScore=0,t}(o.default);n.default=f,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../generate/db":"db","../utils/JsBridge":"JsBridge","../utils/Mathf":"Mathf","../utils/Tools":"Tools","./_mgrBase":"_mgrBase","./mgrRecord":"mgrRecord"}],mgrRecord:[function(e,t,n){"use strict";cc._RF.push(t,"9aeacy0RFVJ3KGegDPsN2TE","mgrRecord"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/Timer"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this._readRecord(),o.default.callLoop(.1,this._onTimerSpan.bind(this),!0)},t._onTimerSpan=function(e){this.bNeedFlush&&(this.bNeedFlush=!1,this._writeRecord())},t._readRecord=function(e){if(e||(e=cc.sys.localStorage.getItem("record_game40")),!e)return cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u672a\u627e\u5230\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord();var t=JSON.parse(e);return t?5!=t.__version__?(cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u7248\u672c\u6539\u53d8\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord()):void(this.record=t):(cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u6570\u636e\u635f\u574f\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord())},t._writeRecord=function(){var e=JSON.stringify(this.record);cc.sys.localStorage.setItem("record_game40",e)},t._requestFlush=function(){this._bDebugBanWrite||(this.bNeedFlush=!0)},t._setDebugBanWrite=function(e){this._bDebugBanWrite=e},t.getData=function(e){return this.record[e]},t.setData=function(e,t){this.record[e]=t,this.record.__age__=(this.record.__age__||0)+1,this._requestFlush()},t.resetRecord=function(){this.record={},this.record.__age__=0,this.record.__version__=5,this._requestFlush()},t.deletAndDisabled=function(){this.record={},this.record.__age__=0,this.record.__version__=123698750,this._requestFlush()},t.record={},t.bNeedFlush=!1,t._bDebugBanWrite=!1,t}(e("./_mgrBase").default);n.default=a,cc._RF.pop()},{"../utils/Timer":"Timer","./_mgrBase":"_mgrBase"}],mgrRes:[function(e,t,n){"use strict";cc._RF.push(t,"07cfa2jn+dD96FVmeSmIWGW","mgrRes"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.preloadArr=function(e,t){for(var n={},o=0;o<e.length;o++)e[o]&&(n[e[o]]=!0);var a=[];for(var i in n)a.push(i);cc.loader.loadResArray(a,t)},e.tryLoadRes=function(e,t){return cc.loader.getRes(e,t)},e.loadRes=function(e,t,n){var o=cc.loader.getRes(e,t);if(null==o){var a=t;cc.loader.loadRes(e,a,n)}else n(null,o)},e.promiseLoadAsset=function(e,t){var n=this;return new Promise(function(o,a){n.loadRes(e,t,function(t,n){if(t)return cc.warn("\u8b66\u544a] mgrRes.loadRes load ["+e+"] err:["+t+"]"),void a(t);o(n)})})},e.loadImageFromWeb=function(e,t){var n=this;e&&(this.webResCache[e]?t(this.webResCache[e]):cc.loader.load({url:e,type:"png"},function(o,a){o?console.log("mgrRes.loadFromWeb error:"+o):(n.webResCache[e]=a,t(a))}))},e.webResCache={},e}();n.default=o,cc._RF.pop()},{}],mgrScene:[function(e,t,n){"use strict";cc._RF.push(t,"2b6a8CktAZHpqoJ77WX2aqz","mgrScene"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("../_G"),i=e("../common/Const"),r=e("../utils/Timer"),s=e("./mgrPanel"),l=e("../ui/PanelLoading"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){},Object.defineProperty(t,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),t.runScene=function(e,t,n){if(this._isBusy)cc.error("mgr scene is busy");else{this._isBusy=!0,t&&s.default.openPanel(l.default),a.default.sendMsg(i.MSG.RES_LOAD_START),this.runningScene&&(this.runningScene.onExit(),this.runningScene=null);var o=new e;this.nextScene=o,this.nextSceneparams=n,this.curProcessIndex=0,this.preprocessList=o.getPreprocessList();for(var r=o.getPreloadResList(),c={},u=0;u<r.length;u++)r[u]&&(c[r[u]]=!0);var d=[];for(var f in c)d.push(f);0==r.length?this.onResComplete(null,null):cc.loader.loadResArray(d,this.onResProgress.bind(this),this.onResComplete.bind(this))}},t.onResProgress=function(e,t,n){var o;o=0==t?.7:e/t*.7,a.default.sendMsg(i.MSG.RES_LOAD_PROGRESS,o)},t.onResComplete=function(e,t){e?cc.error("mgrSceen.onResLoadComplete error:",e):this.startProcess()},t.startProcess=function(){var e,t=this;0==this.preprocessList.length?this.onProcessComplete():e=r.default.startFrameLoop(function(){var n=t.curProcessIndex++;t.preprocessList[n]();var o=t.curProcessIndex/t.preprocessList.length*(1-.7)+.7;a.default.sendMsg(i.MSG.RES_LOAD_PROGRESS,o),t.curProcessIndex>=t.preprocessList.length&&(r.default.stopFrameLoop(e),t.onProcessComplete())})},t.onProcessComplete=function(){this.runningScene=this.nextScene,this.nextScene=null,this.runningScene.onEnter(this.nextSceneparams),this.nextSceneparams=null,a.default.sendMsg(i.MSG.RES_LOAD_END),this._isBusy=!1},t._isBusy=!1,t.runningScene=null,t.nextScene=null,t.nextSceneparams=null,t.curProcessIndex=0,t.preprocessList=null,t}(o.default);n.default=c,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../ui/PanelLoading":"PanelLoading","../utils/Timer":"Timer","./_mgrBase":"_mgrBase","./mgrPanel":"mgrPanel"}],mgrSdk:[function(e,t,n){"use strict";cc._RF.push(t,"2a8d2qu/DhBz6dXCQ4lWrFz","mgrSdk"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("../utils/JsBridge"),i=e("./mgrAdv"),r=e("../Config"),s=e("../_G"),l=e("../common/Const"),c=e("./mgrGoal"),u=e("../utils/Mathf"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){a.registerCmd("/c/channelInfoResult",this.onChannelInfoResult.bind(this)),a.registerCmd("/c/getLoginUserMessage",this.onMsgGetLoginUserMessage.bind(this)),a.registerCmd("/c/shareResult",this.onShareResult.bind(this))},t.start=function(){this.debugMode&&this.hotfixCop({open_adv:"100;100;100;100;100;100;100;100"}),a.sendToSdk("/c/setVersion","")},t.onChannelInfoResult=function(e){console.log("-- > onChannelInfoResult");e.payInfo;var t=JSON.parse(e.copInfo);this.hotfixCop(t)},t.onMsgGetLoginUserMessage=function(e){this.shareEnabled=!!e.isOpenShare,this.channelRankEnabled=!!e.isUseSdkRank,s.default.sendMsg(l.MSG.COP_CHANGED)},t.onShareResult=function(e){1==e.code&&(c.default.commit(l.ACTION_ID.SHARE),s.default.sendMsg(l.MSG.SHARE_SUC,e.userData))},t.hotfixCop=function(e){e=e||{},i.default.hotfixCop(e),s.default.sendMsg(l.MSG.COP_CHANGED)},t.share=function(e,t,n,o){null==e&&(e="");var i=u.default.Random(r.default.share_content.length)-1;null==t&&(t=r.default.share_content[i]),null==n&&(n=r.default.share_content[i]),null==o&&(o=r.default.share_image_url[i]),a.sendToSdk("/c/openShare",{title:t,content:n,imagePath:o,url:"",userData:e}),this.debugMode&&this.onShareResult({code:1,userData:e})},t.debugMode=!1,t.COP={},t.shareEnabled=!1,t.channelRankEnabled=!1,t}(o.default);n.default=d,cc._RF.pop()},{"../Config":"Config","../_G":"_G","../common/Const":"Const","../utils/JsBridge":"JsBridge","../utils/Mathf":"Mathf","./_mgrBase":"_mgrBase","./mgrAdv":"mgrAdv","./mgrGoal":"mgrGoal"}],mgrShader:[function(e,t,n){"use strict";cc._RF.push(t,"fee04Rfkl1NMY2LH54eEmyo","mgrShader"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.setShader=function(t,n){return __awaiter(this,void 0,void 0,function(){var o,a,i;return __generator(this,function(r){return null==(o=e.shaderPrograms[n])&&(o=new cc.GLProgram,a="attribute vec4 a_position;\n            attribute vec2 a_texCoord;\n            attribute vec4 a_color;\n            varying vec4 v_fragmentColor; \n            varying vec2 v_texCoord; \n            void main() \n            { \n                gl_Position = CC_PMatrix * a_position;\n                v_fragmentColor = a_color; \n                v_texCoord = a_texCoord; \n            }",cc.log("vertSourceCode:\n"+a),i="#ifdef GL_ES\n            precision lowp float;\n            #endif\n            \n            varying vec4 v_fragmentColor;\n            varying vec2 v_texCoord;\n            void main()\n            {\n                vec4 c = v_fragmentColor * texture2D(CC_Texture0, v_texCoord);\n                gl_FragColor.xyz = vec3(1, 0, 1);\n                gl_FragColor.w = c.w;\n            }",cc.log("fragSourceCode:\n"+i),cc.sys.isNative?(cc.log("AAAAAAAAA"),o.initWithString(a,i)):(cc.log("BBBBBBBB"),o.initWithString(a,i)),o.link(),o.updateUniforms(),this.shaderPrograms[n]=o),t._sgNode.setShaderProgram(o),[2]})})},e._promiseLoadFile=function(e){return new Promise(function(t,n){e=cc.url.raw(e),cc.loader.load(e,function(e,o){e?n(null):t(o)})})},e.setGray=function(t){if(t instanceof cc.Label){var n=t.node.getComponent(cc.LabelOutline);if(!this.textColorCache[t.node.uuid]){var o=null;n&&(o=n.color);var a={color:t.node.color,outlineColor:o};this.textColorCache[t.node.uuid]=a}var i=this.textColorCache[t.node.uuid].color,r=this.textColorCache[t.node.uuid].outlineColor,s=.2126*i.getR()+.7152*i.getG()+.0722*i.getB();return t.node.color=cc.color(s,s,s),void(n&&(s=.2126*r.getR()+.7152*r.getG()+.0722*r.getB(),n.color=cc.color(s,s,s)))}e.setShader(t,"gray")},e.setNormal=function(t){if(t instanceof cc.Label){var n=this.textColorCache[t.node.uuid]||{};t.node.color=n.color||t.node.color;var o=t.node.getComponent(cc.LabelOutline);o&&(o.color=n.outlineColor||o.color)}else e.setShader(t,"normal")},e.shaderPrograms=[],e.textColorCache={},e}();n.default=o,cc._RF.pop()},{}],mgrStatistics:[function(e,t,n){"use strict";cc._RF.push(t,"dfc820QtYNIxIBs9yWgLkKw","mgrStatistics"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("./mgrRecord"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){},t.saveData=function(){a.default.setData("_statistics_info_",this.m_data)},t.m_data=null,t}(o.default);n.default=i,cc._RF.pop()},{"./_mgrBase":"_mgrBase","./mgrRecord":"mgrRecord"}],mgrSwitch:[function(e,t,n){"use strict";cc._RF.push(t,"d8ccaNLirVDqYY6xDyyK4+5","mgrSwitch"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./_mgrBase"),i=e("../utils/Timer"),r=e("./mgrRecord"),s=e("../utils/Tools"),l=e("../generate/db"),c=e("../common/Const");(function(e){e[e.DAY_BY_DAY=1]="DAY_BY_DAY",e[e.TIME_TO_TIME=2]="TIME_TO_TIME",e[e.GROUP=3]="GROUP"})(o=n.SWITCH_TYPE||(n.SWITCH_TYPE={}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this.m_data=r.default.getData("_switch_data_")||{};var e=l.default.get_switch_db_map();for(var t in e){var n=e[t];this.initSwitch(n)}this._onUpdate(),this.dailyActive=this.active(c.SWITCH_ID.DAILY),this.weeklyActive=this.active(c.SWITCH_ID.WEEKLY),cc.log("switch active daily:"+this.dailyActive+"  weekly:"+this.weeklyActive)},t.start=function(){i.default.callLoop(1,this._onUpdate.bind(this),!0)},t.saveRecord=function(){r.default.setData("_switch_data_",this.m_data)},t.initSwitch=function(e){if(!this.m_data[e.id]){var t={active:e.active,count:0};switch(e.type){case o.DAY_BY_DAY:t.switchTime=s.default.getMidnightTime(s.default.getTime()+86400*parseInt(e.value));break;case o.TIME_TO_TIME:var n=s.default.splitToNumber(e.value,":");t.startTime=3600*n[0]+60*n[1],t.endTime=t.startTime+e.duration,t.lastCheckDay=s.default.getMidnightTime();break;case o.GROUP:e.count=1}t.count=e.count,this.m_data[e.id]=t,this.saveRecord(),cc.log("---\x3e add switch",e.id,t.active,t.count)}},t.check=function(e){if(!e)return!0;var t=this.m_data[e];return t?t.active&&0!=t.count:(cc.error("can't check switch by id "+e),!1)},t.active=function(e){return!e||!!this.check(e)&&(this.m_data[e].count--,this.saveRecord(),!0)},t.getCount=function(e){if(!e)return 0;var t=this.m_data[e];return t?t.count:(cc.error("can't check switch by id ",e),0)},t.reset=function(e,t){if(e){var n=this.m_data[e];if(n){var a=l.default.get_switch_db(e);switch(a.type){case o.TIME_TO_TIME:var i=s.default.getTime();n.startTime=i-s.default.getMidnightTime(i),n.endTime=n.startTime+a.duration}n.active=a.active,n.count=t||a.count,this.saveRecord()}else cc.error("can't check switch by id ",e)}},t._onUpdate=function(){var e=s.default.getTime();for(var t in this.m_data){var n=this.m_data[t],a=l.default.get_switch_db(t);switch(a.type){case o.DAY_BY_DAY:this.updateSwitchByTypeDayByDay(n,e,a);break;case o.TIME_TO_TIME:this.updateSwitchByTypeTimeToTime(n,e,a)}}},t.updateSwitchByTypeDayByDay=function(e,t,n){e.switchTime<=t&&(e.switchTime=s.default.getMidnightTime(t+86400*parseInt(n.value)),e.active=!0,e.count=n.count,this.saveRecord())},t.updateSwitchByTypeTimeToTime=function(e,t,n){var o=s.default.getMidnightTime(t),a=!1,i=t-o;i>=e.startTime&&i<=e.endTime&&(a=!0),o!=e.lastCheckDay?(e.lastCheckDay=o,a&&(e.count=n.count),e.active=a,this.saveRecord()):e.active!=a&&(e.active=a,a&&(e.count=n.count),this.saveRecord())},t.m_data=null,t.dailyActive=!1,t.weeklyActive=!1,t}(a.default);n.default=u,cc._RF.pop()},{"../common/Const":"Const","../generate/db":"db","../utils/Timer":"Timer","../utils/Tools":"Tools","./_mgrBase":"_mgrBase","./mgrRecord":"mgrRecord"}],mgrUp:[function(e,t,n){"use strict";cc._RF.push(t,"6c72ekDCbJACpyiJOwy1t9e","mgrUp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./_mgrBase"),a=e("./mgrRecord"),i=e("../_G"),r=e("../generate/db"),s=e("./mgrItem"),l=e("./mgrAlert"),c=e("../common/Const"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onload=function(){this.recordData=a.default.getData("_up_data")||{}},t.start=function(){var e=r.default.get_up_db_map();for(var t in e);},t.saveRecord=function(){a.default.setData("_up_data",this.recordData)},t.getMaxLevel=function(e){var t=r.default.get_up_db_map()[e];return t?t.length-1:(cc.error("mgrUp.getMaxLevel: can't find upId["+e+"]"),-1)},t.getReqItemInfo=function(e,t){null==t&&(t=this.query(e));var n=r.default.get_up_db(e,t);return{itemId:n.reqId,count:n.reqCnt}},t.active=function(e){if(!e)return!1;var t=this.recordData[e];return!t&&0!=t&&(this.recordData[e]=0,this.saveRecord(),!0)},t.query=function(e){if(!e)return cc.error("mgrUp.query: query upId is invalid"),-1;var t=this.recordData[e];return t||0==t?t:(cc.error("mgrUp.query:  active upItem before query."),-1)},t.unlock=function(e){if(!e)return cc.error("mgrUp.unlock upId is invalid"),!1;if(0!==this.recordData[e])return cc.warn("ModuleUp.unlock currentUpId is unlocked! upId:%s",e),!1;var t=this.getUnlockReqItem(e);return s.default.subItem(t.itemId,t.count)?(this.recordData[e]=1,this.saveRecord(),i.default.sendMsg(c.MSG.UP_UNLOCK_SUC,e),!0):(l.default.alertNotEnough(t.itemId),!1)},t.lvup=function(e){if(!e)return!1;var t=this.recordData[e];if(void 0==t)return cc.error("mgrUp.lvup: active upItem before lvup."),!1;var n=this._getLackItemInfo(e,t);return n?(l.default.alertItems([n]),!1):this._produce(e)},t._produce=function(e){var t=this.recordData[e];if(t>=this.getMaxLevel(e))return!1;var n=r.default.get_up_db(e,t);return!!s.default.subItem(n.reqId,n.reqCnt)&&(t++,this.recordData[e]=t,this.saveRecord(),i.default.sendMsg(c.MSG.UP_LVUP_SCU,e),!0)},t.getUnlockReqItem=function(e){var t=r.default.get_up_db(e,0),n=t.payId;return{itemId:t.reqId,count:t.reqCnt,payId:n}},t._getLackItemInfo=function(e,t){var n=r.default.get_up_db(e,t);return this._checkItem(n.reqId,n.reqCnt)?null:{itemId:n.reqId,count:n.reqCnt}},t._checkItem=function(e,t){return s.default.getItemCount(e)>=t},t.recordData=null,t}(o.default);n.default=u,cc._RF.pop()},{"../_G":"_G","../common/Const":"Const","../generate/db":"db","./_mgrBase":"_mgrBase","./mgrAlert":"mgrAlert","./mgrItem":"mgrItem","./mgrRecord":"mgrRecord"}],sdktools:[function(e,t,n){"use strict";cc._RF.push(t,"8c64bAmLLNJrrvheu7odyFS","sdktools"),Object.defineProperty(n,"__esModule",{value:!0}),n.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);if(null!=n)return decodeURI(n[2]);return null},n.setTimer=function(e,t){return setTimeout(t,e)},n.loadJs=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.addEventListener("load",function(e){console.log("\u52a0\u8f7d\u5b8c\u6210"),t()}),n.src=e,n.defer="defer",document.getElementsByTagName("head")[0].appendChild(n)},cc._RF.pop()},{}],ulsdkBaiduModuleAdv:[function(e,t,n){"use strict";cc._RF.push(t,"c1aa7t7W6NAtJf44v/98GJP","ulsdkBaiduModuleAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=r(e("../../sdktools/sdktools.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=null,l=null,c=!1,u=null,d=null,f=!0,p=null,h=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(e,t){console.log("ULSDK_TEST......initAdv......initAdv.."),s=swan.createRewardedVideoAd({adUnitId:e,appSid:t}),this.videoCallBack()}},{key:"openBannerAdv",value:function(e,t,n,o){if(!f&&u)return u.show(),void console.log("ULSDK_TEST......openBannerAdv......\u590d\u7528banner..");u&&(u.destroy(),u=null,console.log("ULSDK_TEST......openBannerAdv......destroy.."));var r=swan.getSystemInfoSync(),s=r.screenHeight;(u=swan.createBannerAd({adUnitId:e,appSid:t,style:{left:.1,top:10,width:r.screenWidth}})).style.top=s-u.style.height,d=n,u.onError(function(e){var t=new Object;t.code=0,t.msg="banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t.advData=d;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o),f=!0,console.log("ULSDK_TEST......banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25!",e)}),u.show(),console.log("ULSDK_TEST......openBannerAdv......show.."),f=!1,clearTimeout(p);p=i.setTimer(o,function(){f=!0,console.log("ULSDK_TEST......bannerTimerFlag \u72b6\u6001\u6539\u53d8")})}},{key:"closeBannerAdv",value:function(){u&&u.hide()}},{key:"openVideoAdv",value:function(e,t,n){s||(s=swan.createRewardedVideoAd({adUnitId:e,appSid:t}),this.videoCallBack()),c?console.log("\u5e7f\u544a\u6b63\u5728\u64ad\u653e\u4e2d"):(l=n,c=!0,s.load().then(function(){s.show().then(function(){console.log("\u5e7f\u544a\u5c55\u793a\u6210\u529f....1")})}).catch(function(e){s.load().then(function(){return s.show().then(function(){console.log("\u5e7f\u544a\u5c55\u793a\u6210\u529f....2")})}).catch(function(e){console.log("videoLoad.....err....",e);var t=new Object;t.code=0,t.msg="\u5e7f\u544a\u64ad\u653e\u5931\u8d25"+e.errMsg,t.advData=l;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o),c=!1,console.log("\u5e7f\u544a\u64ad\u653e\u5931\u8d25")})}))}},{key:"videoCallBack",value:function(){s.onClose(function(e){if(c=!1,e.isEnded){console.log("\u6fc0\u52b1\u89c6\u9891\u5b8c\u6574\u64ad\u653e\u540e\u5173\u95ed");var t=new Object;t.code=1,t.msg="\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1",t.advData=l;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o)}else{console.log("\u6fc0\u52b1\u89c6\u9891\u4e2d\u9014\u88ab\u5173\u95ed");var i=new Object;i.code=0,i.msg="\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1",i.advData=l;var r=new Object;r.cmd="/c/advShowResult",r.data=i;var s=JSON.stringify(r);a.manageSdkResponse(s),console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1")}})}}]),e}();t.exports=new h,cc._RF.pop()},{"../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkBaiduModule:[function(e,t,n){"use strict";cc._RF.push(t,"6b8f6zsMnREBr+9Bf4cCWJn","ulsdkBaiduModule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=r(e("../../net/ULCop.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=e("./ulsdkBaiduModuleAdv.js"),l=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");i.initCopInfo(t,o,e,n);var r=this.getChannelConfigByKey("videoId"),l=this.getChannelConfigByKey("appSid");s.initAdv(r,l)}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(i.IsGetCopData)console.log("setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210=====================",i.IsGetCopData),this.doSetVersion();else{console.log("setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210-------------\u5ef6\u65f6------------",e,i.IsGetCopData);var t=this;setTimeout(function(){t.doSetVersion()},e)}}},{key:"doSetVersion",value:function(){var e={},t={userId:"",isClosePay:0,isOpenShare:this.getChannelConfigByKey("isOpenShare"),isUseSdkRank:this.getChannelConfigByKey("isUseSdkRank"),jumpGamesCount:0};e.cmd="/c/getLoginUserMessage",e.data=t;var n=JSON.stringify(e);a.manageSdkResponse(n),console.log("setVersion:",e);var o={cmd:"/c/channelInfoResult"},r={},s=a.getConfigByKey("commonCopConfig"),l=this.getChannelConfigByKey("copDefaultConfig");r.copInfo=i.getCopData(s,l),o.data=r;var c=JSON.stringify(o);a.manageSdkResponse(c)}},{key:"getUserId",value:function(){return""}},{key:"openShare",value:function(e){}},{key:"openPay",value:function(e){}},{key:"saveRankData",value:function(e){}},{key:"getRankData",value:function(e){}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("baidu")[e]}},{key:"openAdv",value:function(e){console.log("ULSDK_TEST........openAdv....openAdv.....",e);var t=e.type,n=this.getChannelConfigByKey("appSid");switch(t){case"banner":var o=this.getChannelConfigByKey("bannerId"),a=this.getChannelConfigByKey("bannerTimer");s.openBannerAdv(o,n,e,a);break;case"video":var i=this.getChannelConfigByKey("videoId");s.openVideoAdv(i,n,e)}}},{key:"closeAdv",value:function(e){switch(e.type){case"banner":s.closeBannerAdv(e)}}}]),e}();t.exports=new l,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkBaiduModuleAdv.js":"ulsdkBaiduModuleAdv"}],ulsdkHeadLineModuleAdv:[function(e,t,n){"use strict";cc._RF.push(t,"414abxaW6ZLFbvvfushp4hF","ulsdkHeadLineModuleAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=r(e("../../sdktools/sdktools.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=null,l=!1,c=null,u=null,d=!0,f=null,p=null,h=null,g="open",m=!1,_=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(){}},{key:"openBannerAdv",value:function(e,t,n){console.log("openBannerAdv-------",e),g="open";var o=this;if(!d&&u)return this.bannerRefresh(),void console.log("ULSDK_TEST......openBannerAdv......\u590d\u7528banner..");m=!1,u&&u.destroy(),clearTimeout(h);h=i.setTimer(800,function(){console.log("openBannerAdv----222---",e),p=n,o.bannerAdCallBack(e),d=!1,clearTimeout(f);f=i.setTimer(t,function(){d=!0,console.log("ULSDK_TEST......bannerTimerFlag \u72b6\u6001\u6539\u53d8")})})}},{key:"bannerAdCallBack",value:function(e){var t=tt.getSystemInfoSync();console.log(t);var n=t.windowWidth,o=t.windowHeight,i=.1*t.windowWidth;console.log("openBannerAdv----333---",e,n),(u=tt.createBannerAd({adUnitId:e,style:{left:i,top:o-9*n/16,width:288}})).style.left=(n-u.style.width)/2,u.style.top=o-9*u.style.width/16,console.log("openBannerAdv----bannerAd---",u),u.onResize(function(e){console.log("onResize---------------",e.width,e.height)}),u.onError(function(e){console.log("bannerAd.onError------",e);var t=new Object;t.code=0,t.msg="banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25!",t.advData=p;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o),d=!0});var r=this;u.onLoad(function(e){m=!0,r.bannerRefresh()})}},{key:"closeBanner",value:function(){g="close",u&&this.bannerRefresh()}},{key:"bannerRefresh",value:function(){m?"open"==g?(console.log("bannerRefresh open  banner!"),u.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f");var e=new Object;e.code=1,e.msg="\u5e7f\u544a\u5c55\u793a\u6210\u529f!",e.advData=p;var t=new Object;t.cmd="/c/advShowResult",t.data=e;var n=JSON.stringify(t);a.manageSdkResponse(n)}).catch(function(e){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",e)})):(console.log("bannerRefresh \u5173\u95edbanner!"),u.hide()):console.log("bannerRefresh bannerLoad  \u672a\u52a0\u8f7d\u5b8c!")}},{key:"openVideoAdv",value:function(e,t){if(console.log("openVideoAdv-------",e),l){var n=new Object;n.code=0,n.msg="\u5e7f\u544a\u6b63\u5728\u64ad\u653e\u4e2d!",n.advData=t;var o=new Object;o.cmd="/c/advShowResult",o.data=n;var i=JSON.stringify(o);a.manageSdkResponse(i)}else s||(s=tt.createRewardedVideoAd({adUnitId:e}),l=!0,this.videoAdCallBack()),l=!0,c=t,s.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),s.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f")})}),console.log("openVideoAdv-----666--",e)}},{key:"videoAdCallBack",value:function(){s.onLoad(function(e){console.log("videoAd----\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),s.onError(function(e){var t=new Object;t.code=0,t.msg="\u64ad\u653e\u5e7f\u544a\u5931\u8d25!",t.advData=c;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o),l=!1}),s.onClose(function(e){var t=new Object;e.isEnded?(t.code=1,t.msg="\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"):(t.code=0,t.msg="\u5e7f\u544a\u6ca1\u6709\u64ad\u653e\u5b8c"),t.advData=c;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o),l=!1})}}]),e}();t.exports=new _,cc._RF.pop()},{"../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkHeadLineModule:[function(e,t,n){"use strict";cc._RF.push(t,"e117cJlhxlI+Zdhvadan0+A","ulsdkHeadLineModule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=(r(e("../../sdktools/sdktools.js")),r(e("../../net/ULCop.js")));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=0,l=null,c="",u=e("./ulsdkHeadLineModuleAdv.js"),d=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");i.initCopInfo(t,o,e,n),s=1,l=tt.getGameRecorderManager(),this.initRecorderCallback()}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(i.IsGetCopData)console.log("ULSDK_TEST.........setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210==========console=======isGetUserId====",i.IsGetCopData),this.doSetVerSion();else{console.log("ULSDK_TEST........setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210--------console-----\u5ef6\u65f6------------",e,i.IsGetCopData);var t=this;setTimeout(function(){t.doSetVerSion()},e)}}},{key:"doSetVerSion",value:function(){console.log("ULSDK_TEST.......doSetVerSion...-------------\u5ef6\u65f6-----",i.IsGetCopData);var e={},t=this.getChannelConfigByKey("isOpenShare"),n=this.getChannelConfigByKey("isUseSdkRank"),o={userId:"",isClosePay:s,isOpenShare:t,isUseSdkRank:n,jumpGamesCount:0};e.cmd="/c/getLoginUserMessage",e.data=o;var r=JSON.stringify(e);a.manageSdkResponse(r),console.log("setVersion:",e);var l={cmd:"/c/channelInfoResult"},c={},u=a.getConfigByKey("commonCopConfig"),d=(a.getConfigByKey("oppo"),this.getChannelConfigByKey("copDefaultConfig"));c.copInfo=i.getCopData(u,d),l.data=c;var f=JSON.stringify(l);a.manageSdkResponse(f)}},{key:"getUserId",value:function(){return""}},{key:"userLogin",value:function(e){}},{key:"userIsLogin",value:function(e){}},{key:"openShare",value:function(e){}},{key:"openPay",value:function(e){}},{key:"openAdv",value:function(e){switch(console.log("ULSDK_TEST.......openAdv...-------------mUserId-----",""),e.type){case"banner":var t=this.getChannelConfigByKey("banner_adunit"),n=this.getChannelConfigByKey("bannerTimer");u.openBannerAdv(t,n,e);break;case"video":var o=this.getChannelConfigByKey("video_adunit");u.openVideoAdv(o,e)}}},{key:"closeAdv",value:function(e){switch(e.type){case"banner":u.closeBanner()}}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("headline")[e]}},{key:"saveRankData",value:function(e){}},{key:"getRankData",value:function(e){}},{key:"initRecorderCallback",value:function(){l.onStart(function(e){console.log("\u5f55\u5c4f\u5f00\u59cb",e);var t=new Object;t.code=1,t.msg="\u5f00\u59cb\u5c0f\u8996\u983b\u5f55\u5236\u6210\u529f!";var n=new Object;n.cmd="/c/recorderVideoResult",n.data=t,a.manageSdkResponse(JSON.stringify(n))}),l.onPause(function(){console.log("\u5f55\u5c4f\u5df2\u6682\u505c");var e=new Object;e.code=2,e.msg="\u6682\u505c\u5c0f\u8996\u983b\u5f55\u5236\u6210\u529f!";var t=new Object;t.cmd="/c/recorderVideoResult",t.data=e,a.manageSdkResponse(JSON.stringify(t))}),l.onResume(function(){console.log("\u5f55\u5c4f\u5df2\u6062\u590d");var e=new Object;e.code=3,e.msg="\u6062\u590d\u5c0f\u8996\u983b\u5f55\u5236\u6210\u529f!";var t=new Object;t.cmd="/c/recorderVideoResult",t.data=e,a.manageSdkResponse(JSON.stringify(t))}),l.onStop(function(e){console.log(e.videoPath),c=e.videoPath;var t=new Object;t.code=4,t.msg="\u505c\u6b62\u5c0f\u8996\u983b\u5f55\u5236\u6210\u529f!";var n=new Object;n.cmd="/c/recorderVideoResult",n.data=t,a.manageSdkResponse(JSON.stringify(n))}),l.onError(function(e){console.log("\u5f55\u5c4f\u5df2\u6682\u505c..errMsg....",e);var t=new Object;t.code=0,t.msg="\u5f55\u5236\u89c6\u9891\u51fa\u9519!";var n=new Object;n.cmd="/c/recorderVideoResult",n.data=t,a.manageSdkResponse(JSON.stringify(n))})}},{key:"recorderGameVideo",value:function(e){switch(e.action){case"start":console.log("recorderGameVideo..start....");var t=parseInt(e.durationTime);t<10&&(t=10),t>120&&(t=120),l.start({duration:t});break;case"pause":console.log("recorderGameVideo..pause...."),l.pause();break;case"resume":console.log("recorderGameVideo..resume...."),l.resume();break;case"stop":console.log("recorderGameVideo..stop...."),l.stop()}}},{key:"shareGameVideo",value:function(e){console.log("shareGameVideo......"),tt.shareVideo({videoPath:""+c,success:function(){console.log("\u5206\u4eab\u6210\u529f\uff01");var e=new Object;e.code=1,e.msg="\u5206\u4eab\u5c0f\u8996\u983b\u6210\u529f!";var t=new Object;t.cmd="/c/shareVideoResult",t.data=e,a.manageSdkResponse(JSON.stringify(t))},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25\uff01");var t=new Object;t.code=0,t.msg="\u5206\u4eab\u5c0f\u8996\u983b\u5931\u6557!";var n=new Object;n.cmd="shareVideoResult",n.data=t,a.manageSdkResponse(JSON.stringify(n))}});var t=tt.getSystemInfoSync();console.log("shareGameVideo--phone",t),"douyin"==t.appName.toLowerCase()&&setTimeout(function(){var e=new Object;e.code=1,e.msg="\u5206\u4eab\u5c0f\u8996\u983b\u6210\u529f!";var t=new Object;t.cmd="/c/shareVideoResult",t.data=e,a.manageSdkResponse(JSON.stringify(t))},1e3)}}]),e}();t.exports=new d,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkHeadLineModuleAdv.js":"ulsdkHeadLineModuleAdv"}],ulsdkLiMiAdv:[function(e,t,n){"use strict";cc._RF.push(t,"e035eZdUAxJt56mgwB86RGn","ulsdkLiMiAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=r(e("../../sdktools/sdktools.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=!1,l=new Array,c=!1,u=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(){console.log("...........initAdv..........")}},{key:"openVideoAdv",value:function(e){if(s)console.log("ULSDK_TEST......openVideoAdv......\u5e7f\u544a\u6b63\u5728\u64ad\u653e\u4e2d...");else{console.log("ULSDK_TEST......openVideoAdv......\u6253\u5f00\u89c6\u9891......");try{var t=BK.Advertisement.createVideoAd()}catch(e){console.log("ULSDK_TEST......setVideoAdCallBack......videoAd....videoAd....error.."),console.log(e)}console.log("ULSDK_TEST......setVideoAdCallBack......videoAd....videoAd......",t),t.onLoad(function(){console.log("ULSDK_TEST......setVideoAdCallBack......\u89c6\u9891\u52a0\u8f7d\u6210\u529f......"),t.show(),BK.Script.log(1,1,"onLoad")}),t.onError(function(n){s=!1,t.destory(),BK.Script.log(1,1,"onError code:",n);var o=new Object;o.code=0,o.msg="\u89c6\u9891\u52a0\u8f7d\u5931\u8d25",o.advData=e;var i=new Object;i.cmd="/c/advShowResult",i.data=o;var r=JSON.stringify(i);a.manageSdkResponse(r),console.log("ULSDK_TEST......setVideoAdCallBack......\u89c6\u9891\u52a0\u8f7d\u5931\u8d25......",n)}),t.onPlayStart(function(){s=!0,console.log("ULSDK_TEST......setVideoAdCallBack......\u5f00\u59cb\u64ad\u653e\u89c6\u9891......"),BK.Script.log(1,1,"onPlayStart")}),t.onPlayFinish(function(){console.log("ULSDK_TEST......setVideoAdCallBack......\u8fbe\u5230\u770b\u5e7f\u544a\u65f6\u957f\u8981\u6c42\uff0c\u53ef\u4ee5\u4e0b\u53d1\u5956\u52b1......."),s=!1,c=!0,BK.Script.log(1,1,"onPlayFinish")}),t.onClose(function(){s=!1,t||t.destory();var n=new Object;c?(n.code=1,n.msg="\u8fbe\u5230\u770b\u5e7f\u544a\u65f6\u957f\u8981\u6c42\uff0c\u53ef\u4ee5\u4e0b\u53d1\u5956\u52b1"):(n.code=0,n.msg="\u7528\u6237\u5173\u95ed\u5e7f\u544a"),c=!1,n.advData=e;var o=new Object;o.cmd="/c/advShowResult",o.data=n;var i=JSON.stringify(o);a.manageSdkResponse(i),console.log("ULSDK_TEST......setVideoAdCallBack......\u7528\u6237\u5173\u95ed\u5e7f\u544a.......")})}}},{key:"openBannerAdv",value:function(e,t){for(var n=0;n<l.length;n++)if("open"==l[n].state)return;var o=this,a=BK.Advertisement.createBannerAd({viewId:e}),i={state:"open",handler:a};l.push(i),a.onLoad(function(){"close"==i.state?o.closeBannerAdvLater(i):(a.show(),console.log("ULSDK_TEST......openBannerAdv......\u5e7f\u544a\u52a0\u8f7d\u6210\u529f.....111.."))}),a.onError(function(e){var t=e.msg;e.code;console.log("ULSDK_TEST......openBannerAdv....onError..\u52a0\u8f7d\u5931\u8d25.......",t)}),a.offError(function(e){var t=e.msg;e.code;console.log("ULSDK_TEST......openBannerAdv......offError....sss...",t)})}},{key:"clearBanner",value:function(e){for(var t=0;t<l.length;t++)l[t]==e&&(e.handler.destory(),clearTimeout(e.timerId),l.splice(t,1))}},{key:"closeBannerAdvLater",value:function(e){if("close"!=e.state){e.state="close";var t,n=this;t=i.setTimer(100,function(){n.clearBanner(e)}),console.log("ULSDK_TEST......openBannerAdv......\u5e7f\u544a\u5df2\u5173\u95ed.....111.."),e.timerId=t}}},{key:"closeBannerAdv",value:function(){console.log("ULSDK_TEST......closeBannerAdv......bannerIsShow...bannerIsShow....",!1);for(var e=0;e<l.length;e++)"open"==l[e].state&&this.closeBannerAdvLater(l[e])}}]),e}();t.exports=new u,cc._RF.pop()},{"../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkLiMiModule:[function(e,t,n){"use strict";cc._RF.push(t,"82d64GOtwpKlZzAcKQKV27i","ulsdkLiMiModule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=r(e("../../net/ULCop.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=e("./ulsdkLiMiAdv.js"),l="",c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");l=e+"_limi_"+GameStatusInfo.openId,i.initCopInfo(t,o,e,n),s.initAdv()}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(i.IsGetCopData)console.log("ULSDK_TEST.........setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210==========console===========",i.IsGetCopData),this.doSetVerSion();else{console.log("ULSDK_TEST........setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210--------console-----\u5ef6\u65f6------------",e,i.IsGetCopData);var t=this;setTimeout(function(){t.doSetVerSion()},e)}}},{key:"doSetVerSion",value:function(){console.log("ULSDK_TEST.........doSetVerSion...doSetVerSion--------console-----\u5ef6\u65f6-----",i.IsGetCopData);var e={},t=this.getChannelConfigByKey("isUseSdkRank"),n=this.getChannelConfigByKey("isOpenShare"),o=this.getChannelConfigByKey("jumpGames"),r={userId:l,isClosePay:0,isOpenShare:n,isUseSdkRank:t,jumpGamesCount:o.length};e.cmd="/c/getLoginUserMessage",e.data=r;var s=JSON.stringify(e);a.manageSdkResponse(s),console.log("ULSDK_TEST....setVersion:",e);var c={cmd:"/c/channelInfoResult"},u={},d=a.getConfigByKey("commonCopConfig"),f=this.getChannelConfigByKey("copDefaultConfig");u.copInfo=i.getCopData(d,f),c.data=u;var p=JSON.stringify(c);a.manageSdkResponse(p)}},{key:"getUserId",value:function(){return l}},{key:"userLogin",value:function(e){}},{key:"userIsLogin",value:function(e){}},{key:"openShare",value:function(e){var t=e.content;t||(t=this.getChannelConfigByKey("shareTitle"));var n=e.imagePath;n||(n=this.getChannelConfigByKey("shareImgUrl"));var o=new Object;o.cmd="/c/shareResult";var i=new Object;BK.Share.share({qqImgUrl:n,socialPicPath:"GameRes://inviteIcon.png",title:"",summary:t,extendInfo:"",isToFriend:!0,success:function(t){BK.Console.log("Waaaah! share success",t.code,JSON.stringify(t.data)),i.code=1,i.msg="\u5206\u4eab\u6210\u529f\uff01",i.userData=e.userData,o.data=i,a.manageSdkResponse(JSON.stringify(o)),console.log("ULSDK_TEST.........\u5206\u4eab\u6210\u529f........console.....errCode..")},fail:function(t){BK.Console.log("Waaaah! share fail",t.code,JSON.stringify(t.msg)),i.code=0,i.msg="\u5206\u4eab\u5931\u8d25\uff01",i.userData=e.userData,o.data=i,a.manageSdkResponse(JSON.stringify(o)),console.log("ULSDK_TEST.........\u5206\u4eab\u5931\u8d25.........console...errCode...")},complete:function(){BK.Console.log("Waaaah! share complete")}})}},{key:"openPay",value:function(e){var t=a.getConfigByKey("gameOrientation"),n=e.payInfo.payId,o=a.getConfigByKey("pay_code");try{var i=o[n].limi_payId}catch(t){var r={cmd:"/c/payResult"},s={code:"0",msg:"payId \u4e0d\u5b58\u5728"};s.payData=e,r.data=s;var l=JSON.stringify(r);return void a.manageSdkResponse(l)}var c=[{itemId:i,itemNum:1}];BK.QQ.qPayPurchase(t,!0,c,function(n,o){if(console.log("ULSDK_TEST....console..openPay...",t,1,"qPayPurchase errCode:"+n+" data:"+JSON.stringify(o)),0==n){var i={cmd:"/c/payResult"},r={code:"1",msg:"\u652f\u4ed8\u56de\u8c03\u6210\u529f"};r.payData=e,i.data=r;var s=JSON.stringify(i);a.manageSdkResponse(s)}else{var l={cmd:"/c/payResult"},c={code:"0"};c.msg="\u5931\u8d25\u9519\u8bef\u7801-"+n,c.payData=e,l.data=c;var u=JSON.stringify(l);a.manageSdkResponse(u)}})}},{key:"openAdv",value:function(e){switch(console.log("ULSDK_TEST...........openAdv......dataObj....",e),e.type){case"banner":var t=this.getChannelConfigByKey("bannerViewId"),n=this.getChannelConfigByKey("bannerTimer");s.openBannerAdv(t,n);break;case"video":s.openVideoAdv(e)}}},{key:"closeAdv",value:function(e){switch(e.type){case"banner":s.closeBannerAdv()}}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("limi")[e]}},{key:"saveRankData",value:function(e){console.log("ULSDK_TEST.....saveRankData>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>==========111111111111====");var t=new Array,n=new Object;n.openId=GameStatusInfo.openId,n.startMs=e.startTime,n.endMs=e.endTime;var o=this.getChannelConfigByKey("rankNameList"),i=o[e.rankName],r=new Object;"score"!=i&&(2==o.scoreOrder?r.score=99999999999:r.score=0),r[i]=e.score,n.scoreInfo=r,t.push(n);var s=new Object;s.type=e.rankName,s.order=e.order;var l=new Object;"score"!=i&&(l.score={type:o.score,order:o.scoreOrder}),l[i]=s;var c=new Object;c.userData=t,c.attr=l,console.log("ULSDK_TEST.....saveRankData>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>========22222222222======"),console.log(JSON.stringify(c)),BK.QQ.uploadScoreWithoutRoom(1,c,function(e,t,n){BK.Script.log("ULSDK_TEST.......saveRankData..errCode..",e,"cmd......",t,"data..",n);var o=new Object;o.cmd="/c/saveRankResult";var i=new Object;if(0===e){console.log("ULSDK_TEST.....saveRankData>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>===========\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u6210\u529f==="),i.code="1",i.msg="\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u6210\u529f!",o.data=i;var r=JSON.stringify(o);a.manageSdkResponse(r)}else{console.log("ULSDK_TEST.....saveRankData>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>========\u4e0a\u4f20\u5206\u6570\u5931\u8d25======"),BK.Script.log("ULSDK_TEST......saveRankData...",1,1,"\u4e0a\u4f20\u5206\u6570\u5931\u8d25!\u9519\u8bef\u7801\uff1a"+e),i.code="0",i.msg="\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!",o.data=i;var s=JSON.stringify(o);a.manageSdkResponse(s)}})}},{key:"getRankData",value:function(e){var t=e.order,n=e.rankType,o=e.dataNum,i=this.getChannelConfigByKey("rankNameList")[e.rankName];BK.QQ.getRankListWithoutRoom(i,t,n,function(e,t,n){console.log("ULSDK_TEST.....................getRankListWithoutRoom.....++++++++++++++++++++..."),console.log(JSON.stringify(n));var r=new Object;r.cmd="/c/getRankResult";var s=new Object,l=new Object;if(0===e){if(n){var c=n.data.ranking_list.length;o>c&&(o=c);for(var u=0;u<o;++u){var d=n.data.ranking_list[u],f=new Object;f.headUrl=d.url,f.nickName=d.nick,f.userId="",f.score=d[i],d.selfFlag&&(f.selfFlag=!0),s[u+1]=JSON.stringify(f)}l.code="1",l.msg=s,r.data=l;var p=JSON.stringify(r);return console.log("ULSDK_TEST.....................\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u6210\u529f.....++++++++++++++++++++..."),console.log(i),void a.manageSdkResponse(p)}l.code=1,l.msg={},r.data=l;var h=JSON.stringify(r);a.manageSdkResponse(h)}else{BK.Script.log(1,1,"\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!\u9519\u8bef\u7801\uff1a"+e),l.code="-1",l.msg={},r.data=l;var g=JSON.stringify(r);a.manageSdkResponse(g)}})}},{key:"jumpOtherGame",value:function(e){var t=e.gameIndex,n=this.getChannelConfigByKey("jumpGames")[t];BK.QQ.skipGame(n,null);var o={cmd:"/c/jumpGameResult"},i={code:"1",msg:"\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u6210\u529f"};i.userData=e.userData||"",o.data=i;var r=JSON.stringify(o);a.manageSdkResponse(r)}}]),e}();t.exports=new c,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkLiMiAdv.js":"ulsdkLiMiAdv"}],ulsdkM4399minGameAdv:[function(e,t,n){"use strict";cc._RF.push(t,"ba952a1tohFA5v2TsoswYkp","ulsdkM4399minGameAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=i(e("../../ulsdkmanager/ulsdkmanager.js"));i(e("../../sdktools/sdktools.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(){this.getAdvShowCount()}},{key:"getAdvShowCount",value:function(){window.h5api.canPlayAd(function(e){!0,console.log("\u662f\u5426\u53ef\u64ad\u653e\u5e7f\u544a",e.canPlayAd,"\u5269\u4f59\u6b21\u6570",e.remain);var t=new Object;t.video=e.remain,t.banner=1,t.interstitial=1,t.native=1;var n=new Object;n.cmd="/c/advValidCount",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o)})}},{key:"openBannerAdv",value:function(e){}},{key:"closeBannerAdv",value:function(e){}},{key:"openInterstitialAd",value:function(e){}},{key:"openVideoAdv",value:function(e){var t=this;window.h5api.canPlayAd(function(n){if(console.log("ULSDK_TEST.....\u662f\u5426\u53ef\u64ad\u653e\u5e7f\u544a",n.canPlayAd,"\u5269\u4f59\u6b21\u6570",n.remain),n.canPlayAd)window.h5api.playAd(function(n){console.log("ULSDK_TEST.....\u4ee3\u7801:"+n.code+",\u6d88\u606f:"+n.message);var o=new Object;1e4===n.code?console.log("ULSDK_TEST.....\u5f00\u59cb\u64ad\u653e"):10001===n.code?(console.log("ULSDK_TEST.....\u64ad\u653e\u7ed3\u675f"),o.code=1,o.msg="\u64ad\u653e\u7ed3\u675f,\u53ef\u4ee5\u53d1\u653e\u5956\u52b1"):(console.log("ULSDK_TEST.....\u5e7f\u544a\u5f02\u5e38"),o.code=0,o.msg=n.message),o.advData=e;var i=new Object;i.cmd="/c/advShowResult",i.data=o;var r=JSON.stringify(i);a.manageSdkResponse(r),setTimeout(function(){t.getAdvShowCount()},1e3)});else{var o=new Object;o.code=0,o.msg="\u5f53\u524d\u5e76\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\u53ef\u4ee5\u5c55\u793a\uff01",o.advData=e;var i=new Object;i.cmd="/c/advShowResult",i.data=o;var r=JSON.stringify(i);a.manageSdkResponse(r),t.getAdvShowCount()}})}},{key:"openNativeAdv",value:function(e){}}]),e}();t.exports=new r,cc._RF.pop()},{"../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkM4399minGameModule:[function(e,t,n){"use strict";cc._RF.push(t,"c029b4Pz19NSI1UNi3KG6V9","ulsdkM4399minGameModule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(e("../../ulsdkmanager/ulsdkmanager.js")),i=s(e("../../sdktools/sdktools.js")),r=s(e("../../net/ULCop.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var l=e("./ulsdkM4399minGameAdv.js"),c=0,u=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");r.initCopInfo(t,o,e,n);i.loadJs("http://h.api.4399.com/h5mini-2.0/h5api-interface.php",function(){console.log("ULSDK_TEST....initAdvJs......\u5e7f\u544aSDK\u52a0\u8f7d\u5b8c\u6210"),setTimeout(function(){l.initAdv()},1e3)})}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("m4399mingame")[e]}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(r.IsGetCopData&&l.isGetAdvCount)console.log("ULSDK_TEST.........setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210==========console=======isGetUserId====",!1,r.IsGetCopData),this.doSetVerSion();else{console.log("ULSDK_TEST........setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210--------console-----\u5ef6\u65f6------------",e,!1,r.IsGetCopData);var t=this;setTimeout(function(){t.doSetVerSion()},e)}}},{key:"doSetVerSion",value:function(){c=1,console.log("ULSDK_TEST.......doSetVerSion...-------------\u5ef6\u65f6-----",!1,r.IsGetCopData);var e={},t=this.getChannelConfigByKey("isOpenShare"),n=this.getChannelConfigByKey("isUseSdkRank"),o={userId:"",isClosePay:c,isOpenShare:t,isUseSdkRank:n,jumpGamesCount:0};e.cmd="/c/getLoginUserMessage",e.data=o;var i=JSON.stringify(e);a.manageSdkResponse(i),console.log("setVersion:",e);var s={cmd:"/c/channelInfoResult"},l={},u=a.getConfigByKey("commonCopConfig"),d=(a.getConfigByKey("oppo"),this.getChannelConfigByKey("copDefaultConfig"));l.copInfo=r.getCopData(u,d),s.data=l;var f=JSON.stringify(s);a.manageSdkResponse(f)}},{key:"getUserId",value:function(){return""}},{key:"userLogin",value:function(e){var t=new Object;t.cmd="/c/userLoginResult";var n=new Object;n.code=1,n.userData=e.userData,t.data=n,a.manageSdkResponse(JSON.stringify(t))}},{key:"userIsLogin",value:function(e){var t=new Object;t.cmd="/c/userIsLoginResult";var n=new Object;n.loginStatus=!0,t.data=n,a.manageSdkResponse(JSON.stringify(t))}},{key:"openShare",value:function(e){window.h5api.share();var t=new Object;t.cmd="/c/shareResult";var n=new Object;n.code=1,n.msg="\u5206\u4eab\u6210\u529f\uff01",n.userData=e.userData,t.data=n,a.manageSdkResponse(JSON.stringify(t))}},{key:"openPay",value:function(e){}},{key:"openAdv",value:function(e){switch(console.log("ULSDK_TEST.......openAdv...-------------mUserId-----",""),e.type){case"banner":break;case"video":l.openVideoAdv(e)}}},{key:"closeAdv",value:function(e){switch(e.type){case"banner":l.closeBannerAdv()}}},{key:"saveRankData",value:function(e){}},{key:"getRankData",value:function(e){}}]),e}();t.exports=new u,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkM4399minGameAdv.js":"ulsdkM4399minGameAdv"}],ulsdkOppoAdv:[function(e,t,n){"use strict";cc._RF.push(t,"9aaabZ5WKZBVZ/CwAh/4eTd","ulsdkOppoAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=r(e("../../sdktools/sdktools.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=!1,l=!0,c=null,u=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(){var e=document.createElement("div");e.id="oppoBannerId",e.style.width="100%",e.style.position="fixed",e.style.bottom="0px",e.style.zIndex=999,document.body.appendChild(e)}},{key:"openBannerAdv",value:function(e,t,n,o){if(s){console.log("ULSDK_TEST......\u5f53\u524d\u5b58\u5728\u663e\u793a\u5f53\u524d!");var i=document.getElementById("oppoBannerId");i.style.display="",i.style.visibility="visible";var r=new Object;r.code=1,r.msg="banner\u5e7f\u544a\u663e\u793a\u6210\u529f",r.advData=o;var l=new Object;l.cmd="/c/advShowResult",l.data=r;var c=JSON.stringify(l);a.manageSdkResponse(c)}else{console.log("ULSDK_TEST....\u521b\u5efadiv");var u=opUnion.createBannerAd({containerId:"oppoBannerId",posId:e,mediaId:t});u.onLoad(function(e){s=!0;var t=new Object;t.code=1,t.msg="banner\u5e7f\u544a\u663e\u793a\u6210\u529f",t.advData=o;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var i=JSON.stringify(n);a.manageSdkResponse(i),console.log("ULSDK_TEST......banner\u5e7f\u544a\u52a0\u8f7d\u6210\u529f!")}),u.onError(function(e){var t=new Object;t.code=0,t.msg="banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t.advData=o;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var i=JSON.stringify(n);a.manageSdkResponse(i),console.log("ULSDK_TEST......banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25!",e)})}}},{key:"closeBannerAdv",value:function(){var e=document.getElementById("oppoBannerId");e.style.display="none",e.style.visibility="hidden"}},{key:"openInterstitialAd",value:function(e,t,n,o){if(l){var r=opUnion.createInterstitialAd({posId:e,mediaId:t});r.load().then(function(){r.show().then(function(){console.log("ULSDK_TEST....\u63d2\u5c4f\u5e7f\u544a\u663e\u793a"),l=!1;var e=new Object;e.code=1,e.msg="\u63d2\u5c4f\u2f34\u544a\u52a0\u8f7d\u6210\u529f",e.advData=o;var t=new Object;t.cmd="/c/advShowResult",t.data=e;var r=JSON.stringify(t);a.manageSdkResponse(r),clearTimeout(c);c=i.setTimer(n,function(){l=!0,console.log("ULSDK_TEST......interstitialFlag \u72b6\u6001\u6539\u53d8")})})}),r.onError(function(e){var t=new Object;t.code=0,t.msg="\u5f53\u524d\u5e76\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\u53ef\u4ee5\u5c55\u793a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",t.advData=o;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var i=JSON.stringify(n);a.manageSdkResponse(i),console.log(e)}),r.onClose(function(){console.log("ULSDK_TEST......\u63d2\u5c4f\u2f34\u5e7f\u544a\u5173\u95ed");var e=new Object;e.code=1,e.type="interstitial",e.msg="\u63d2\u5c4f\u2f34\u544a\u5173\u95ed\u6210\u529f",e.userData=o.userData;var t=new Object;t.cmd="/c/closeAdvResult",t.data=e;var n=JSON.stringify(t);a.manageSdkResponse(n)})}else{var s=new Object;s.code=0,s.msg="\u5f53\u524d\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",s.advData=o;var u=new Object;u.cmd="/c/advShowResult",u.data=s;var d=JSON.stringify(u);a.manageSdkResponse(d)}}},{key:"openVideoAdv",value:function(e,t,n){var o=opUnion.createVideoAd({posId:e,mediaId:t});o.load().then(function(){o.show().then(function(){console.log("ULSDK_TEST....\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a")})}),o.onError(function(e){var t=new Object;t.code=0,t.msg="\u6682\u65f6\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\u53ef\u4ee5\u5c55\u793a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",t.advData=n;var o=new Object;o.cmd="/c/advShowResult",o.data=t;var i=JSON.stringify(o);a.manageSdkResponse(i),console.log(JSON.stringify(e))}),o.onClose(function(e){var t=new Object;o.offLoad(),o.offError(),e&&e.isEnded?(t.code=1,t.msg="\u8fbe\u5230\u770b\u5e7f\u544a\u65f6\u957f\u8981\u6c42\uff0c\u53ef\u4ee5\u4e0b\u53d1\u5956\u52b1"):(t.code=0,t.msg="\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u5956\u52b1"),t.advData=n;var i=new Object;i.cmd="/c/advShowResult",i.data=t;var r=JSON.stringify(i);a.manageSdkResponse(r)})}},{key:"openNativeAdv",value:function(e,t){var n=opUnion.createNativeAd({posId:e,mediaId:t});n.load().then(function(e){console.log("\u539f\u751f\u5e7f\u544a\u6570\u636e\uff1a ",e),n.doExpose({index:0,containerId:"xxxx"})}),n.onError(function(e){console.log(e)}),native.doClick({index:1,containerId:"xxxx",mouse:{downX:"xx",downY:"xx",upX:"xx",upY:"xx"}})}}]),e}();t.exports=new u,cc._RF.pop()},{"../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkOppoModule:[function(e,t,n){"use strict";cc._RF.push(t,"0920c5TladK1JoEUXCzTjdw","ulsdkOppoModule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(e("../../ulsdkmanager/ulsdkmanager.js")),i=s(e("../../sdktools/sdktools.js")),r=s(e("../../net/ULCop.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var l=e("./ulsdkOppoAdv.js"),c="",u=!1,d=0,f=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");r.initCopInfo(t,o,e,n);var s=this.getChannelConfigByKey("packageName");l.initAdv();i.loadJs("http://cdofs.oppomobile.com/cdo-activity/static/201809/30/gamehall/sdk/opppo-sdk-1.4.0.js",function(){var t=0,n=setInterval(function(){t+=5,console.log("progress is:"+t),OPPO.getAppVersion()>1200&&OPPO.setLoadingProgress(t),t>100&&(clearInterval(n),console.log("ULSDK_TEST........loading complete"),OPPO.loadingComplete())},500);OPPO.login({packageName:s,callback:function(t){console.log(t),c=e+"_oppo_"+t.userId,console.log("ULSDK_TEST.........initModule...OPPO.login...res..",t),u=!0}})});i.loadJs("https://adsfs.oppomobile.com/mp/app/union/h5/index.js",function(){console.log("ULSDK_TEST....initAdvJs......\u5e7f\u544aSDK\u52a0\u8f7d\u5b8c\u6210")})}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(u&&r.IsGetCopData)console.log("ULSDK_TEST.........setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210==========console=======isGetUserId====",u,r.IsGetCopData),this.doSetVerSion();else{console.log("ULSDK_TEST........setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210--------console-----\u5ef6\u65f6------------",e,u,r.IsGetCopData);var t=this;setTimeout(function(){t.doSetVerSion()},e)}}},{key:"doSetVerSion",value:function(){d=1,console.log("ULSDK_TEST.......doSetVerSion...-------------\u5ef6\u65f6-----",u,r.IsGetCopData);var e={},t=this.getChannelConfigByKey("isOpenShare"),n=this.getChannelConfigByKey("isUseSdkRank"),o={userId:c,isClosePay:d,isOpenShare:t,isUseSdkRank:n,jumpGamesCount:0};e.cmd="/c/getLoginUserMessage",e.data=o;var i=JSON.stringify(e);a.manageSdkResponse(i),console.log("setVersion:",e);var s={cmd:"/c/channelInfoResult"},l={},f=a.getConfigByKey("commonCopConfig"),p=(a.getConfigByKey("oppo"),this.getChannelConfigByKey("copDefaultConfig"));l.copInfo=r.getCopData(f,p),s.data=l;var h=JSON.stringify(s);a.manageSdkResponse(h)}},{key:"getUserId",value:function(){return c}},{key:"userLogin",value:function(e){}},{key:"userIsLogin",value:function(e){}},{key:"openShare",value:function(e){}},{key:"openPay",value:function(e){}},{key:"openAdv",value:function(e){var t=this.getChannelConfigByKey("mediaId");switch(console.log("ULSDK_TEST.......openAdv...-------------mUserId-----",c),e.type){case"banner":var n=this.getChannelConfigByKey("bannerId"),o=this.getChannelConfigByKey("bannerTimer");l.openBannerAdv(n,t,o,e);break;case"video":var a=this.getChannelConfigByKey("videoId");l.openVideoAdv(a,t,e);break;case"interstitial":var i=this.getChannelConfigByKey("interstitialId"),r=this.getChannelConfigByKey("interstitialTimer");l.openInterstitialAd(i,t,r,e)}}},{key:"closeAdv",value:function(e){switch(e.type){case"banner":l.closeBannerAdv()}}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("oppo")[e]}},{key:"saveRankData",value:function(e){}},{key:"getRankData",value:function(e){}}]),e}();t.exports=new f,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkOppoAdv.js":"ulsdkOppoAdv"}],ulsdkOppoQgAdv:[function(e,t,n){"use strict";cc._RF.push(t,"42b21AZDL1FIKoyFch+TDUE","ulsdkOppoQgAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(e("../../ulsdkmanager/ulsdkmanager.js")),i=s(e("../../sdktools/sdktools.js")),r=s(e("../../net/httprequest.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var l=null,c=null,u=!0,d=null,f=null,p=null,h=null,g=null,m=!1,_=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(e){console.log("ULSDK_TEST....OppoQgAdv...initAdv.",e);try{qg.initAdService({appId:e,isDebug:!0,success:function(e){console.log("ULSDK_TEST.....OppoQgAdv........success"),m=!0},fail:function(e){console.log("ULSDK_TEST.....OppoQgAdv.......fail:"+e.code+e.msg)},complete:function(e){console.log("ULSDK_TEST.....OppoQgAdv.......complete:")}})}catch(e){console.log("ULSDK_TEST.....OppoQgAdv..\u521d\u59cb\u5316...err")}}},{key:"openBannerAdv",value:function(e,t,n,o){if(c=n,m&&u){console.log("ULSDK_TEST.....openBannerAdv.....",e,t);var s=new Array;s.push("ad","banner","request"),r.postMegaData(s,""),l||(console.log("ULSDK_TEST.....openBannerAdv...\u521b\u5efa\u5e7f\u544a\u7ec4\u4ef6..",e,t),(l=qg.createBannerAd({posId:e})).onShow(function(){console.log("ULSDK_TEST.....banner \u5e7f\u544a\u663e\u793a")})),l.show();var f=new Array;f.push("ad","banner","success"),r.postMegaData(f,""),u=!1,clearTimeout(d);d=i.setTimer(o,function(){u=!0,console.log("ULSDK_TEST......bannerTimerFlag \u72b6\u6001\u6539\u53d8!")})}else{console.log("ULSDK_TEST.....OppoQgAdv..\u91cd\u65b0\u521d\u59cb\u5316."),m||this.initAdv(t),u||console.log("ULSDK_TEST.....openBannerAdv..bannerTimerFlag\u72c0\u614b\u9084\u672a\u6539\u8b8a.");var p=new Object;p.code=0,p.msg="\u6682\u65f6\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\u53ef\u4ee5\u5c55\u793a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",p.advData=c;var h=new Object;h.cmd="/c/advShowResult",h.data=p;var g=JSON.stringify(h);a.manageSdkResponse(g)}}},{key:"closeBannerAdv",value:function(e){l.hide()}},{key:"openVideoAdv",value:function(e,t,n){if(p=n,m){console.log("ULSDK_TEST.....openVideoAdv.....",e,t);var o=new Array;o.push("ad","video","request"),r.postMegaData(o,""),f||((f=qg.createRewardedVideoAd({posId:e})).onLoad(function(){console.log("ULSDK_TEST.....\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f\uff01"),f.show()}),f.onVideoStart(function(){console.log("ULSDK_TEST.....\u6fc0\u52b1\u89c6\u9891\u5f00\u59cb\u64ad\u653e")}),f.onRewarded(function(){console.log("ULSDK_TEST.....\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5b8c\u6210\uff0c\u53d1\u653e\u5956\u52b1");var e=new Object;e.code=1,e.msg="\u8fbe\u5230\u770b\u5e7f\u544a\u65f6\u957f\u8981\u6c42\uff0c\u53ef\u4ee5\u4e0b\u53d1\u5956\u52b1",e.advData=p;var t=new Object;t.cmd="/c/advShowResult",t.data=e;var n=JSON.stringify(t);a.manageSdkResponse(n);var o=new Array;o.push("ad","video","success"),r.postMegaData(o,"")}),f.onError(function(e){console.log("ULSDK_TEST.....\u89c6\u9891\u5e7f\u544a\u51fa\u9519....",e);var t=new Object;t.code=0,t.msg="\u6682\u65f6\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\u53ef\u4ee5\u5c55\u793a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",t.advData=p;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o)})),f.load()}else{console.log("ULSDK_TEST.....OppoQgAdv..\u91cd\u65b0\u521d\u59cb\u5316."),this.initAdv(t);var i=new Object;i.code=0,i.msg="\u6682\u65f6\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\u53ef\u4ee5\u5c55\u793a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",i.advData=p;var s=new Object;s.cmd="/c/advShowResult",s.data=i;var l=JSON.stringify(s);a.manageSdkResponse(l)}}},{key:"openInterstitialAd",value:function(e,t,n){if(g=n,m){console.log("ULSDK_TEST.....openInterstitialAd.....",e,t);var o=new Array;o.push("ad","interstitial","request"),r.postMegaData(o,""),h||((h=qg.createInsertAd({posId:e})).onLoad(function(){h.show();var e=new Object;e.code=1,e.msg="\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u6210\u529f",e.advData=g;var t=new Object;t.cmd="/c/advShowResult",t.data=e;var n=JSON.stringify(t);a.manageSdkResponse(n);var o=new Array;o.push("ad","interstitial","success"),r.postMegaData(o,"")}),h.onError(function(e){console.log("ULSDK_TEST.....\u63d2\u5c4f\u5e7f\u544a\u51fa\u9519....",e);var t=new Object;t.code=0,t.msg="\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t.advData=g;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o)})),h.load()}else{console.log("ULSDK_TEST.....OppoQgAdv..\u91cd\u65b0\u521d\u59cb\u5316."),this.initAdv(t);var i=new Object;i.code=0,i.msg="\u6682\u65f6\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\u53ef\u4ee5\u5c55\u793a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",i.advData=g;var s=new Object;s.cmd="/c/advShowResult",s.data=i;var l=JSON.stringify(s);a.manageSdkResponse(l)}}},{key:"openNativeAdv",value:function(e,t,n){}}]),e}();t.exports=new _,cc._RF.pop()},{"../../net/httprequest.js":"httprequest","../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkVivoModuleAdv:[function(e,t,n){"use strict";cc._RF.push(t,"e2006AxBbNE/YAWTRXOLntT","ulsdkVivoModuleAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(e("../../ulsdkmanager/ulsdkmanager.js")),i=s(e("../../sdktools/sdktools.js")),r=s(e("../../net/httprequest.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var l=!0,c="close",u=null,d=!0,f=null,p="",h=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(e){p=e,d=!(qg.getSystemInfoSync().platformVersionCode<1031)}},{key:"openBannerAdv",value:function(e,t,n){if(!d){console.log("ULSDK_TEST......\u5f53\u524d\u5b58\u7248\u672c\u4e0d\u652f\u6301\u5e7f\u544a");var o=new Object;o.code=0,o.msg="\u5f53\u524d\u5b58\u7248\u672c\u4e0d\u652f\u6301\u5e7f\u544a",o.advData=n;var i=new Object;i.cmd="/c/advShowResult",i.data=o;var s=JSON.stringify(i);a.manageSdkResponse(s);var l=new Array;return l.push("ad","banner","lowversion"),void r.postMegaData(l,p)}if(f)return console.log("ULSDK_TEST....\u590d\u7528openBannerAdv........"),void f.show();console.log("ULSDK_TEST....\u521b\u5efaopenBannerAdv......111.destroy...");var c=new Array;c.push("ad","banner","request"),r.postMegaData(c,p),f=qg.createBannerAd({posId:e,style:{}}),console.log("ULSDK_TEST....\u521b\u5efaopenBannerAdv......2222....",JSON.stringify(f)),f.onLoad(function(e){var t=new Object;t.code=1,t.msg="banner\u5e7f\u544a\u663e\u793a\u6210\u529f",t.advData=n;var o=new Object;o.cmd="/c/advShowResult",o.data=t;var i=JSON.stringify(o);a.manageSdkResponse(i),console.log("ULSDK_TEST......banner\u5e7f\u544a\u52a0\u8f7d\u6210\u529f!"),f.show();var s=new Array;s.push("ad","banner","success"),r.postMegaData(s,p)}),f.onError(function(e){var t=new Object;t.code=0,t.msg="banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t.advData=n;var o=new Object;o.cmd="/c/advShowResult",o.data=t;var i=JSON.stringify(o);a.manageSdkResponse(i),console.log("ULSDK_TEST......banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25!",e);var s=new Array;r.postMegaData(s,p)}),f.onClose(function(){console.log("ULSDK_TEST......\u7528\u6237\u5173\u95edbanner!"),f=null})}},{key:"closeBannerAdv",value:function(){f&&f.hide()}},{key:"openInterstitialAd",value:function(e,t,n){if(!d){console.log("ULSDK_TEST......\u5f53\u524d\u5b58\u7248\u672c\u4e0d\u652f\u6301\u5e7f\u544a");var o=new Object;o.code=0,o.msg="\u5f53\u524d\u5b58\u7248\u672c\u4e0d\u652f\u6301\u5e7f\u544a",o.advData=n;var s=new Object;s.cmd="/c/advShowResult",s.data=o;var f=JSON.stringify(s);a.manageSdkResponse(f);var h=new Array;return h.push("ad","interstitial","lowversion"),void r.postMegaData(h,p)}if(l)if("open"!=c){var g=new Array;g.push("ad","interstitial","request"),r.postMegaData(g,p),c="open",console.log("ULSDK_TEST--\u521b\u5efaopenInterstitialAd....1111.....",e);var m=qg.createInterstitialAd({posId:e});m.onLoad(function(){m.show().then(function(){console.log("ULSDK_TEST....\u63d2\u5c4f\u5e7f\u544a\u663e\u793a"),l=!1;var e=new Object;e.code=1,e.msg="\u63d2\u5c4f\u2f34\u544a\u52a0\u8f7d\u6210\u529f",e.advData=n;var o=new Object;o.cmd="/c/advShowResult",o.data=e;var s=JSON.stringify(o);a.manageSdkResponse(s);var c=new Array;c.push("ad","interstitial","success"),r.postMegaData(c,p),clearTimeout(u);u=i.setTimer(t,function(){l=!0,console.log("ULSDK_TEST......interstitialFlag \u72b6\u6001\u6539\u53d8")})})}),m.onError(function(e){var t=new Object;t.code=0,t.msg="\u5f53\u524d\u5e76\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\u53ef\u4ee5\u5c55\u793a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",t.advData=n;var o=new Object;o.cmd="/c/advShowResult",o.data=t;var i=JSON.stringify(o);a.manageSdkResponse(i),c="close";var s=new Array;r.postMegaData(s,p),console.log("ULSDK_TEST--interstitialAd\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25!",JSON.stringify(e))}),m.onClose(function(){console.log("ULSDK_TEST--\u63d2\u5c4f\u2f34\u5e7f\u544a\u5173\u95ed");var e=new Object;e.code=1,e.type="interstitial",e.msg="\u63d2\u5c4f\u2f34\u544a\u5173\u95ed\u6210\u529f",e.userData=n.userData;var t=new Object;t.cmd="/c/closeAdvResult",t.data=e;var o=JSON.stringify(t);a.manageSdkResponse(o),c="close"})}else console.log("ULSDK_TEST--\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u672a\u5904\u7406\u5b8c");else{var _=new Object;_.code=0,_.msg="\u5f53\u524d\u6ca1\u6709\u9002\u5408\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",_.advData=n;var v=new Object;v.cmd="/c/advShowResult",v.data=_;var y=JSON.stringify(v);a.manageSdkResponse(y)}}},{key:"openVideoAdv",value:function(e,t){}},{key:"openNativeAdv",value:function(e,t){}},{key:"openUrlAdv",value:function(e,t){window.location.href="https://gamesres.ultralisk.cn/notice/23huodong/"}}]),e}();t.exports=new h,cc._RF.pop()},{"../../net/httprequest.js":"httprequest","../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkVivoModule:[function(e,t,n){"use strict";cc._RF.push(t,"b66fd++bLdOtaRx3pkjB51I","ulsdkVivoModule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(e("../../ulsdkmanager/ulsdkmanager.js")),i=s(e("../../net/httprequest.js")),r=s(e("../../net/ULCop.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var l=e("./ulsdkVivoModuleAdv.js"),c=null,u=0,d=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");r.initCopInfo(t,o,e,n),l.initAdv("")}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(r.IsGetCopData)console.log("ULSDK_TEST.........setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210==========console=======isGetUserId====",r.IsGetCopData),this.doSetVerSion();else{console.log("ULSDK_TEST........setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210--------console-----\u5ef6\u65f6------------",e,r.IsGetCopData);var t=this;setTimeout(function(){t.doSetVerSion()},e)}}},{key:"doSetVerSion",value:function(){var e=new Array;e.push("login"),i.postMegaData(e,""),u=1,console.log("ULSDK_TEST.......doSetVerSion...-------------\u5ef6\u65f6-----",!1,r.IsGetCopData);var t={},n=!1,o=a.getConfigByKey("commonCopConfig"),s=this.getChannelConfigByKey("copDefaultConfig"),l=r.getCopData(o,s);l&&(c=JSON.parse(l)).hasOwnProperty("s_sdk_adv_show_url_list")&&c.s_sdk_adv_show_url_list&&(n=!0),n=!1;var d=this.getChannelConfigByKey("isOpenShare"),f=this.getChannelConfigByKey("isUseSdkRank"),p={userId:"",isClosePay:u,isOpenShare:d,isUseSdkRank:f,isShowUrlAdIcon:n,jumpGamesCount:0};t.cmd="/c/getLoginUserMessage",t.data=p;var h=JSON.stringify(t);a.manageSdkResponse(h),console.log("setVersion:",t);var g={cmd:"/c/channelInfoResult"},m={};m.copInfo=l,g.data=m;var _=JSON.stringify(g);a.manageSdkResponse(_)}},{key:"getUserId",value:function(){return""}},{key:"userLogin",value:function(e){}},{key:"userIsLogin",value:function(e){}},{key:"openShare",value:function(e){}},{key:"openPay",value:function(e){}},{key:"openAdv",value:function(e){switch(console.log("ULSDK_TEST.......openAdv...-------------mUserId-----",""),e.type){case"banner":var t=this.getChannelConfigByKey("bannerId"),n=parseInt(c.banner_timer);l.openBannerAdv(t,n,e);break;case"video":var o=this.getChannelConfigByKey("videoId");l.openVideoAdv(o,e);break;case"interstitial":var a=this.getChannelConfigByKey("interstitialId"),i=parseInt(c.interstitial_timer);i<500&&(i=1e4),console.log("ULSDK_TEST.......openAdv...-------------interstitialTimer-----",i),l.openInterstitialAd(a,i,e);break;case"native":break;case"url":var r=c.s_sdk_adv_show_url_list;l.openUrlAdv(r,e)}}},{key:"closeAdv",value:function(e){switch(e.type){case"banner":l.closeBannerAdv()}}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("vivo")[e]}},{key:"saveRankData",value:function(e){}},{key:"getRankData",value:function(e){}}]),e}();t.exports=new d,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../net/httprequest.js":"httprequest","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkVivoModuleAdv.js":"ulsdkVivoModuleAdv"}],ulsdkWeiXinAdv:[function(e,t,n){"use strict";cc._RF.push(t,"ce690rhloZN0o/PaUk7YBZp","ulsdkWeiXinAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=r(e("../../sdktools/sdktools.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=null,l=null,c=!1,u=null,d=!0,f=null,p=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(e){l=wx.createRewardedVideoAd({adUnitId:e}),this.videoClose(),console.log("\u521d\u59cb\u5316\u5e7f\u544a\uff01")}},{key:"openBannerAdv",value:function(e,t,n){if(!d&&s)return s.show(),void console.log("ULSDK_TEST......openBannerAdv......\u590d\u7528banner..");null!=s&&(s.destroy(),s=null);var o=wx.getSystemInfoSync();console.log(o);var r=.8*o.screenWidth,l=.1*o.screenWidth,c=o.screenHeight;console.log("...bannerAdv.........",s,r,c),(s=wx.createBannerAd({adUnitId:e,style:{left:l,top:0,width:r}})).onResize(function(e){console.log(s.style.realWidth,s.style.realHeight),s.style.top=c-s.style.realHeight+.1}),s.onError(function(e){var t=new Object;t.code=0,t.msg="banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t.advData=n;var o=new Object;o.cmd="/c/advShowResult",o.data=t;var i=JSON.stringify(o);a.manageSdkResponse(i),d=!0,console.log("ULSDK_TEST......banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25!",e)}),s.show(),d=!1,clearTimeout(f);f=i.setTimer(t,function(){d=!0,console.log("ULSDK_TEST......bannerTimerFlag \u72b6\u6001\u6539\u53d8")})}},{key:"closeBannerAdv",value:function(){s.hide()}},{key:"openVideoAdv",value:function(e,t){null==l&&(l=wx.createRewardedVideoAd({adUnitId:e}),this.videoClose()),c?console.log("\u5e7f\u544a\u6b63\u5728\u64ad\u653e\u4e2d"):(u=t,this.videoLoad(t),l.onError(function(e){console.log(e)}))}},{key:"videoLoad",value:function(e){c=!0,l.load().then(function(){return l.show().then(function(){console.log("\u5e7f\u544a\u5c55\u793a\u6210\u529f....1")})}).catch(function(t){return l.load().then(function(){return l.show().then(function(){console.log("\u5e7f\u544a\u5c55\u793a\u6210\u529f....2")})}).catch(function(t){console.log("videoLoad.....err....",t);var n=new Object;n.code=0,n.msg="\u5e7f\u544a\u64ad\u653e\u5931\u8d25"+t.errMsg,n.advData=e;var o=new Object;o.cmd="/c/advShowResult",o.data=n;var i=JSON.stringify(o);a.manageSdkResponse(i),c=!1,console.log("\u5e7f\u544a\u64ad\u653e\u5931\u8d25")})})}},{key:"videoClose",value:function(){l.onClose(function(e){if(e&&e.isEnded||void 0===e){console.log("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),c=!1;var t=new Object;t.code=1,t.msg="\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1",t.advData=u;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o)}else{c=!1;var i=new Object;i.code=0,i.msg="\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1",i.advData=u;var r=new Object;r.cmd="/c/advShowResult",r.data=i;var s=JSON.stringify(r);a.manageSdkResponse(s),console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1")}})}}]),e}();t.exports=new p,cc._RF.pop()},{"../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkWeiXinModule:[function(e,t,n){"use strict";cc._RF.push(t,"0663dqTL9hNEp1q6O6RZtnJ","ulsdkWeiXinModule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(e("../../ulsdkmanager/ulsdkmanager.js")),i=(r(e("../../sdktools/sdktools.js")),r(e("../../net/ULCop.js")));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=e("./ulsdkWeiXinAdv.js"),l=(new Array,""),c="",u=!1,d=0,f="",p=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){console.log("InitModule.....weixin");var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");i.initCopInfo(t,o,e,n);var r=this.getChannelConfigByKey("video_adunit");s.initAdv(r);var p=a.getConfigByKey("netTimeout"),h=a.getConfigByKey("weixin"),g=this;wx.onShow(function(e){console.log("wx.onShow-----------",e),1035==e.scene&&g.extraBonusResult(0)}),wx.showShareMenu();var m=this.getChannelConfigByKey("shareTitle"),_=this.getChannelConfigByKey("shareImgUrl");wx.onShareAppMessage(function(){return{title:m,imageUrl:_}}),console.log("\u6211\u662f\u4e3b\u7ebf\u7a0b--------------------======================"),wx.getSystemInfo({success:function(e){console.log(e);var t=e.system[0]+e.system[1]+e.system[2];f=e.SDKVersion,"And"==t&&(d=0),"iOS"==t&&(d=1)},fail:function(){}}),wx.login({success:function(t){h.appid;var n=h.loginUrl,o=t.code;n=n+"?gameId="+e+"&js_code="+o;var a="";a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");setTimeout(function(){!0,a.abort()},p);a.open("get",n),a.send(),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var t=a.responseText;console.log("result..>>>>>>>>..",t);var n=JSON.parse(t);if("1"==n.code){c=n.mess,l=e+"_weixin_"+c,u=!0;var o={},i={openId:c};o.cmd="/c/userMessage",o.data=i;var r=JSON.stringify(o);try{g.openDataManage(r)}catch(e){console.log("\u5f53\u524d\u9879\u76ee\u672a\u914d\u7f6e\u5f00\u653e\u57df..\u5b50\u9879\u76ee..")}}console.log("result....",l)}}}})}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(u&&i.IsGetCopData)console.log("setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210=====================",u,i.IsGetCopData),this.doSetVerSion();else{console.log("setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210-------------\u5ef6\u65f6------------",e,u,i.IsGetCopData);var t=this;setTimeout(function(){t.doSetVerSion()},e)}}},{key:"doSetVerSion",value:function(){console.log("doSetVerSion...doSetVerSion-------------\u5ef6\u65f6-----",u,i.IsGetCopData);var e={},t=this.getChannelConfigByKey("isOpenShare"),n=this.getChannelConfigByKey("isUseSdkRank"),o=this.getChannelConfigByKey("jumpGames"),r={userId:l,isClosePay:d,isOpenShare:t,isUseSdkRank:n,jumpGamesCount:o.length};e.cmd="/c/getLoginUserMessage",e.data=r;var s=JSON.stringify(e);a.manageSdkResponse(s),console.log("setVersion:",e);var c={cmd:"/c/channelInfoResult"},f={},p=a.getConfigByKey("commonCopConfig"),h=(a.getConfigByKey("weixin"),this.getChannelConfigByKey("copDefaultConfig"));f.copInfo=i.getCopData(p,h),c.data=f;var g=JSON.stringify(c);a.manageSdkResponse(g);var m=wx.getLaunchOptionsSync();console.log("initVal-----------",m),1035==m.scene&&this.extraBonusResult(1)}},{key:"extraBonusResult",value:function(e){var t={cmd:"/c/extraBonus"},n={code:"1",msg:"\u73a9\u5bb6\u4ece\u5fae\u4fe1\u516c\u4f17\u53f7\u8fdb\u5165\u6e38\u620f"};n.isInitGame=e,t.data=n;var o=JSON.stringify(t);a.manageSdkResponse(o)}},{key:"getUserId",value:function(){return l}},{key:"userLogin",value:function(e){}},{key:"userIsLogin",value:function(e){}},{key:"openShare",value:function(e){console.log("Modulesweixin  use openShare is OK!....1...");var t=e.content;t||(t=this.getChannelConfigByKey("shareTitle"));var n=e.imagePath;n||(n=this.getChannelConfigByKey("shareImgUrl")),wx.shareAppMessage({title:t,imageUrl:n}),console.log("Modulesweixin  use openShare is OK!.....2....");var o=new Object;o.cmd="/c/shareResult";var i=new Object;i.code=1,i.msg="\u5206\u4eab\u6210\u529f\uff01",i.userData=e.userData,o.data=i,a.manageSdkResponse(JSON.stringify(o))}},{key:"openPay",value:function(e){var t=e.payInfo.payId,n=a.getConfigByKey("pay_code");try{var o=n[t].price}catch(t){var i={cmd:"/c/payResult"},r={code:"0",msg:"payId \u4e0d\u5b58\u5728"};r.payData=e,i.data=r;var s=JSON.stringify(i);return void a.manageSdkResponse(s)}var l=this.getChannelConfigByKey("offerId"),c=this.getChannelConfigByKey("env"),u=parseInt(o);wx.requestMidasPayment({mode:"game",offerId:l,env:c,currencyType:"CNY",platform:"android",buyQuantity:10*u,zoneId:"1",success:function(){var t={cmd:"/c/payResult"},n={code:"1",msg:"\u652f\u4ed8\u56de\u8c03\u6210\u529f"};n.payData=e,t.data=n;var o=JSON.stringify(t);a.manageSdkResponse(o),console.log("\u652f\u4ed8\u6210\u529f......")},fail:function(t){console.log("\u8d2d\u4e70\u5931\u8d25"),console.log(t);var n={cmd:"/c/payResult"},o={code:"0"};o.msg=t.errMsg,o.payData=e,n.data=o;var i=JSON.stringify(n);a.manageSdkResponse(i)},complete:function(e){console.log("\u8d2d\u4e70\u5b8c\u6210"),console.log(e)}})}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("weixin")[e]}},{key:"loginRoleInfo",value:function(){console.log("loginRoleInfo 4399 \u767b\u5f55\uff01")}},{key:"loginOut",value:function(){console.log("Modules4399  use loginOut is OK!");a.manageSdkResponse('{"cmd":"/c/loginOut","data":"true"}')}},{key:"openAdv",value:function(e){if(console.log("...openAdv...",e),f<"2.0.4")console.log("sdk \u7684\u7248\u672c\u5c0f\u4e8e 2.0.4 \u4e0d\u80fd\u5c55\u793a\u5e7f\u544a");else switch(e.type){case"banner":var t=this.getChannelConfigByKey("banner_adunit"),n=this.getChannelConfigByKey("bannerTimer");s.openBannerAdv(t,n,e);break;case"video":var o=this.getChannelConfigByKey("video_adunit");s.openVideoAdv(o,e)}}},{key:"closeAdv",value:function(e){switch(e.type){case"banner":s.closeBannerAdv()}}},{key:"openDataManage",value:function(e){wx.getOpenDataContext().postMessage({message:e})}},{key:"saveRankData",value:function(e){var t=new Object;t.cmd="/c/saveRankData",t.data=e,this.openDataManage(JSON.stringify(t))}},{key:"getRankData",value:function(e){var t=new Object;t.cmd="/c/getRankData",t.data=e,this.openDataManage(JSON.stringify(t))}},{key:"jumpOtherGame",value:function(e){var t=e.gameIndex,n=this.getChannelConfigByKey("jumpGames")[t];console.log("index...",t,"....gameId....",n);var o=new Object;o.appId=n,o.success=function(){console.log("ULSDK_TEST-----\u6e38\u620f\u8df3\u8f6c\u6210\u529f!");var t={cmd:"/c/jumpGameResult"},n={code:"1",msg:"\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u6210\u529f"};n.userData=e.userData||"",t.data=n;var o=JSON.stringify(t);a.manageSdkResponse(o)},o.fail=function(){console.log("ULSDK_TEST-----\u6e38\u620f\u8df3\u8f6c\u5931\u8d25!");var t={cmd:"/c/jumpGameResult"},n={code:"0",msg:"\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u5931\u8d25"};n.userData=e.userData||"",t.data=n;var o=JSON.stringify(t);a.manageSdkResponse(o)},wx.navigateToMiniProgram(o)}}]),e}();t.exports=new p,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkWeiXinAdv.js":"ulsdkWeiXinAdv"}],ulsdkXiaoMiAdv:[function(e,t,n){"use strict";cc._RF.push(t,"4921ctnYzhKjYjO1wfZJ1+V","ulsdkXiaoMiAdv");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../ulsdkmanager/ulsdkmanager.js"));var i=null,r=!1,s=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initAdv",value:function(){}},{key:"openBannerAdv",value:function(){}},{key:"closeBannerAdv",value:function(){}},{key:"openInterstitialAd",value:function(){}},{key:"openVideoAdv",value:function(e){i=e,console.log("openVideoAdv--hy_ad_sdk---"),r||(r=!0,hy_ad_sdk.playVideoAd(function(e){if(console.log("openVideoAdv----code-",e),r=!1,0==e){var t=new Object;t.code=1,t.msg="\u7528\u6237\u770b\u5b8c\u5e7f\u544a,\u53ef\u4ee5\u53d1\u5956",t.advData=i;var n=new Object;n.cmd="/c/advShowResult",n.data=t;var o=JSON.stringify(n);a.manageSdkResponse(o)}else{var s=new Object;s.code=0,s.msg="\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\u6216\u7528\u6237\u5173\u95ed\u5e7f\u544a",s.advData=i;var l=new Object;l.cmd="/c/advShowResult",l.data=s;var c=JSON.stringify(l);a.manageSdkResponse(c)}}))}},{key:"openNativeAdv",value:function(){}}]),e}();t.exports=new s,cc._RF.pop()},{"../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkXiaoMiModule:[function(e,t,n){"use strict";cc._RF.push(t,"dc4aao6yOlCXq1EcXeAtXjc","ulsdkXiaoMiModule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(e("../../ulsdkmanager/ulsdkmanager.js")),i=s(e("../../sdktools/sdktools.js")),r=s(e("../../net/ULCop.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var l=e("./ulsdkXiaoMiAdv.js"),c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){i.loadJs("https://static.g.mi.com/game/h5sdk/h5-dj-sdk-v.1.0.min.js",function(){console.log("ULSDK_TEST.....\u52a0\u8f7d\u5c0f\u7c73SDK\u7684js\u6210\u529f\uff01"),setTimeout(function(){window.hy_dj_sdk.ready({zIndex:9999,pin:0},function(){console.log("ULSDK_TEST-----hy_dj_sdk----\u6210\u529f\uff01-")})},300),console.log("hy_dj_sdk-------------",hy_dj_sdk.getBaseData())});i.loadJs("https://static.g.mi.com/game/h5sdk/h5-ad-sdk-v.1.0.min.js",function(){console.log("ULSDK_TEST.....\u52a0\u8f7d\u5c0f\u7c73\u5e7f\u544aSDK\u7684js\u6210\u529f\uff01")});var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");r.initCopInfo(t,o,e,n),l.initAdv()}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(r.IsGetCopData)console.log("ULSDK_TEST.........setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210==========console===========",r.IsGetCopData),this.doSetVersion();else{console.log("ULSDK_TEST........setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210--------console-----\u5ef6\u65f6------------",e,r.IsGetCopData);var t=this;setTimeout(function(){t.doSetVersion()},e)}}},{key:"doSetVersion",value:function(){var e={},t={userId:"",isClosePay:0,isOpenShare:this.getChannelConfigByKey("isOpenShare"),isUseSdkRank:this.getChannelConfigByKey("isUseSdkRank"),jumpGamesCount:0};e.cmd="/c/getLoginUserMessage",e.data=t;var n=JSON.stringify(e);a.manageSdkResponse(n),console.log("ULSDK_TEST....setVersion:",e);var o={cmd:"/c/channelInfoResult"},i={},s=a.getConfigByKey("commonCopConfig"),l=this.getChannelConfigByKey("copDefaultConfig");i.copInfo=r.getCopData(s,l),o.data=i;var c=JSON.stringify(o);a.manageSdkResponse(c)}},{key:"getUserId",value:function(){return""}},{key:"userLogin",value:function(e){}},{key:"userIsLogin",value:function(e){}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("xiaomi")[e]}},{key:"openShare",value:function(e){}},{key:"openPay",value:function(e){}},{key:"openAdv",value:function(e){switch(console.log("ULSDK_TEST.......openAdv...-------------mUserId-----","",e),e.type){case"banner":break;case"video":l.openVideoAdv(e)}}},{key:"closeAdv",value:function(e){e.type}},{key:"saveRankData",value:function(e){}},{key:"getRankData",value:function(e){}}]),e}();t.exports=new c,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkXiaoMiAdv.js":"ulsdkXiaoMiAdv"}],ulsdkmanager:[function(e,t,n){"use strict";cc._RF.push(t,"451eezdWxFIqJXwRYeRfeay","ulsdkmanager"),Object.defineProperty(n,"__esModule",{value:!0}),n.initManager=function(t){try{l=JSON.parse(a.cConfig)}catch(e){return void console.error("initManager...cConfig..json\u89e3\u6790\u5931\u8d25\uff01")}c=t,console.log("ULSDK_TEST...............InitManager....channel..",c),function(t){switch(console.log("ULSDK_TEST...............InitManager....initCurrentChannelObj .."),t){case"limi":s=e("../ulsdkmodules/sdkLiMiModule/ulsdkLiMiModule.js");break;case"weixin":s=e("../ulsdkmodules/sdkWeiXinModule/ulsdkWeiXinModule.js");break;case"oppo":s=e("../ulsdkmodules/ulsdkOppoModule/ulsdkOppoModule.js");break;case"xiaomi":s=e("../ulsdkmodules/ulsdkXiaoMiModule/ulsdkXiaoMiModule.js");break;case"m4399mingame":s=e("../ulsdkmodules/ulsdkM4399minGameModule/ulsdkM4399minGameModule.js");break;case"vivo":s=e("../ulsdkmodules/ulsdkVivoModule/ulsdkVivoModule.js");break;case"oppoqg":s=e("../ulsdkmodules/ulsdkOppoQgModule/ulsdkOppoQgModule.js");break;case"headline":s=e("../ulsdkmodules/ulsdkHeadLineModule/ulsdkHeadLineModule.js");break;case"baidu":s=e("../ulsdkmodules/ulsdkBaiduModule/ulsdkBaiduModule.js");break;default:console.log("ULSDK_TEST...............InitManager.\u6ca1\u6709\u8be5\u6e20\u9053...",t)}s?(console.log("ULSDK_TEST..........\u521d\u59cb\u5316\uff0c\u6a21\u5757.....InitManager......",s),s.initModule()):console.error("ULSDK_TEST...............InitManager.....ERROR...")}(t)},n.getCurrentChannel=function(){return c},n.getCurrentModule=function(){return s},n.getConfigByKey=function(e){return l[e]},n.manageSdkRequest=function(e,t){if(null==s)return void console.error("ULSDK_TEST......\u6e38\u620f\u4e0d\u5728\u4efb\u4f55\u4e00\u4e2a\u6e20\u9053\uff01");switch(e){case"/c/setVersion":console.log("setVersion...ManageSdkRequest.",t),s.setVersion();break;case"/c/openPay":s.openPay(t);break;case"/c/openShare":s.openShare(t);break;case"/c/userLogin":s.userLogin(t);break;case"/c/userIsLogin":s.userIsLogin(t);break;case"/c/loginRole":s.loginRoleInfo(t);break;case"/c/loginOut":s.loginOut(t);break;case"/c/openAdv":s.openAdv(t);break;case"/c/closeAdv":s.closeAdv(t);break;case"/c/saveRankData":s.saveRankData(t);break;case"/c/getRankData":s.getRankData(t);break;case"/c/useCdkey":i.useCdkey(t);break;case"/c/megadataServer":i.postMegaData(t,s.getUserId());break;case"/c/createRole":i.postMegaData(new Array("/d/createNewRole",t.roleName),s.getUserId());break;case"/c/recorderGameVideo":s.recorderGameVideo(t);break;case"/c/shareGameVideo":s.shareGameVideo(t);break;case"/c/jumpOtherGame":s.jumpOtherGame(t);break;default:console.log("ULSDK_TEST.........\u6ca1\u6709\u8be5\u6307\u4ee4",e)}},n.manageSdkResponse=function(e){o.response(e)};var o=r(e("../ulsdkmiddleware/ulsdkmiddleware.js")),a=e("../assets/cConfig.js"),i=r(e("../net/httprequest.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=null,l=null,c=null;cc._RF.pop()},{"../assets/cConfig.js":"cConfig","../net/httprequest.js":"httprequest","../ulsdkmiddleware/ulsdkmiddleware.js":"ulsdkmiddleware","../ulsdkmodules/sdkLiMiModule/ulsdkLiMiModule.js":"ulsdkLiMiModule","../ulsdkmodules/sdkWeiXinModule/ulsdkWeiXinModule.js":"ulsdkWeiXinModule","../ulsdkmodules/ulsdkBaiduModule/ulsdkBaiduModule.js":"ulsdkBaiduModule","../ulsdkmodules/ulsdkHeadLineModule/ulsdkHeadLineModule.js":"ulsdkHeadLineModule","../ulsdkmodules/ulsdkM4399minGameModule/ulsdkM4399minGameModule.js":"ulsdkM4399minGameModule","../ulsdkmodules/ulsdkOppoModule/ulsdkOppoModule.js":"ulsdkOppoModule","../ulsdkmodules/ulsdkOppoQgModule/ulsdkOppoQgModule.js":"ulsdkoppoqgmodule","../ulsdkmodules/ulsdkVivoModule/ulsdkVivoModule.js":"ulsdkVivoModule","../ulsdkmodules/ulsdkXiaoMiModule/ulsdkXiaoMiModule.js":"ulsdkXiaoMiModule"}],ulsdkmiddleware:[function(e,t,n){"use strict";cc._RF.push(t,"f6f43D3e0hEqqp8PG49gKCf","ulsdkmiddleware"),Object.defineProperty(n,"__esModule",{value:!0}),n.initSdk=function(){var e="xiaomi";e||(e=a.getQueryString("channel"));o.initManager(e),console.log("ULSDK_TEST.........\u521d\u59cb\u5316sdk......currentChannel..",e)},n.setGameCallback=function(e){r=e,console.log("ULSDK_TEST........setGameCallback....success.....")},n.request=function(e){try{var t=JSON.parse(e),n=t.cmd,a=t.data;console.log("ULSDK_TEST........request func is .... !",e),o.manageSdkRequest(n,a)}catch(e){return console.error("ULSDK_TEST....request.....json\u89e3\u6790\u5931\u8d25\uff01"),void console.error(JSON.stringify(e))}},n.response=function(e){null!=r?r(e):console.error("ULSDK_TEST.........callbackHalder func is null !")};var o=i(e("../ulsdkmanager/ulsdkmanager.js")),a=i(e("../sdktools/sdktools.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}console.log("middleWare.. \u521d\u59cb\u5316..Manager.....",o);var r=null;cc._RF.pop()},{"../sdktools/sdktools.js":"sdktools","../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager"}],ulsdkoppoqgmodule:[function(e,t,n){"use strict";cc._RF.push(t,"b1518FNH75C8pL7jkbQnQbQ","ulsdkoppoqgmodule");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(e("../../ulsdkmanager/ulsdkmanager.js")),i=(s(e("../../sdktools/sdktools.js")),s(e("../../net/ULCop.js"))),r=s(e("../../net/httprequest.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var l=e("./ulsdkOppoQgAdv.js"),c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"initModule",value:function(){console.log("ULSDK_TEST....initModule...ModulesOppoQg.");var e=a.getConfigByKey("gameId"),t=a.getConfigByKey("copUrl"),n=a.getConfigByKey("gameVersion"),o=this.getChannelConfigByKey("cop_channelId");i.initCopInfo(t,o,e,n);var r=this.getChannelConfigByKey("appid");l.initAdv(r)}},{key:"setVersion",value:function(){var e=a.getConfigByKey("setVersionDelay");if(i.IsGetCopData)console.log("ULSDK_TEST.........setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210==========console=======isGetUserId====",i.IsGetCopData),this.doSetVerSion();else{console.log("ULSDK_TEST........setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210--------console-----\u5ef6\u65f6------------",e,i.IsGetCopData);var t=this;setTimeout(function(){t.doSetVerSion()},e)}}},{key:"doSetVerSion",value:function(){var e=new Array;e.push("login"),r.postMegaData(e,"");console.log("ULSDK_TEST.......doSetVerSion...-------------\u5ef6\u65f6-----",i.IsGetCopData);var t={},n={userId:"",isClosePay:1,isOpenShare:this.getChannelConfigByKey("isOpenShare"),isUseSdkRank:this.getChannelConfigByKey("isUseSdkRank"),jumpGamesCount:0};t.cmd="/c/getLoginUserMessage",t.data=n;var o=JSON.stringify(t);a.manageSdkResponse(o),console.log("setVersion:",t);var s={cmd:"/c/channelInfoResult"},l={},c=a.getConfigByKey("commonCopConfig"),u=(a.getConfigByKey("oppo"),this.getChannelConfigByKey("copDefaultConfig"));l.copInfo=i.getCopData(c,u),s.data=l;var d=JSON.stringify(s);a.manageSdkResponse(d)}},{key:"getUserId",value:function(){return""}},{key:"userLogin",value:function(){}},{key:"userIsLogin",value:function(){}},{key:"openPay",value:function(e){}},{key:"opendShare",value:function(e){}},{key:"openAdv",value:function(e){var t=e.type,n=this.getChannelConfigByKey("appid");switch(t){case"banner":var o=this.getChannelConfigByKey("bannerId"),a=this.getChannelConfigByKey("bannerTimer");l.openBannerAdv(o,n,e,a);break;case"video":var i=this.getChannelConfigByKey("videoId");l.openVideoAdv(i,n,e);break;case"interstitial":var r=this.getChannelConfigByKey("interstitialId");l.openInterstitialAd(r,n,e)}}},{key:"closeAdv",value:function(e){switch(e.type){case"banner":l.closeBannerAdv()}}},{key:"getChannelConfigByKey",value:function(e){return a.getConfigByKey("oppoqg")[e]}},{key:"saveRankData",value:function(e){}},{key:"getRankData",value:function(e){}}]),e}();t.exports=new c,cc._RF.pop()},{"../../net/ULCop.js":"ULCop","../../net/httprequest.js":"httprequest","../../sdktools/sdktools.js":"sdktools","../../ulsdkmanager/ulsdkmanager.js":"ulsdkmanager","./ulsdkOppoQgAdv.js":"ulsdkOppoQgAdv"}]},{},["Config","Main","_G","Const","DebugKeyDown","TestScript","TestSpine","debugFollow","DialogOpenAnim","MsgHandler","PoolManager","RedPoint","SceneBase","SpriteSheet","SpriteSwitcher","CharEffect","CharView","Effect","FlowerItem","FlyBox","FlyGirl","FlyIcon","GamePool","Girl","GridItem","GuideScript","JumpCoin","NumberEffect","WaterEffect","mgrGame","db","_mgrBase","mgrAdv","mgrAlert","mgrAudio","mgrCfg","mgrDrop","mgrGoal","mgrGuide","mgrItem","mgrLoader","mgrOperations","mgrPanel","mgrPay","mgrPvp","mgrQuest","mgrRank","mgrRecord","mgrRes","mgrScene","mgrSdk","mgrShader","mgrStatistics","mgrSwitch","mgrUp","TweenActive","TweenAlpha","TweenCallbackDelay","TweenColor","TweenGroup","TweenPosition","TweenRotation","TweenScale","UITweener","PanelAch","PanelBase","PanelCoinNotEnough","PanelDebug","PanelDialog","PanelFaDian","PanelGarden","PanelGirlGift","PanelGirlReward","PanelGuide","PanelHuaLing","PanelInput","PanelLoading","PanelLottery","PanelMain","PanelNewGift","PanelOutputX2","PanelPosNotEnought","PanelRank","PanelRecycle","PanelRewarFlyBox","PanelRewardAch","PanelRewardOffline","PanelRewardShow","PanelShare","PanelSign","PanelTestHead","PanelTip","PanelTuJian","PanelWater","SceneMain","ViewBase","cConfig","ULCop","httprequest","sdktools","ulsdkmanager","ulsdkmiddleware","ulsdkLiMiAdv","ulsdkLiMiModule","ulsdkWeiXinAdv","ulsdkWeiXinModule","ulsdkBaiduModule","ulsdkBaiduModuleAdv","ulsdkHeadLineModule","ulsdkHeadLineModuleAdv","ulsdkM4399minGameAdv","ulsdkM4399minGameModule","ulsdkOppoAdv","ulsdkOppoModule","ulsdkOppoQgAdv","ulsdkoppoqgmodule","ulsdkVivoModule","ulsdkVivoModuleAdv","ulsdkXiaoMiAdv","ulsdkXiaoMiModule","JsBridge","Mathf","Timer","Tools","UiHelper"]);